<span class="coi-text-darker mb-0 fs-14" [title]="disclosure?.updateTimeStamp | date:'dd MMM yyyy'" tabindex="0"
    [attr.aria-label]="'Results showing for' + (disclosure?.updateTimeStamp | date : 'dd MMM yyyy')"
    *ngIf="disclosure?.updateTimeStamp">{{disclosure?.updateTimeStamp | date : 'dd MMM yyyy'}}</span>

<!-- Project history card  -->
<div *ngIf="!disclosure?.travelDisclosureId && !disclosure.opaDisclosureId"
    class="card coi-card-regular position-relative m-06">
    <div class="card-body">
        <div class="row">
            <div class="col-lg-9 mb-3 mb-lg-0 mb-md-3 px-0">
                <div class="row">
                    <div class="col-12 d-inline-flex mb-2">
                        <span class="d-flex" tabindex="0">
                            <span tabindex="0" [attr.aria-label]="disclosure?.fcoiType"
                                class="entity-status shadow-sm d-flex align-items-center {{getColorBadges(disclosure)}}">
                                <span>{{disclosure?.fcoiType}}</span>
                            </span>
                        </span>
                        <h4 class="align-items-center d-flex fs-14 mb-0 title-color" tabindex="0"
                            *ngIf="disclosure.fcoiTypeCode === '2' || disclosure.fcoiTypeCode === '3'">
                            <span *ngIf="disclosure.fcoiTypeCode === '2' || disclosure.fcoiTypeCode === '3'"
                                tabindex="0" [attr.aria-label]="getProjectTitle(disclosure)">
                                <span class="coi-text-darker fs-6 hyper-link ms-1"> {{(readMoreOrLess ?
                                    getProjectTitle(disclosure) :
                                    getProjectTitle(disclosure) | slice:0:150)}}</span>
                                <span *ngIf="!readMoreOrLess && getProjectTitle(disclosure)?.length>150">
                                    <a *ngIf="!readMoreOrLess" (click)="readMoreOrLess=true" (keydown.enter)="readMoreOrLess=true"
                                    tabindex="0" role="link" aria-label="Click here to read more" title="Click here to Read more" class="link-primary fw-500"><span>...Read
                                            More</span></a>
                                </span>
                                <a *ngIf="readMoreOrLess" (click)="readMoreOrLess=false" (keydown.enter)="readMoreOrLess=false" class="link-primary fw-500" 
                                tabindex="0" role="link" aria-label="Click here to Read less" title="Click here to Read less"><span>Read
                                        Less</span></a>
                            </span>
                        </h4>
                    </div>
                </div>
                <div class="row mx-0">
                    <div class="col-md-6 col-lg-3 mb-2">
                        <div>
                            <label class="coi-text-dark d-block">Department</label>
                            <span class="coi-text-light"
                                [attr.aria.label]="disclosure?.homeUnit + ' - ' + disclosure?.homeUnitName">
                                {{commonService.getPersonLeadUnitDetails(disclosure)}}</span>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-2">
                        <div>
                            <label class="coi-text-dark d-block">Certification Date</label>
                            <span class="break-point-1200">
                                <app-no-data-label [valueToShow]="disclosure?.certifiedAt">
                                    <span class="coi-text-light"
                                        aria.label="{{disclosure?.certifiedAt | dateFormatterWithTimeZone}}">{{disclosure?.certifiedAt
                                        | dateFormatterWithTimeZone}}</span>
                                </app-no-data-label>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-2">
                        <div>
                            <label class="coi-text-dark d-block">Expiration Date</label>
                            <span class="break-point-1200">
                                <app-no-data-label [valueToShow]="disclosure?.expirationDate">
                                    <span class="coi-text-light"
                                        aria.label="{{disclosure?.expirationDate | dateFormatter}}">{{disclosure?.expirationDate
                                        | dateFormatter}}</span>
                                </app-no-data-label>
                            </span>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-lg-2 d-flex d-lg-block mb-3 mb-lg-0">
                <div class="flex-grow-1 lh-sm mb-2">
                    <label class="coi-text-lighter d-block">Disposition Status</label>
                    <span>
                        <span
                            class="{{commonService.getDispositionStatusBadge(disclosure?.dispositionStatusCode)}}"></span>
                        <span class="coi-text-dark" aria.label="disclosure?.dispositionStatus">
                            {{disclosure?.dispositionStatus}}
                        </span>
                    </span>
                </div>
                <div class="flex-grow-1 lh-sm mb-2">
                    <label class="coi-text-lighter d-block">Version Status</label>
                    <span>
                        <app-no-data-label [valueToShow]="disclosure?.versionStatus">
                            <span class=""
                                [attr.aria.label]="disclosure?.versionStatus === 'ACTIVE' ? 'green-badge' : disclosure?.versionStatus === 'PENDING' ? 'yellow-badge' : 'grey-badge'"
                                [ngClass]="disclosure?.versionStatus === 'ACTIVE' ? 'green-badge' : disclosure?.versionStatus === 'PENDING' ? 'yellow-badge' : 'grey-badge'"></span>
                            <span class="coi-text-dark"
                                [attr.aria.label]="disclosure?.versionStatus === 'ACTIVE' ? 'Active' : disclosure?.versionStatus === 'PENDING' ? 'Pending' : 'Archive'">
                                {{disclosure?.versionStatus === 'ACTIVE' ? 'Active' : disclosure?.versionStatus ===
                                'PENDING' ?
                                'Pending' : 'Archive'}}
                            </span>
                        </app-no-data-label>
                    </span>
                </div>
                <div class="flex-grow-1 lh-sm mb-2">
                    <label class="coi-text-lighter d-block">Disclosure Status</label>
                    <span>
                        <app-no-data-label [valueToShow]="disclosure?.conflictStatus">
                            <span class="{{commonService.getDisclosureConflictBadge(disclosure?.conflictStatusCode)}}">
                            </span>
                            <span class="coi-text-dark" aria.label="disclosure?.conflictStatus">
                                {{disclosure?.conflictStatus}}
                            </span>
                        </app-no-data-label>
                    </span>
                </div>
            </div>
            <div class="col-lg-1 d-flex align-items-center justify-content-end">
                <div tabindex="0"
                    [attr.aria-label]="disclosure?.travelDisclosureId ? 'Click to view Travel disclosure details' : disclosure?.fcoiTypeCode!= 1 ? 'Click to view Project Disclosure details' : 'Click to view FCOI disclosure details'">
                    <button role="button"
                        class="d-flex align-items-center btn btn-outline-secondary fs-14 height-fit-content"
                        (click)="redirectToDisclosure()" aria-describedby="Click to view Disclosure details" role="button"
                        [attr.title]="disclosure?.travelDisclosureId ? 'Click to view Travel disclosure details' : disclosure?.fcoiTypeCode!= 1 ? 
                                        'Click to view Project Disclosure details' : 'Click to view FCOI disclosure details'">
                        <mat-icon class="me-1">visibility</mat-icon> View
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Travel history card  -->
<div *ngIf="disclosure?.travelDisclosureId" class="card coi-card-regular position-relative m-06">
    <div class="card-body">
        <div class="row">
            <div class="col-lg-9 mb-3 mb-lg-0 mb-md-3 px-0">
                <div class="row">
                    <div class="col-12 d-inline-flex align-items-center mb-2">
                        <span class="d-flex" tabindex="0">
                            <span
                                class="entity-status shadow-sm d-flex align-items-center {{getColorBadges(disclosure)}}">
                                <span aria-label="Travel">Travel</span>
                            </span>
                        </span>
                        <h4 *ngIf="disclosure.travelDisclosureId"
                            class="align-items-center d-flex fs-14 mb-0 title-color" tabindex="0">
                            <span>
                                <span>Entity  </span>
                                <span [attr.aria-label]="disclosure.entityName"
                                    class="coi-text-darker fs-6 hyper-link ms-1">{{disclosure.entityName}}</span>
                            </span>
                        </h4>
                    </div>
                </div>
                <div class="row mx-0">
                    <div class="col-md-6 col-lg-3 mb-2" tabindex="0">
                        <div>
                            <label class="coi-text-dark d-block">Destination</label>
                            <span class="coi-text-light">
                                <app-no-data-label
                                    [valueToShow]="disclosure?.destinationCity || disclosure?.destinationCountry || disclosure?.travelState">
                                    <span class="coi-text-light text-slice ms-0"
                                        [attr.aria-label]="disclosure?.destinationCity + (disclosure?.destinationCountry || disclosure?.travelState)"
                                        title="{{disclosure?.destinationCity}}, {{disclosure?.destinationCountry || disclosure?.travelState}}">
                                        {{disclosure?.destinationCity}}<span
                                            *ngIf="disclosure?.destinationCity && (disclosure?.destinationCountry || disclosure?.travelState)">,</span>
                                        {{disclosure?.destinationCountry || disclosure?.travelState}}
                                    </span>
                                </app-no-data-label>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-2">
                        <div>
                            <label class="coi-text-dark d-block">Period</label>
                            <span class="coi-text-light"
                                aria-label="{{disclosure?.travelStartDate | dateFormatter}} - {{disclosure?.travelEndDate | dateFormatter}}">
                                <app-no-data-label
                                    [valueToShow]="disclosure?.travelStartDate || disclosure?.travelEndDate">
                                    <span class="coi-text-light ms-0">{{disclosure?.travelStartDate |
                                        dateFormatter}}</span>
                                    -
                                    <span class="coi-text-light">{{disclosure?.travelEndDate | dateFormatter}}</span>
                                </app-no-data-label>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-2">
                        <div>
                            <label class="coi-text-dark d-block">Expiration Date</label>
                            <span class="coi-text-light">
                                <app-no-data-label [valueToShow]="disclosure?.expirationDate">
                                    <span class="coi-text-light ms-0"
                                        aria-label="{{disclosure?.expirationDate | dateFormatter}}">{{disclosure?.expirationDate
                                        | dateFormatter}}</span>
                                </app-no-data-label>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-2">
                        <div>
                            <label class="coi-text-dark d-block me-2">Purpose</label>
                            <span class="coi-text-light">
                                <app-no-data-label [classesToApply]="'fs-14'"
                                    [valueToShow]="disclosure?.purposeOfTheTrip">
                                    <span class="d-flex coi-text-light ms-0"
                                        [attr.aria-label]="disclosure?.purposeOfTheTrip"
                                        *ngIf="!isPurposeReadMore && disclosure?.purposeOfTheTrip?.length > 55; else showFullInfo">
                                        <span> {{(disclosure?.purposeOfTheTrip |
                                            slice:0:55)}}
                                            <span (click)="isPurposeReadMore = !isPurposeReadMore" (keydown.enter)="isPurposeReadMore = !isPurposeReadMore"
                                            tabindex="0" role="link" aria-label="Click here to read more" title="Click here to Read more"
                                                class="link-primary"><span class="fw-500">...Read more</span>
                                            </span>
                                        </span>
                                    </span>
                                    <ng-template #showFullInfo>
                                        <span
                                            class="word-break-all d-flex coi-text-light ms-0">{{disclosure?.purposeOfTheTrip}}</span>
                                        <span *ngIf="disclosure?.purposeOfTheTrip?.length > 55"
                                            (click)="isPurposeReadMore = !isPurposeReadMore" (keydown.enter)="isPurposeReadMore = !isPurposeReadMore"
                                            tabindex="0" role="link" aria-label="Click here to read less" title="Click here to Read less"
                                            class="d-flex link-primary"><span
                                                class="fw-500 fs-14">Read Less</span>
                                        </span>
                                    </ng-template>
                                </app-no-data-label>
                            </span>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-lg-2 d-flex d-lg-block mb-3 mb-lg-0">
                <div class="flex-grow-1 lh-sm mb-2">
                    <label class="coi-text-lighter d-block">Disclosure Status</label>
                    <span>
                        <app-no-data-label [valueToShow]="disclosure?.conflictStatus">
                            <span class="{{commonService.getDisclosureConflictBadge(disclosure?.conflictStatusCode)}}">
                            </span>
                            <span class="coi-text-dark" [attr.aria-label]="disclosure?.conflictStatus">
                                {{disclosure?.conflictStatus}}
                            </span>
                        </app-no-data-label>
                    </span>
                </div>
                <div class="flex-grow-1 lh-sm mb-2">
                    <label class="coi-text-lighter d-block">Version Status</label>
                    <span>
                        <app-no-data-label [valueToShow]="disclosure?.versionStatus">
                            <span
                                [ngClass]="disclosure?.versionStatus === 'ACTIVE' ? 'green-badge' : 'grey-badge'"></span>
                        </app-no-data-label>
                        <span class="coi-text-dark"
                            [attr.aria-label]="disclosure?.versionStatus === 'ACTIVE' ? 'Active' : 'Archive'">
                            {{disclosure?.versionStatus === 'ACTIVE' ? 'Active' : 'Archive'}}
                        </span>
                    </span>
                </div>
            </div>
            <div class="col-lg-1 d-flex align-items-center justify-content-end">
                <div
                    [attr.aria-label]="disclosure?.travelDisclosureId ? 'Click to view Travel disclosure details' : disclosure?.fcoiTypeCode!= 1 ? 'Click to view Project Disclosure details' : 'Click to view FCOI disclosure details'">
                    <button role="button"
                        class="d-flex align-items-center btn btn-outline-secondary fs-14 height-fit-content"
                        (click)="redirectToDisclosure()" aria-describedby="Click to view Disclosure details" role="button"
                        [attr.title]="disclosure?.travelDisclosureId ? 'Click to view Travel disclosure details' : disclosure?.fcoiTypeCode!= 1 ? 
                                            'Click to view Project Disclosure details' : 'Click to view FCOI disclosure details'">
                        <mat-icon class="me-1">visibility</mat-icon> View
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- OPA history card  -->
<div *ngIf="disclosure?.opaDisclosureId" class="card coi-card-regular position-relative m-06">
    <div class="card-body">
        <div class="row">
            <div class="col-lg-9 mb-3 mb-lg-0 mb-md-3 px-0">
                <div class="row">
                    <div class="col-12 d-inline-flex align-items-center mb-2">
                        <span class="d-flex" tabindex="0">
                            <span
                                class="entity-status shadow-sm d-flex align-items-center {{getColorBadges(disclosure)}}">
                                <span aria-label="OPA">OPA</span>
                            </span>
                        </span>
                    </div>
                </div>
                <div class="row mx-0">
                    <div class="col-md-6 col-lg-3 mb-2" tabindex="0">
                        <div>
                            <label class="coi-text-dark d-block">Reporting Cycle</label>
                            <span>
                                <span class="coi-text-light"
                                [attr.aria-label]="(disclosure?.periodStartDate | dateFormatter) + 'to' + (disclosure?.periodEndDate | dateFormatter)">
                                {{disclosure?.periodStartDate | dateFormatter}} - {{disclosure?.periodEndDate | dateFormatter}}</span>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-2">
                        <div>
                            <label class="coi-text-dark d-block">Certification Date</label>
                            <span>
                                <app-no-data-label [valueToShow]="disclosure?.submissionTimestamp">
                                    <span class="coi-text-light"
                                        [attr.aria-label]="disclosure?.submissionTimestamp | dateFormatter">{{disclosure?.submissionTimestamp
                                        | dateFormatter}}</span>
                                </app-no-data-label>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-3 mb-2">
                        <div>
                            <label class="coi-text-dark d-block">Department</label>
                            <span class="coi-text-light"
                                [attr.aria.label]="disclosure?.homeUnit + ' - ' + disclosure?.homeUnitName">
                                {{commonService.getPersonLeadUnitDetails(disclosure)}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 d-flex d-lg-block mb-3 mb-lg-0">
                <div class="flex-grow-1 lh-sm mb-2">
                    <label class="coi-text-lighter d-block">Disposition Status</label>
                    <span>
                        <span
                            class="{{commonService.getDispositionStatusBadge(disclosure?.dispositionStatusCode)}} "></span>
                        <span class="coi-text-dark" [attr.aria-label]="disclosure?.dispositionStatus">
                            {{disclosure?.dispositionStatus}}
                        </span>
                    </span>
                </div>
                <div class="flex-grow-1 lh-sm mb-2">
                    <label class="coi-text-lighter d-block">Review Status</label>
                    <span>
                        <app-no-data-label [valueToShow]="disclosure?.reviewStatus">
                            <span
                                [class.text-dark]="commonService.getReviewStatusBadge(disclosure?.opaDisclosureStatusCode) === 'warning'"
                                class="{{commonService.getReviewStatusBadge(disclosure?.opaDisclosureStatusCode)}}"></span>
                            <span class="coi-text-dark" [attr.aria-label]="disclosure?.reviewStatus">
                                {{disclosure?.reviewStatus}}</span>
                        </app-no-data-label>
                    </span>
                </div>
            </div>
            <div class="col-lg-1 d-flex align-items-center justify-content-end">
                <div tabindex="0"
                    aria-label="Click to view OPA disclosure details">
                    <button role="button"
                        class="d-flex align-items-center btn btn-outline-secondary fs-14 height-fit-content"
                        (click)="redirectToDisclosure()" aria-describedby="Click to view Disclosure details" role="button"
                        [attr.title]="disclosure?.travelDisclosureId ? 'Click to view Travel disclosure details' : disclosure?.fcoiTypeCode!= 1 ? 
                            'Click to view Project Disclosure details' : 'Click to view FCOI disclosure details'">
                        <mat-icon class="me-1">visibility</mat-icon> View
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>