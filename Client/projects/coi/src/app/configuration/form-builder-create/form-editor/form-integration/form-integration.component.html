<div class="d-flex justify-content-end m-2">
  <button data-bs-toggle="modal" (click)='openIntegrationModal()' id="add-integration-btn" title="Add Integration"
    aria-label="click here to add Integration" class=" btn btn-primary fb-fs-14">Add Integrations</button>
</div>

<div *ngIf="formUsageList?.length != 0" class="coi-table-striped table-responsive">
  <table class="fs-14 table table-bordered table-striped">
    <thead class="grey-text table-head mb-0">
      <tr>
        <th scope="col">Applied to</th>
        <th scope="col">Sub Section</th>
        <th scope="col">Rule</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr id="row{{i}}" *ngFor=" let usage of formUsageList; let i = index">
        <td style="width:30%;">{{usage.moduleName}}</td>
        <td style="width:30%;">{{usage.subSectionName}}</td>
        <td style="width:30%;">Business Rule</td>
        <td style="width:10%;">
          <i title="edit" class="fa-pencil fa hand-cursor p-2" data-bs-toggle="modal"
            data-bs-target="#add-Integration-Modal" (click)="editUsage(usage,'E',i)"> </i>
          <i title="unlink" class="fa fa-trash hand-cursor" data-bs-toggle="modal"
            data-bs-target="#delete-Integration-Modal"
            (click)="deleteIndex = index; formIntegtion.formUsageId = usage.formUsageId;"> </i>
        </td>

      </tr>
    </tbody>
  </table>
  <div>
  </div>
</div>


<div class="modal fade mySkinDialog modal-lg" data-bs-backdrop="static" id="add-Integration-Modal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header ct-footer-padding">
        <h4 *ngIf="editStatus ===''" class="fb-fs-16">Add Integration</h4>
        <h4 *ngIf="editStatus ==='E'" class=" fb-fs-16">Update Integration</h4>
        <button type="button" class="btn-close fs-12 " data-bs-dismiss="modal" aria-label="Close"
          (click)="resetUsage()"></button>
      </div>
      <div class="modal-body ct-modal-padding">
        <div class="row">
          <div class="col-4">
            <label for="form-Title" class="form-label">Applied to</label>
            <select type="text" [ngClass]="(formValidation?.has('moduleCodeValidation')) ? 'is-invalid d-block' : ''"
              [(ngModel)]="formIntegtion.formModuleCode" class="form-control" (ngModelChange)="findSubModuleList()">
              <option [ngValue]=null>--Select--</option>
              <option [ngValue]="option.MODULE_CODE" *ngFor=" let option of moduleList">{{option.DESCRIPTION}}</option>
            </select>
            <div *ngIf="formValidation?.has('moduleCodeValidation')">
              <span class="mandatory text-danger fs-14 d-inline-block">*Please select a module</span>
            </div>
          </div>
          <div class="col-4">
            <label for="form-Title" class="form-label">Sub Section</label>
            <select [(ngModel)]="formIntegtion.formSubSectionCode" type="text" class="form-control">
              <option [ngValue]=null>--Select--</option>
              <option [ngValue]="option.SUB_MODULE_CODE" *ngFor=" let option of subModuleList">{{option.DESCRIPTION}}
              </option>
            </select>
          </div>
          <div class="col-4">
            <label for="form-Title" class="form-label">Rule</label>
            <select type="text" class="form-control">
              <option value="">--Select--</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer ct-footer-padding">
        <button class="btn btn-outline-secondary fs-14" id="cancel-integration-btn" title="cancel Integration"
          aria-label="click here to cancel Integration" data-bs-dismiss="modal" type="button"
          (click)="resetUsage()">Cancel
        </button>
        <button *ngIf="editStatus === ''" id="add-integration-modal-btn" title="Add Integration"
          aria-label="click here to add Integration" class="btn btn-primary fs-14 ms-2" type="button"
          (click)="saveIntegration()" data-bs-dismiss="">Add Integration</button>
        <button *ngIf="editStatus ==='E'" id="update-integration-modal-btn" title="Update Integration"
          aria-label="click here to Update Integration" class="btn btn-primary fs-14 ms-2" type="button"
          (click)="updateFormUsage()" data-bs-dismiss="">Update Integration</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade mySkinDialog modal-lg" data-bs-backdrop="static" id="delete-Integration-Modal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header ct-footer-padding">
        <h4 class="fb-fs-16">Delete Integration</h4>
        <button type="button" class="btn-close fs-14 " data-bs-dismiss="modal" aria-label="Close"
          (click)="resetUsage()"></button>
      </div>
      <div class="modal-body ct-modal-padding">
        <span class="fs-14">Are you sure you want to delete this integration? </span>
      </div>
      <div class="modal-footer ct-footer-padding">
        <button class="btn btn-outline-secondary fs-14" id="integration-sumbit-no-btn" data-bs-dismiss="modal"
          type="button" (click)="resetUsage()">Cancel
        </button>
        <button data-bs-dismiss="modal" id="delete-integration" title="delete Integration"
          class="btn btn-primary fs-14 ms-2" type="button" (click)="deleteUsage()">Delete
          Integration</button>
      </div>
    </div>
  </div>
</div>

<!-- No information Card -->


<div class="fb-no-data-container w-100" *ngIf="formUsageList?.length == 0">
  <span class="fb-no-data-icon-outer">
    <div class="fb-no-data-icon">
      <mat-icon class="fb-no-file">folder_off</mat-icon>
    </div>
  </span>
  <h5 class="fs-16 mt-3">
    <ng-content></ng-content>
    <span class="fb-default-content">There is no information in this section.</span>
  </h5>
</div>
