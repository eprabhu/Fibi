<div class="row pb-2">
  <div class="text-center col-9 pt-1">
    <ng-container *ngFor="let year of yearRange; let i = index">
      <button type="button" class="anchor-link-highlighted" [ngClass]="{'active':currentYear == year}"
        (click)="switchYear(year)">{{year}}</button>
    </ng-container>
  </div>
  <div class='legend-scale col-3'>
    <ul class='legend-labels'>
      <li *ngFor="let key of objectKeys">
        <span [ngStyle]="{'background-color':this.metaData.color[key]}"></span> {{ key }}</li>
    </ul>
  </div>
</div>
<div class="table-calendar">
  <table class="table table-bordered" id="coi-calender-view-table">
    <caption class="sr-only">Calender List</caption>
    <thead>
      <tr id="coi-calender-view-table-thead-tr">
        <ng-container *ngFor="let key of arrayList;">
          <th scope="col" (click)="sortByHeader(key);isAscending =!isAscending">{{key}}
            <i aria-hidden="true" class="fa fa-sort-alpha-asc blrcolor" [ngClass]="activeHeader == key? 'd-none' : ''"></i>
            <i aria-hidden="true" [ngClass]="isAscending && activeHeader == key? 'fa fa-sort-alpha-asc sortIcon' : 'blrcolor'"></i>
            <i aria-hidden="true" [ngClass]="!isAscending && activeHeader == key ? 'fa fa-sort-alpha-desc sortIcon' : ''"></i>
          </th>
        </ng-container>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(0)">Jan</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(1)">Feb</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(2)">Mar</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(3)">Apr</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(4)">May</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(5)">Jun</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(6)">Jul</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(7)">Aug</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(8)">Sept</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(9)">Oct</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(10)">Nov</th>
        <th class="hand-cursor" scope="col" style="width: 2%; height: 4%;" (click)="sortByMonth(11)">Dec</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of calendarList;let i = index" id="coi-calender-view-table-tbody-tr-{{i}}">
        <ng-container *ngFor="let key of arrayList;">
          <td class="hand-cursor" style="height: 4%;" (click)="emitRowDetails(data.data)">{{data[key]}}</td>
        </ng-container>
        <ng-container *ngFor="let month of data.months;let dateIndex = index;">
          <td [ngStyle]="{'background-color':month,'color': 'white'}" style="width: 4%; height: 4%;" class="p-0 text-center">
            <span *ngIf="metaData.showDate">{{data.dates[dateIndex]}}
              <span class="calendar-ordinal"
                *ngIf="data.dates[dateIndex] !== ''">{{getDateOrdinals(data.dates[dateIndex])}}</span>
            </span>
          </td>
        </ng-container>
      </tr>
    </tbody>
  </table>
</div>