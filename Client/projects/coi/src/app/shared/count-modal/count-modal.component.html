<button tabindex="-1" type="button" class="btn btn-primary btn-sm" hidden=true id="hidden-open-button" data-bs-toggle="modal"
    data-bs-target="#coiCountsViewModal" aria-hidden="true"></button>

    <div class="modal fade mySkinDialog modal-xl" id="coiCountsViewModal" tabindex="-1" role="dialog" data-bs-backdrop="static" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title fs-16" title="{{ showFullTitle() }}">{{modalHeader()}}</h4>
              <button type="button" class="btn-close" title="Click here to close" aria-label="Click here to close"  data-bs-dismiss="modal" (click)="closeCountModal()"></button>
            </div>
            <div class="modal-body" *ngIf="moduleCode === 8 && inputType === 'DISCLOSURE_TAB'">
                <div *ngIf="coiFinancialEntityDetails.length > 0" class="coi-table-striped table-responsive border">
                    <table class="table table-bordered table-striped fs-14 align-middle mb-0" id="coi-count-modal-listof-sfi-table">
                        <caption class="sr-only">List of SFIs</caption>
                        <thead class="sticky-top">
                            <tr id="coi-count-modal-table-thead-row">
                                <th>Entity Name</th>
                                <th>Country</th>
                                <th>Entity Type</th>
                                <th>Start Date of Involvement</th>
                                <th>End Date of Involvement</th>
                                <th class="text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let item of coiFinancialEntityDetails ; let i = index" id="coi-count-modal-table-tbody-row-{{i}}">
                                <td class="col-4"><span [title]="item?.coiEntity?.entityName ? item?.coiEntity?.entityName : ''"
                                    class="text-slice">{{item?.coiEntity?.entityName}}</span></td>
                                <td><app-no-data-label [valueToShow]="item?.coiEntity?.country?.countryName"></app-no-data-label></td>
                                <td><span [title]="item?.coiEntity?.entityType?.description ? item?.coiEntity?.entityType?.description : ''"
                                    class="text-slice"><app-no-data-label [valueToShow]="item?.coiEntity?.entityType?.description"></app-no-data-label></span></td>
                                <td><app-no-data-label [valueToShow]="item?.involvementStartDate"><span>{{ item?.involvementStartDate |dateFormatter }}</span></app-no-data-label></td>
                                <td><app-no-data-label [valueToShow]="item?.involvementEndDate"><span>{{ item?.involvementEndDate |dateFormatter }}</span></app-no-data-label></td>
                                <td>
                                    <div class="d-flex justify-content-center w-100">
                                        <button
                                            class="align-items-center justify-content-center btn-primary-icon d-flex fs-16 m-0 py-1 px-2 action-icons"
                                            title="Click here to view SFI details" aria-label="Click here to view SFI details" (click)="viewSliderEmit(true, item?.personEntityId)">
                                            <mat-icon aria-hidden="true">visibility</mat-icon>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngIf="!coiFinancialEntityDetails.length" class="no-data-container w-100 coi-custom-shadow">
                    <span class="no-data-icon-outer">
                        <div class="no-data-icon">
                            <mat-icon aria-hidden="true" class="no-file">folder_off</mat-icon>
                        </div>
                    </span>
                    <h5 class="fs-16 mt-3">
                        <span class="default-content">There is no information in this section.</span>
                    </h5>
                </div>
            </div>
            <div class="modal-body pt-0" *ngIf="moduleCode === 3 || moduleCode === 1">
                <nav class="d-flex fw-bold border-bottom mb-2 nav nav-underline">
                    <div class="text-secondary cursor-pointer d-flex nav-link" tabindex="0" title="Click here to view development proposals"
                         aria-label="Click here to view development proposals" role="button" [class.active]="currentModalTab == 'Proposal'"
                         (click)='currentModalTab="Proposal"; switchTableData()' (keydown.enter)="currentModalTab='Proposal';switchTableData()">
                        <span  class="px-2 fw-500">
                            {{inputType === 'SFI_TAB' ? 'Proposals related to this SFI' : 'Development Proposals'}}
                        </span>
                    </div>
                    <div class="text-secondary cursor-pointer d-flex nav-link" tabindex="0" (click)='currentModalTab = "Award"; switchTableData()'
                        (keydown.enter)="currentModalTab='Award';switchTableData()"
                         title="Click here to view awards" aria-label="Click here to view awards" role="button" [class.active]="currentModalTab == 'Award'">
                        <span class="px-2 fw-500">
                            {{inputType === 'SFI_TAB' ? 'Awards related to this SFI' :
                            'Awards'}}
                        </span>
                    </div>
                </nav>
                <div *ngIf="tableArray.length>0" class="coi-table-striped table-responsive border">
                    <table class="table table-bordered table-striped align-middle fs-14 mb-0" id="coi-count-modal-listofaward-table">
                        <caption class="sr-only">List of Awards/Proposal</caption>
                        <thead class="sticky-top">
                            <tr id="coi-count-modal-listofaward-table-thead-row">
                                <th style="width: 20%;" scope="col">Title</th>
                                <th style="width: 12%;" scope="col">Principal Investigator</th>
                                <th style="width: 12%;" scope="col">Lead Unit</th>
                                <th style="width: 15%;" scope="col">Sponsor</th>
                                <th style="width: 13%;" scope="col">Prime Sponsor</th>
                                <th style="width: 15%;" scope="col">Conflict Status</th>
                                <th style="width: 1%;" class="text-center" scope="col">Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr class="row-hover" *ngFor="let name of tableArray;let index = index" id="coi-listofaward-table-row-{{index}}">
                                <td>
                                    <div class="d-flex" title="#{{name?.moduleItemId}}: {{name?.title}}">#{{name?.moduleItemId}}: <span class="text-slice ms-1">{{name?.title}}</span></div>
                                </td>
                                <td><span [title]="name.principalInvestigator ? name.principalInvestigator : ''"
                                    class="text-slice">{{name?.principalInvestigator}}</span></td>
                                <td><span [title]="name.unitNumber ? (name?.unitNumber + ' - ' + name?.unitName) : ''"
                                    class="text-slice">{{name?.unitNumber}} - {{name?.unitName}}</span></td>
                                <td><span [title]="name.sponsor ? name.sponsor : ''"
                                    class="text-slice">{{name.sponsor}}</span></td>
                                <td><span [title]="name.primeSponsor ? name.primeSponsor : ''"
                                    class="text-slice"><app-no-data-label [valueToShow]="name.primeSponsor"></app-no-data-label></span></td>
                                <td>
                                    <app-no-data-label [valueToShow]="name.conflictStatus">
                                         <span *ngIf="name.conflictStatus">
                                            <span class="{{getDisclosureConflictBadge(name.conflictStatusCode)}}"></span>
                                            <span> {{name.conflictStatus}} </span>
                                        </span>
                                    </app-no-data-label>
                                </td>
                                <td *ngIf="currentModalTab == 'Proposal'">
                                    <div class="d-flex justify-content-center">
                                        <button class="d-flex justify-content-center align-items-center btn-primary-icon p-1 action-icons" title="Click here to view proposal details"
                                            aria-label="Click here to view proposal details" (click)="commonService.redirectToProjectDetails(name.moduleItemId, name.moduleCode)">
                                            <mat-icon aria-hidden="true">visibility</mat-icon>
                                        </button>
                                    </div>
                                </td>
                                <td *ngIf="currentModalTab == 'Award'">
                                    <div class="d-flex justify-content-center">
                                        <button class="d-flex justify-content-center align-items-center btn-primary-icon p-1 action-icons"
                                         aria-label="Click here to view award details" title="Click here to view award details"
                                            (click)="commonService.redirectToProjectDetails(name.moduleItemId, name.moduleCode);">
                                            <mat-icon aria-hidden="true">visibility</mat-icon>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngIf="!tableArray.length" class="no-data-container w-100 coi-custom-shadow">
                    <span class="no-data-icon-outer">
                        <div class="no-data-icon">
                            <mat-icon aria-hidden="true" class="no-file">folder_off</mat-icon>
                        </div>
                    </span>
                    <h5 class="fs-16 mt-3">
                        <span class="default-content">There is no information in this section.</span>
                    </h5>
                </div>
            </div>

            <div class="modal-footer">
              <button class="btn btn-outline-secondary" id="count-modal-close-btn" data-bs-dismiss="modal"
               type="button" title="Click here to close" aria-label="Click here to close" (click)="closeCountModal()">Close</button>
            </div>
          </div>
        </div>
      </div>
