<div class="mt-3 mx-4 row">
  <div class="col-9 p-0">
    <div class="border shadow-sm">
      <div class="body-heading  px-3 d-flex">
        <div class="col d-flex">
          <span class="entity-status shadow-sm align-items-center d-flex ps-2 mt-4"
            [ngClass]="entityDetails.isActive ?'':'inactive'">
            <span class="px-2">{{!entityDetails?.isActive?'Inactive':'Active'}}</span></span>
          <h1 class="fw-bold fs-18 mt-3 px-3">{{entityDetails?.entityName}}</h1>
        </div>
        <div *ngIf="isEntityManagement " class="align-items-center d-flex">
          <div class="badge-height yellow-badge">
            Unverified
          </div>
        </div>
        <div *ngIf="entityDetails?.entityRiskCategory?.description ==='High' && isEntityManagement " class="d-flex">
          <div class="align-items-center d-flex ml-15">
            <label class="fw-500 fs-14">Risk Level :</label>
            <div class="text-color fs-14 d-flex">
              <mat-icon *ngIf="entityDetails?.entityRiskCategory?.description ==='High'"
                class="invalid material-icons-round">warning</mat-icon>
              <span *ngIf="entityDetails?.entityRiskCategory" class="mt-1">
                {{entityDetails?.entityRiskCategory?.description}}
              </span>
            </div>
          </div>
        </div>
        <div *ngIf="!isEntityManagement " class="align-items-center d-flex">
          <div class="badge-height yellow-badge">
            Relationship Status:Draft
          </div>
        </div>
        <div *ngIf="!isEntityManagement" class="ml-15 align-items-center d-flex">
          <button tabindex="0" class="btn btn-outline-grey fs-14 justify-content-center d-flex">
            <mat-icon class="justify-content-center align-items-center align-items-center d-flex fs-18">
              mode
            </mat-icon>
            Modify Entity</button>
        </div>
      </div>
      <div class="d-flex bg-white p-3">
        <!-- <div class="{{isEntityManagement ?'col-3':'col'}}"> -->
          <div class="col mr-10">
          <div class="border triple-card rounded-1 position-relative">
            <div class="ps-4 table-negative-margin">
              <table class="fs-14 fw-medium spaced-table">
                <tr>
                  <!-- <td class="fw-500 fs-14 {{!isEntityManagement ?'col-3':''}}">Entity Type :</td> -->
                  <td class="fw-500 fs-14 col-3">Entity Type :</td>
                  <td class="text-color fs-14">
                    <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.entityType?.description">
                      <span class="px-3 py-1 rounded-5">{{entityDetails?.entityType?.description}}</span>
                    </app-no-data-label>
                  </td>
                </tr>
                <tr>
                  <!-- <td class="fw-500 fs-14 {{!isEntityManagement ?'col-3':''}}">Country :</td> -->
                  <td class="fw-500 fs-14 col-3">Country :</td>
                  <td class="text-color fs-14">
                    <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.country?.countryName">
                      <span class=" px-3 py-1 rounded-5">{{entityDetails?.country?.countryName}}</span>
                    </app-no-data-label>
                  </td>
                </tr>
                <tr>
                  <!-- <td class="fw-500 fs-14 {{!isEntityManagement ?'col-3':''}}">City :</td> -->
                  <td class="fw-500 fs-14 col-3">City :</td>
                  <td class="text-color fs-14">
                    <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.city">
                      <span class=" px-3 py-1 rounded-5 ">{{entityDetails?.city}}</span>
                    </app-no-data-label>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
        <!-- <div class="{{isEntityManagement ?'col-4':'col'}}"> -->
          <div class="col">
          <div class="border triple-card rounded-1 position-relative">
            <div class="ps-4 table-negative-margin">
              <table class="fs-14 fw-medium spaced-table">
                <tr>
                  <!-- <td class="fw-500 fs-14 {{!isEntityManagement ?'col-3':''}}">Website :</td> -->
                  <td class="fw-500 fs-14 col-3">Website :</td>
                  <td class="text-color fs-14">
                    <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.webURL">
                      <span class="px-3 py-1 rounded-5">
                        <a class="anchor-link" (click)="redirectUrl(entityDetails?.webURL)">
                          {{entityDetails?.webURL}}
                        </a></span>
                    </app-no-data-label>

                  </td>
                </tr>
                <tr>
                  <!-- <td class="fw-500 fs-14 {{!isEntityManagement ?'col-3':''}}">Email Address :</td> -->
                  <td class="fw-500 fs-14 col-3">Email :</td>
                  <td class="text-color fs-14">
                    <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.emailAddress">
                      <span class=" px-3 py-1 rounded-5">{{entityDetails?.emailAddress}}</span>
                    </app-no-data-label>
                  </td>
                </tr>
                <tr>
                  <!-- <td class="fw-500 fs-14 {{!isEntityManagement ?'col-3':''}}">Phone Number :</td> -->
                  <td class="fw-500 fs-14 col-3">Phone :</td>
                  <td class="text-color fs-14">
                    <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.phone">
                      <span class=" px-3 py-1 rounded-5 ">{{entityDetails?.phone}}</span>
                    </app-no-data-label>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>

        <!-- <div *ngIf="isEntityManagement " class="col-5">
          <div class="border triple-card rounded-1 position-relative">
            <span class="status-pill">Date</span>
            <div class="ps-4 table-negative-margin">
              <table class="fs-14 fw-medium spaced-table">
                <tr>
                  <td class="fw-500 fs-14 ">Verified By :</td>
                  <td class="text-color fs-14">
                    <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.approvedUser">
                      <span class=" px-3 py-1 rounded-5">
                        <mat-icon class="mat-done">done</mat-icon>
                        <span class="px-3 py-1 rounded-5">
                          {{entityDetails?.approvedUser}} On
                          {{entityDetails?.approvedTimestamp|dateFormatterWithTimeZone:'long'}}</span></span>
                    </app-no-data-label>
                  </td>
                </tr>
                <tr>
                  <td class="fw-500 fs-14 ">Created By :</td>
                  <td class="text-color fs-14">
                    <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.createUserFullName">
                      <span class="px-3 py-1 rounded-5">
                        {{entityDetails?.createUserFullName}} On
                        {{entityDetails?.createTimestamp|dateFormatterWithTimeZone:'long'}}</span>
                    </app-no-data-label>

                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div> -->
      </div>
      <div class="footer-body px-3 d-flex">
        <div class="align-self-center flex-fill" [ngClass]="{'mb-10':!isEntityManagement}">
          <label class="fw-500 fs-14 mx-3">Address :</label>
          <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.address">
                      <span class="text-color fs-14 mt-1 pr-15">
                        {{entityDetails?.address}}</span>
          </app-no-data-label>
        </div>
      </div>
    </div>
  </div>
  <div class="col-3 px-0">
    <div class="d-flex flex-column p-0">
      <div class="flex-fill side-height border-end bg-color shadow-sm">
        <div class="{{isModifyEntity?'d-flex justify-content-around':''}} mt-3 mx-3">
          <button class="btn btn-outline-grey pb-0 {{isModifyEntity?'col-2':'col-12'}}" title="Go to home page">
            <mat-icon class="mb-2">home</mat-icon>
          </button>
          <button *ngIf="isEntityManagement && isModifyEntity" (click)="sfiService.isShowSfiNavBar = true" id="btn-modify"
            class="fs-14 btn btn-outline-grey d-flex justify-content-center w-100 align-items-center mx-3"
            title="Modify Entity">
            <mat-icon class="mb-2 mx-1 pencil">mode</mat-icon>
            <span class="btn-entity-position">Modify Entity</span>
          </button>
          <button *ngIf="!isEntityManagement" id="btn-sfi-modify"
            class="fs-14 btn btn-outline-grey d-flex justify-content-center w-100 align-items-center mx-3"
            title="Modify Sfi">
            <mat-icon class="mb-2 pencil-sfi">mode</mat-icon>
            <span class="btn-sfi-position">Modify SFI</span>
          </button>
          <button class="btn btn-outline-grey pb-0 fs-14 {{isModifyEntity?'col-2':'col-12'}}" (click)="navigateBack()" title="Back">
            <i class="fa fa-reply justify-content-center align-items-center fs-14"></i>
          </button>
        </div>
        <div class="d-flex justify-content-around mt-3 mx-3">
          <button *ngIf="isModifyEntity" id="btn-inactivate"
            class="fs-14 btn btn-outline-grey d-flex justify-content-center w-100 align-items-center"
            title="Entity Inactivate">
            <mat-icon class="mx-1 mb-2 icon-schedule-position">schedule</mat-icon>
            <span class="btn-inactivate-content">
              Inactivate
            </span>
          </button>
        </div>
        <div *ngIf="isEntityManagement && isModifyEntity" class="d-flex justify-content-around mt-3 mx-3">
          <button id="btn-approve-entity"
            class="fs-14 btn btn-outline-grey d-flex justify-content-center w-100 align-items-center"
            title="Approve Entity">
            <mat-icon class="mx-1 mb-2 icon-approve-position">check_circle_outline</mat-icon>
            <span class="btn-approve-position">Approve Entity</span>
          </button>
        </div>
        <div *ngIf="isEntityManagement && isModifyEntity " class="d-flex justify-content-around mt-3 mx-3">
          <button id="btn-merge-entity"
            class="fs-14 btn btn-outline-grey test d-flex justify-content-center w-100 align-items-center"
            title="Merge Entity">
            <img [src]="imgURl" class="mx-1 svg-icon ">
            <span class="btn-content-position">Merge Entity</span>
          </button>
        </div>
        <div *ngIf="!isEntityManagement " class="d-flex justify-content-around mt-3 mx-3">
          <button id="btn-add-relationship" (click)="addNewRelationship()"
            class="fs-14 btn btn-outline-grey d-flex justify-content-center w-100 align-items-center"
            title="Add Relationship">
          <mat-icon class="me-2 mb-2 icon-add">add</mat-icon>
           <span class="btn-add-content">Add Relationship</span>
          </button>
        </div>
        <div *ngIf="!isEntityManagement " class="d-flex justify-content-around mt-3 mx-3">
          <button id="btn-save-relationship" (click)="saveRelationship()"
            class="fs-14 btn btn-outline-grey d-flex justify-content-center w-100 align-items-center"
            title="Save Relationship">
            <mat-icon class="me-2 mb-2 icon-save">save</mat-icon>
            <span class="btn-save-content">Save Relationship</span>
          </button>
        </div>
        <div class="my-2 mx-3 fs-14 ash-text wrapping-text">
          <div><span class="fw-medium me-1">Last Updated By :</span></div>
          <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="entityDetails?.updatedUserFullName">
            <div>
              {{entityDetails?.updatedUserFullName}} On
            {{(entityDetails?.updateTimestamp|dateFormatterWithTimeZone:'long')}}
            </div>
          </app-no-data-label>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="sfiService.isShowSfiNavBar && isEntityManagement " id="task-navigation-bar">
    <app-add-sfi [coiEntityManageId]="entityId" [isEditEntity]="true"
      (updatedDataStore)="updatedEntityDetails($event)"></app-add-sfi>
  </div>
</div>

