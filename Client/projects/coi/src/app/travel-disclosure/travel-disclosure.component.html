<div class="row header-sticky mb-2">
    <div class="col-12">
        <!-- new top card -->
        <div class="card coi-card-expanded">
            <div class="row mx-0">
                <div class="col-lg px-0">
                    <div class="card-header px-3">
                        <div class="row flex-grow-1 position-relative m-0">
                            <div class="d-flex col-12 px-0 coi-card-header-notch-container">
                                <!-- badge -->
                                <div class="d-flex mb-auto" tabindex="-1" aria-label="Travel disclosure">
                                    <span class="coi-card-notch-ribbon shadow-sm bg-travel-clip">Travel</span>
                                </div>
                                <div class="col row m-0">
                                    <div class="col-12 d-flex justify-content-between p-0">
                                        <!-- person -->
                                        <span class="d-flex align-items-center coi-text-light ms-2 mt-1 text-nowrap">
                                            <mat-icon aria-hidden="true"
                                                class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">person</mat-icon>
                                            <a class="link-primary cursor-pointer"
                                                (click)="commonService.openPersonDetailsModal(userDetails.personId)" tabindex="0"
                                                (keydown.enter)="commonService.openPersonDetailsModal(userDetails.personId)"
                                                (keydown.space)="commonService.openPersonDetailsModal(userDetails.personId)"
                                                [attr.aria-label]="'Click here to show the details of' + userDetails.fullName"
                                                title="Click here to show the details of {{userDetails.fullName}}">
                                                {{userDetails.fullName}}
                                            </a>
                                        </span>

                                        <!-- links -->
                                        <div *ngIf="travelDisclosure?.travelDisclosureId" class="d-flex justify-content-end align-items-center f-14 ms-auto mt-auto me-3">
                                            <!-- <span class="ms-2 me-2"  role="link"
                                                [title]="0 ? 'Click here to view trainings' : ''"
                                                [attr.aria-label]="0 ? 'Click here to view trainings' : ''"
                                                [ngClass]="0 ? 'link-primary cursor-pointer' : ''" tabindex="-1">
                                                Trainings({{0}})
                                            </span> | -->                                           
                                            <a class="ms-2 me-2 fs-13" (click)="openPersonSlider('ENTITY', travelDisclosure?.personEntitiesCount)"
                                                role="link" (keyup.enter)="openPersonSlider('ENTITY', travelDisclosure?.personEntitiesCount)"
                                                (keyup.space)="openPersonSlider('ENTITY', travelDisclosure?.personEntitiesCount)"
                                                [title]="travelDisclosure?.personEntitiesCount ? 'Click here to view entities' : ''"
                                                [attr.aria-label]="travelDisclosure?.personEntitiesCount ? 'Click here to view entities' : ''"
                                                [ngClass]="travelDisclosure?.personEntitiesCount ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                [tabIndex]="travelDisclosure?.personEntitiesCount > 0 ? 0 : -1">
                                                Entities({{travelDisclosure?.personEntitiesCount ?? 0 }})
                                            </a> |
                                            <a class="ms-2 me-2 fs-13" (click)="openPersonSlider('NOTES', travelDisclosure?.personNotesCount)" role="link"
                                                (keyup.enter)="openPersonSlider('NOTES', travelDisclosure?.personNotesCount)"
                                                (keyup.space)="openPersonSlider('NOTES', travelDisclosure?.personNotesCount)"
                                                [title]="travelDisclosure?.personNotesCount ? 'Click here to view notes' : ''"
                                                [attr.aria-label]="travelDisclosure?.personNotesCount ? 'Click here to view notes' : ''"
                                                [ngClass]="travelDisclosure?.personNotesCount ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                [tabIndex]="travelDisclosure?.personNotesCount > 0 ? 0 : -1" >
                                                Notes({{travelDisclosure?.personNotesCount ?? 0 }})
                                            </a> |
                                            <a class="ms-2 fs-13"
                                                (click)="openPersonSlider('ATTACHMENTS', travelDisclosure?.personAttachmentsCount)" role="link"
                                                (keyup.enter)="openPersonSlider('ATTACHMENTS', travelDisclosure?.personAttachmentsCount)"
                                                (keyup.space)="openPersonSlider('ATTACHMENTS', travelDisclosure?.personAttachmentsCount)"
                                                [title]="travelDisclosure?.personAttachmentsCount ? 'Click here to view attachments' : ''"
                                                [attr.aria-label]="travelDisclosure?.personAttachmentsCount ? 'Click here to view attachments' : ''"
                                                [ngClass]="travelDisclosure?.personAttachmentsCount ? 'link-primary cursor-pointer' : 'coi-text-light text-decoration-none'"
                                                [tabIndex]="travelDisclosure?.personAttachmentsCount > 0 ? 0 : -1">
                                                Attachments({{travelDisclosure?.personAttachmentsCount ?? 0 }})
                                            </a>
 
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 d-flex p-0 align-items-center column-gap-3">
                                <!-- email -->
                                <span *ngIf="userDetails?.emailAddress" class="d-flex align-items-center coi-text-light mt-1"
                                    [title]="userDetails?.emailAddress">
                                    <mat-icon aria-hidden="true"
                                        class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">mail</mat-icon>
                                    <span class="text-slice">{{userDetails?.emailAddress}}</span>
                                </span>
                                <!-- home unit -->
                                <span class="d-flex align-items-center coi-text-light mt-1"
                                    [title]="commonService.getPersonLeadUnitDetails(userDetails)">
                                    <mat-icon aria-hidden="true"
                                        class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">home</mat-icon>
                                    <span class="text-slice">{{commonService.getPersonLeadUnitDetails(userDetails)}}</span>
                                </span>
                                <!-- title -->
                                <span *ngIf="userDetails?.primaryTitle"
                                    class="d-flex align-items-center coi-text-light mt-1"
                                    [title]="userDetails?.primaryTitle">
                                    <mat-icon aria-hidden="true"
                                        class="fw-bolder coi-text-light flex-shrink-0 coi-mat-icon-size me-1">work</mat-icon>
                                    <span class="text-slice">{{userDetails?.primaryTitle}}</span>
                                </span>
                            </div>
                            <h3 *ngIf="service?.travelEntityDetails?.entityName" class="card-title fs-16 mb-0 mt-1 ps-0">
                                <div class="fs-16 d-flex align-items-center">
                                    <mat-icon aria-hidden="true" class="coi-text-light flex-shrink-0 me-1 coi-ms-n2px">apartment</mat-icon>
                                    <span class="coi-text-darker fs-6 text-slice"
                                        [title]="service?.travelEntityDetails?.entityName">{{ service?.travelEntityDetails?.entityName }}</span>
                                </div>
                            </h3>
                            <button (click)="isCardExpanded=!isCardExpanded;"
                                title="Click here to collapse / expand" aria-label="Click here to collapse / expand"
                                class="toggle-btn align-items-center border btn d-flex justify-content-center p-0 rounded-5 shadow-sm toggle-btn-position">
                                <mat-icon aria-hidden="true" [ngClass]="isCardExpanded ? 'rotate-180' : 'rotate-0'">expand_more</mat-icon>
                            </button>
                        </div>
                    </div>
                    <div *ngIf="isCardExpanded" [@heightAnimation]>
                        <div class="row p-3">
                            <div class="col-6 col-lg-5 col-xl-3 col-xxl-4">
                                <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                    <span class="coi-text-darker fs-6 coi-field-set">Details</span>
                                    <div class="row">
                                        <div class="col-12 col-md-6 col-lg-6 col-xl-12 col-xxl-12 mt-2 pe-0">
                                            <label for="travel-administrator" class="coi-text-dark d-block">
                                                <i aria-hidden="true" class="fa fa-user-o fw-700 me-1"></i>
                                                <span>Administrator</span>
                                            </label>
                                            <span id="travel-administrator"  class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.adminPersonName">
                                                    <span class="coi-text-light text-slice" [title]="ravelDisclosure?.adminPersonName">{{travelDisclosure?.adminPersonName}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col-12 col-md-6 col-lg-6 col-xl-12 col-xxl-12 mt-2 pe-0">
                                            <label for="travel-admin-group"  class="coi-text-dark d-block">
                                                <img alt="add-adminGroup icon" class="w-1rem me-1" src="{{deployMap}}assets/images/multiple-admin-1.svg">
                                                <span>Admin Group</span>
                                            </label>
                                            <span id="travel-admin-group" class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.adminGroupName">
                                                    <span class="coi-text-light text-slice" [title]="ravelDisclosure?.adminGroupName">{{travelDisclosure?.adminGroupName}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
    
                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-7 col-xl-4 col-xxl-4">
                                <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                    <span class="coi-text-darker fs-6 coi-field-set">Dates</span>
                                    <div class="row">
                                        <div class="col-6 col-md-4 col-lg-4 col-xl-6 col-xxl-6 mt-2 pe-0">
                                            <label for="travel-administrator" class="coi-text-dark d-block">Create</label>
                                            <span id="travel-administrator" class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.createTimestamp">
                                                    <span class="coi-text-light">{{travelDisclosure?.createTimestamp | dateFormatterWithTimeZone}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col-6 col-md-4 col-lg-4 col-xl-6 col-xxl-6 mt-2 pe-0">
                                            <label for="travel-administrator" class="coi-text-dark d-block">Certification</label>
                                            <span id="travel-administrator" class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.certifiedAt">
                                                    <span class="coi-text-light">{{travelDisclosure?.certifiedAt | dateFormatterWithTimeZone}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col-6 col-md-4 col-lg-4 col-xl-6 col-xxl-6 mt-2 pe-0">
                                            <label for="travel-approved" class="coi-text-dark d-block">Approved</label>
                                            <span id="travel-approved" class="coi-text-light">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.acknowledgeAt">
                                                    <span class="coi-text-light">{{travelDisclosure?.acknowledgeAt | dateFormatterWithTimeZone}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col col-lg-12 col-xl-5 col-xxl-4 mt-4 mt-xl-0">
                                <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                    <span class="coi-text-darker fs-6 coi-field-set">Status</span>
                                    <div class="row">
                                        <div class="col-3 col-md-3 col-lg-3 col-xl-6 col-xxl-6 mt-2 pe-0">
                                            <label for="travelDisclosure-documentStatus" class="coi-text-lighter d-block">Document</label>
                                            <span id="travelDisclosure-documentStatus">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.documentStatus">
                                                    <span class="{{commonService.getDocumentStatusBadge(travelDisclosure?.documentStatusCode)}}"></span>
                                                    <span class="coi-text-dark ms-1">{{travelDisclosure?.documentStatus}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col-3 col-md-3 col-lg-3 col-xl-6 col-xxl-6 mt-2 pe-0">
                                            <label for="travelDisclosure-reviewStatus" class="coi-text-lighter d-block">Review</label>
                                            <span id="travelDisclosure-reviewStatus">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.reviewStatus">
                                                    <span class="{{commonService.getTravelReviewStatusBadge(travelDisclosure?.reviewStatusCode)}}"></span>
                                                    <span class="coi-text-dark ms-1">{{travelDisclosure?.reviewStatus}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col-3 col-md-3 col-lg-3 col-xl-6 col-xxl-6 mt-2 pe-0">
                                            <label for="travelDisclosure-disclosureStatus" class="coi-text-lighter d-block">Disclosure</label>
                                            <span id="travelDisclosure-disclosureStatus">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.disclosureStatus">
                                                    <span class="{{commonService.getDisclosureConflictBadge(travelDisclosure?.disclosureStatusCode)}}"></span>
                                                    <span class="coi-text-dark ms-1">{{travelDisclosure?.disclosureStatus}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col-3 col-md-3 col-lg-3 col-xl-6 col-xxl-6 mt-2 pe-0">
                                            <label for="travelDisclosure-risk" class="coi-text-lighter d-block">Risk</label>
                                            <span id="travelDisclosure-risk">
                                                <app-no-data-label [valueToShow]="travelDisclosure?.riskLevel">
                                                    <span class="d-flex">
                                                        <mat-icon class="{{commonService.getRiskColor(travelDisclosure?.riskCategoryCode)}} material-icons-round me-1 flex-shrink-0"
                                                            aria-hidden="true">warning</mat-icon>
                                                        <span class="coi-text-dark">{{travelDisclosure?.riskLevel}}</span>
                                                    </span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="!(isRouteComplete(['history']) && isCreateMode)" class="d-flex flex-column col-lg-3 p-3 action-header-border">
                    <div class="row m-0 gap-2 align-items-center">
                        <!-- Comments -->
                        <button *ngIf="!isCreateMode"
                            title="Click here to add new review comments" aria-label="Click here to add new review comments"
                            class="d-flex align-items-center justify-content-center btn btn-outline-grey fs-14 col transition-300ms">
                            <mat-icon aria-hidden="true" class="flex-shrink-0">rate_review</mat-icon>
                            <span *ngIf="isCardExpanded" class="ms-2">Comments</span>
                        </button>

                        <!-- more option button for expanded card-->
                        <button *ngIf="!isCreateMode && isCardExpanded" mat-button [matMenuTriggerFor]="beforeMenu"
                            class="text-nowrap d-flex align-items-center justify-content-center btn btn-outline-grey fs-14 col transition-300ms"
                            title="Click here for more actions" aria-label="Click here for more actions" aria-expanded="false" aria-haspopup= "true">
                            <mat-icon class="moreActionIcon flex-shrink-0" aria-hidden="true">more_vert</mat-icon>
                        </button>

                        <!-- more options -->
                        <mat-menu #beforeMenu="matMenu" xPosition="before">
                            <!-- MANAGE_TRAVEL_DISCLOSURE rights person actions -->
                            <ng-container *ngIf="isTravelAdministrator">
                                <!-- reassigned admin -->
                                <button mat-menu-item *ngIf="travelDisclosure?.adminPersonId && checkReviewStatusCode([TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS]) && isTravelAdministrator"
                                    aria-label="Click here to reassign administrator/admin group"
                                    title="Click here to reassign administrator/admin group"
                                    class="text-nowrap border-0 rounded-0 d-flex justify-content-start w-100 align-items-center more-action"
                                    (click)="openAddAssignModal()">
                                    <mat-icon aria-hidden="true" class="flex-shrink-0">group_add</mat-icon>
                                    <span class="ms-2 fw-medium fs-14">Reassign Admin</span>
                                </button>
                            </ng-container>
                            <ng-container *ngIf="checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS, TRAVEL_REVIEW_STATUS.APPROVED_ACKNOWLEDGED], 'SOME') && checkAdministratorRight()">
                                <!-- manage /view disclosure status -->
                                <button mat-menu-item (click)="openConflictSlider()"
                                    [attr.aria-label]="'Click here to ' + (checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME') ? 'manage' : 'view') + ' disclosure status'"
                                    title="Click here to {{checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME') ? 'manage' : 'view'}} disclosure status"
                                    class="text-nowrap border-0 rounded-0 d-flex justify-content-start w-100 align-items-center more-action">
                                    <mat-icon aria-hidden="true" class="flex-shrink-0">{{checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME') ? 'mode' : 'visibility'}}</mat-icon>
                                    <span class="ms-2 fw-medium fs-14">{{checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME') ? 'Manage' : 'View'}} Disclosure
                                        Status</span>
                                </button>

                                <!-- manage /view travel risk status -->
                                <button mat-menu-item (click)="openRiskSlider()"
                                    [attr.aria-label]="'Click here to ' + (checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME') ? 'modify' : 'view') + ' risk'"
                                    title="Click here to {{checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME') ? 'modify' : 'view'}} risk"
                                    class="text-nowrap border-0 rounded-0 d-flex justify-content-start w-100 align-items-center more-action">
                                    <mat-icon class="material-icons-round flex-shrink-0" aria-hidden="true">{{checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME') ? 'warning' :
                                        'visibility'}}</mat-icon>
                                    <span class="ms-2 fw-medium fs-14">{{checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME') ? 'Modify' : 'View'}} Risk</span>
                                </button>
                            </ng-container>

                            <!-- Withdraw disclosure -->
                            <button mat-menu-item title="Click here to withdraw travel disclosure" aria-label="Click here to withdraw travel disclosure"
                                (click)="openConfirmationModal('Withdraw', true, true, withdrawErrorMsg);"
                                class="text-nowrap border-0 rounded-0 d-flex justify-content-start w-100 align-items-center more-action"
                                *ngIf="checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED]) && userDetails.personId == currentPersonId">
                                <mat-icon aria-hidden="true" class="flex-shrink-0">logout</mat-icon>
                                <span class="ms-2 fw-medium fs-14">Withdraw</span>
                            </button>

                            <!-- notify -->
                            <button mat-menu-item title="Click here to notify" aria-label="Click here to notify"
                                class="text-nowrap border-0 rounded-0 d-flex justify-content-start w-100 align-items-center more-action">
                                <mat-icon aria-hidden="true" class="flex-shrink-0">notifications</mat-icon>
                                <span class="ms-2 fw-medium fs-14">Notify</span>
                            </button>
                        </mat-menu>

                        <ng-container *ngIf="!isCreateMode">
                            <!-- assign admin -->
                            <ng-container *ngIf="!travelDisclosure?.adminPersonId && checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED]) && isTravelAdministrator">
                                <button title="Click here to assign administrator/admin group"
                                    aria-label="Click here to assign administrator/admin group"
                                    [ngClass]="isCardExpanded? 'col-lg-12 col' : 'col'"
                                    class="btn btn-primary fs-14 d-flex justify-content-center align-items-center transition-300ms"
                                    (click)="openAddAssignModal()">
                                    <mat-icon aria-hidden="true" class="flex-shrink-0">group_add</mat-icon>
                                    <span *ngIf="isCardExpanded" class="ms-2">Assign Admin</span>
                                </button>
                            </ng-container>


                            <!-- return to pi -->
                            <button *ngIf="showReturnOrApproveButton()"
                                title="Click here to return travel disclosure" aria-label="Click here to return travel disclosure"
                                (click)="openConfirmationModal('Return', true, true, returnErrorMsg);"
                                [ngClass]="isCardExpanded? 'col-lg-12 col' : 'col'"
                                class="btn btn-outline-grey fs-14 d-flex justify-content-center align-items-center transition-300ms">
                                <mat-icon class="returnIcon flex-shrink-0" aria-hidden="true">refresh</mat-icon>
                                <span *ngIf="isCardExpanded" class="ms-1">Return</span>
                            </button>

                            <!-- approve disclosure -->
                            <button *ngIf="(isTravelAdministrator && checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED])) || (showReturnOrApproveButton())"
                                title="Click here to approve travel disclosure"
                                aria-label="Click here to approve travel disclosure"
                                (click)="openConfirmationModal('Approve', true);"
                                [ngClass]="isCardExpanded? 'col-lg-12 col' : 'col'"
                                class="btn btn-primary fs-14 d-flex justify-content-center align-items-center transition-300ms">
                                <mat-icon aria-hidden="true" class="flex-shrink-0">check_circle_outline</mat-icon>
                                <span *ngIf="isCardExpanded" class="ms-2">Approve</span>
                            </button>
                        </ng-container>

                        <ng-container *ngIf="isCreateMode">
                            <!-- save -->
                            <button *ngIf="isRouteComplete(['screening', 'travel-details'])"
                                aria-label="Click here to save travel disclosure"
                                class="col-12 fs-14 btn btn-primary d-flex justify-content-center align-items-center transition-300ms"
                                (click)="saveTravelDisclosure()" title="Click here to save travel disclosure">
                                <mat-icon class="flex-shrink-0" aria-hidden="true">save</mat-icon>
                                <span class="ms-2">Save</span>
                            </button>

                            <!-- submit -->
                            <button *ngIf="isRouteComplete(['certification'])"
                                class="col-12 fs-14 btn btn-primary d-flex justify-content-center align-items-center transition-300ms"
                                aria-label="Click here to submit travel disclosure"
                                (click)="openConfirmationModal('Submit', false);"
                                [disabled]="!service.isTravelCertified" title="Click here to submit travel disclosure">
                                <mat-icon class="flex-shrink-0" aria-hidden="true">done</mat-icon>
                                <span class="ms-2">Submit</span>
                            </button>
                        </ng-container>

                        <!-- more option for collapse card-->
                        <button mat-button [matMenuTriggerFor]="beforeMenu" *ngIf="!isCreateMode && !isCardExpanded"
                            class="text-nowrap d-flex align-items-center justify-content-center btn btn-outline-grey fs-14 col transition-300ms"
                            title="Click here for more actions" aria-label="Click here for more actions" aria-expanded="false" aria-haspopup= "true">
                            <mat-icon aria-hidden="true" class="flex-shrink-0">more_vert</mat-icon>
                        </button>

                    </div>
                    <!-- last update date -->
                    <div class="fs-14 coi-text-light mt-2" *ngIf="!isCreateMode && isCardExpanded" tabindex="-1">
                        <div class="fw-medium me-3">Last Updated By :</div>
                        <div>{{userDetails.fullName}} On {{travelDisclosure?.updateTimestamp | dateFormatterWithTimeZone:'long'}}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- create mode -->
    <ng-container *ngIf="isCreateMode">
        <div class="col-12 mt-2">
            <div class="steps-outer px-3">
                <ul class="steps py-2 mb-0 ps-0 gap-2 pe-3 flex-grow-1" [class.border-end]="travelDisclosure?.reviewStatusCode != 1 && travelDisclosure?.reviewStatusCode != null">
                    <!-- Travel Details -->
                    <li>
                        <a class="step-pills" id="step_1"
                            [class.active-step]="isRouteComplete(['travel-details', 'certification'])"
                            tabindex="0" (click)="navigateTo('TRAVEL_DETAILS');" (keyup.enter)="navigateTo('TRAVEL_DETAILS');" (keyup.space)="navigateTo('TRAVEL_DETAILS');"
                            [title]="isRouteComplete(['travel-details'])? 'Travel details' : 'Click here to go to step travel details'"
                            [attr.aria-label]="isRouteComplete(['travel-details'])? 'Travel Details' : 'Click here to go to step travel details'">
                            <span class="plls-icon me-1"><mat-icon aria-hidden="true" class="mat-step-icon flex-shrink-0">flight</mat-icon></span>
                            <span class="plls-text">Travel Details</span>
                        </a>
                    </li>
                    <!-- divider -->
                    <li>
                        <span class="arrow-right px-2" [class.active-arrow]="isRouteComplete(['certification'])">
                            <i class="fa fa-angle-right" aria-hidden="true"></i>
                            <i class="fa fa-angle-right" aria-hidden="true"></i>
                        </span>
                    </li>
                    <!-- Certification -->
                    <li>
                        <a class="step-pills" [class.active-step]="isRouteComplete(['certification'])" tabindex="0"
                            [title]="isRouteComplete(['certification'])? 'Certification' : 'Click here to go to step certification'"
                            [attr.aria-label]="isRouteComplete(['certification'])? 'Certification' : 'Click here to go to step certification'"
                            id="step_2" (click)="navigateTo('CERTIFY');" (keyup.enter)="navigateTo('CERTIFY');"
                            (keyup.space)="navigateTo('CERTIFY');">
                            <span class="plls-icon me-1"><mat-icon aria-hidden="true" class="mat-step-icon flex-shrink-0">military_tech</mat-icon></span>
                            <span class="plls-text">Certification</span>
                        </a>
                    </li>
                </ul>
                <span *ngIf="travelDisclosure.travelDisclosureId" class="d-inline-block ms-auto ps-3">
                    <button type="button" class="btn btn-outline-grey rounded-5 d-flex align-items-center" id="travel-disclosure-history"
                        [class.btn-outline-grey-active]="isRouteComplete(['history'])" (click)="navigateTo('HISTORY_CREATE');"
                        (keyup.space)="navigateTo('HISTORY_CREATE');" (keyup.enter)="navigateTo('HISTORY_CREATE');">
                        <mat-icon aria-hidden="true" class="mat-step-icon mr-2 flex-shrink-0">update</mat-icon>
                        <span class="btn-outline-grey-custom-text">History</span>
                    </button>
                </span>
            </div>
        </div>
    </ng-container>
    <!-- view mode -->
    <ng-container *ngIf="!isCreateMode">
        <div class="col-lg-12">
            <div class="navigation-tabs d-flex align-items-center" tabindex="-1"  role="navigation" aria-label="travel disclosure">
                    <!-- Disclosure -->
                <button (click)="navigateTo('SUMMARY');" (keyup.space)="navigateTo('SUMMARY');" (keyup.enter)="navigateTo('SUMMARY');"
                    class="border-0 btn navigation-box border-end"
                    [title]="isRouteComplete(['summary']) ? 'Disclosure' : 'Go to step Disclosure'"
                    [attr.aria-label]="isRouteComplete(['summary']) ? 'Disclosure' : 'Go to step Disclosure'" role="link">
                    <div class="navigation-box-content" [class.active]="isRouteComplete(['summary'])">
                        Disclosure
                    </div>
                </button>
                    <!-- Related Disclosures -->
                <button (click)="navigateTo('RELATED_DISCLOSURES');" (keyup.space)="navigateTo('RELATED_DISCLOSURES');"
                    (keyup.enter)="navigateTo('RELATED_DISCLOSURES');"
                    class="border-0 btn navigation-box border-end"
                    [title]="isRouteComplete(['related-disclosures']) ? 'Related Disclosures' : 'Go to step Related Disclosures'"
                    [attr.aria-label]="isRouteComplete(['related-disclosures']) ? 'Related Disclosures' : 'Go to step Related Disclosures'" role="link">
                    <div class="navigation-box-content" [class.active]="isRouteComplete(['related-disclosures'])">
                        Related Disclosures
                    </div>
                </button>
                    <!-- History -->
                <button (click)="navigateTo('HISTORY_VIEW');" (keyup.space)="navigateTo('HISTORY_VIEW');" (keyup.enter)="navigateTo('HISTORY_VIEW');"
                    class="border-0 btn navigation-box border-end"
                    [title]="isRouteComplete(['history']) ? 'History' : 'Go to step History'"
                    [attr.aria-label]="isRouteComplete(['history']) ? 'History' : 'Go to step History'" role="link">
                    <div class="navigation-box-content" [class.active]="isRouteComplete(['history'])">
                        History
                    </div>
                </button>
            </div>
        </div>
    </ng-container>
</div>

<div>
    <router-outlet></router-outlet>
</div>

<!--Unsaved Changes confirmation Modal-->
<app-confirmation-modal [modalName] = "'travel-unsaved-changes-modal'" (secondaryBtnAction)="leavePageClicked()"
    [primaryBtnName]="'Stay On Page'" [secondaryBtnName]="'Leave Page'" (primaryBtnAction)="removeNewTravelCreateObject()" (close)="removeNewTravelCreateObject()">
    <!-- modal header -->
    <ng-container header>
        <span>Confirmation</span>
    </ng-container>
    <!-- modal content -->
    <div content class="ms-2">
        <p *ngIf="service.unSavedTabName != 'Certification'" class="fs-14">
            You have unsaved changes in
            <strong>{{service.unSavedTabName? service.unSavedTabName : 'Travel Disclosure Creation'}}.</strong>
        </p>
        <p class="fs-14">Do you want to leave the
            <strong *ngIf="service.unSavedTabName == 'Certification'">Certification </strong>
            {{service.unSavedTabName == 'Certification' ? 'Page' : 'page without saving' }} ?
        </p>
    </div>
</app-confirmation-modal>

<!--Confirmation Modal-->
<app-confirmation-modal [modalName] = "'travel-confirmation-modal'" (primaryBtnAction)="performDisclosureAction($event)"
    [primaryBtnName]="modalActionBtnName" [modalSize]="modalSize" [textAreaLabelName]="'Reason for ' + textAreaLabelName"
    [needDescriptionField]="needDescriptionField" [isMandatory]="isMandatory" [descriptionErrorMsg]="descriptionErrorMsg"
    [helpText]="reasonHelpText" [secondaryBtnTooltip]= "'Click here to cancel'" [textAreaPlaceholder]="'Please provide the reason'"
    [primaryBtnTooltip]="'Click here to '+ modalActionBtnName?.toLowerCase() +' the disclosure.'">
    <!-- modal header -->
    <ng-container header>
        <span>{{modalActionBtnName}} Travel Disclosure</span>
        <app-common-help-text *ngIf="confirmationModalHelpText" [helpTextHardCoded]="confirmationModalHelpText"></app-common-help-text>
    </ng-container>

    <ng-container content>
        <app-person-project-entity-card [personProjectOrEntity]="personEntityDetails" [disclosureHeaderDetails]="travelDisclosure"></app-person-project-entity-card>
    </ng-container>

    <!-- modal content -->
    <ng-container content>
        <p *ngIf="modalActionBtnName == 'Submit'" class="fs-14 mb-0 mt-2">
            Are you sure you want to <strong class="text-lowercase">{{modalActionBtnName}}</strong> this disclosure?
        </p>
    </ng-container>
</app-confirmation-modal>

<!-- assign admin modal -->
<app-assign-administrator-modal *ngIf="isAddAssignModalOpen"
    [defaultAdminDetails]="defaultAdminDetails"
    [path]="'TRAVEL_DISCLOSURES'" (closeModal)="closeAssignAdministratorModal($event)"
    [disclosureId]="travelDisclosure?.travelDisclosureId"
    [actionType]="travelDisclosure?.adminPersonId ? 'R' : 'A'">
</app-assign-administrator-modal>

<!-- disclosure status slider -->
<app-travel-add-conflict-slider *ngIf="isOpenSlider"
    [entityDetails]="service.travelEntityDetails" [travelDisclosure]="travelDisclosure"
    [isEditMode]="checkReviewStatusCode([TRAVEL_REVIEW_STATUS?.SUBMITTED, TRAVEL_REVIEW_STATUS?.REVIEW_IN_PROGRESS], 'SOME')" (closePage)="closeConflictSlider()" >
</app-travel-add-conflict-slider>

<div *ngIf="isOpenRiskSlider">
    <app-travel-risk-slider (closePage)="closeSlider($event)" [travelDisclosure]="travelDisclosure" (riskChange)= "changeDataStoreRisk($event)" [isEditMode]="checkReviewStatusCode([TRAVEL_REVIEW_STATUS.SUBMITTED, TRAVEL_REVIEW_STATUS.REVIEW_IN_PROGRESS], 'SOME')"></app-travel-risk-slider>
</div>

<app-concurrency-warning-modal *ngIf="service.concurrentUpdateAction" [sectionName]="service.concurrentUpdateAction" (closePage)="cancelConcurrency()"></app-concurrency-warning-modal>

<ng-container *ngIf="isShowPersonSlider">
    <app-person-related-sliders (closePage)="closePersonSlider()" for="TRAVEL_DISCLOSURE"
        [personId]="userDetails.personId" [sliderType]="selectedPersonSliderType" [personName]="userDetails.fullName">
    </app-person-related-sliders>
</ng-container>
