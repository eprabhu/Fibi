<div class="card" #entityNavOverlay [class.overlay]="entityManagementService.isShowEntityNavBar">
  <div *ngIf="entityManagementService.isShowEntityNavBar" @enterAnimation
    class="task-right-div card-height d-flex align-items-center" id="task-nav-bar">
    <div tabindex="0" class="close shadow-medium" (click)="hideEntityNavBar()" id="btn-close" title="Close button">
      <img src="{{deployMap}}assets/images/close.svg" alt="close button">
    </div>
    <div class="tool-kit-body card-height scrollable-table">
      <div class="card mb-3 card-height">
        <div class="card-header px-4 card-border">
          <h5 class="card-title review-title">
            <div class="justify-content-between d-flex align-items-center">
              <div class="fs-16"><span>{{isEditEntity?'Modify':'Add New'}}</span> Entity</div>
              <button class="align-items-center d-flex btn btn-primary mt-0 py-1 px-3 h-100 fs-13 pt-1"
                [title]="isEditEntity?'Update Entity':'Create Entity'" (click)="createEntity();" [id]="isEditEntity?'btn-update':'btn-create'">
                <!--
                [queryParams]="{mode:'edit'}" -->
                <mat-icon class="fs-16 me-2 material-icons align-items-center d-flex">save</mat-icon>
                <span class="fs-13">{{isEditEntity?'Update Entity':'Create Entity'}} </span>
              </button>
            </div>
          </h5>
        </div>
        <div class="container-fluid">
          <div class="card m-3 border-nav">
            <div class="form-group">
              <div class="form-row d-flex">
                <div class="col-12  m-3 d-flex">
                  <div class="d-flex  col-6">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="entity-name">Entity Name <span class="mandatory">*</span></label>
                    </div>
                    <div class="col-8">
                      <input type="text" class="form-control fs-13" placeholder="Please Enter Entity Name"
                        [(ngModel)]="entityDetails.coiEntity.entityName"
                        [ngClass]="(mandatoryList?.has('entityName')) ? 'is-invalid d-block' : ''" id="entity-name">
                      <span *ngIf="(mandatoryList?.has('entityName'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('entityName'))}}
                      </span>
                    </div>
                  </div>
                  <div class="d-flex col-6">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="entity-type">Entity Type <span class="mandatory">*</span></label>
                    </div>
                    <div class="col-8">
                      <select class="form-select text-secondary fw-medium fs-13"
                        [(ngModel)]="entityDetails.coiEntity.entityTypeCode" (ngModelChange)="setEntityTypeObj()"
                        [ngClass]="(mandatoryList?.has('entityType')) ? 'is-invalid d-block' : ''" id="entity-type">
                        <option [value]="null">--Select--</option>
                        <ng-container *ngFor="let entityType of entityTypeList">
                          <option [value]="entityType?.entityTypeCode">{{entityType?.description}}</option>
                        </ng-container>
                      </select>
                      <span *ngIf="(mandatoryList?.has('entityType'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('entityType'))}}</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-row d-flex">
                <div class="col-12 m-3 d-flex">
                  <div class="d-flex col-6">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="country">Country <span class="mandatory">*</span></label>
                    </div>
                    <div class="col-8">
                      <app-endpoint-search [clearField]="clearCountryField" [httpOptions]="countrySearchOptions"
                        [isError]="(mandatoryList?.has('country'))" (onSelect)="selectedCountryEvent($event)"
                        [placeHolder]="'Please Enter Your Country'" class="w-100 mt-4 fs-13" [uniqueId]="'country'">
                      </app-endpoint-search>
                      <span *ngIf="(mandatoryList?.has('country'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('country'))}}
                      </span>
                    </div>
                  </div>
                  <div class="d-flex col-6">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="city">City</label>
                    </div>
                    <div class="col-8">
                      <input type="text" class="form-control fs-13" placeholder="Please Enter Your City"
                        [(ngModel)]="entityDetails.coiEntity.city" id="city">
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-row d-flex">
                <div class="col-12  m-3 d-flex">
                  <div class="col-6 d-flex">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="address">Address <span class="mandatory">*</span></label>
                    </div>
                    <div class="col-9">
                      <textarea class="form-control h-auto fs-13" placeholder="Please Enter Your Address" row="3"
                        [(ngModel)]="entityDetails.coiEntity.address"
                        [ngClass]="(mandatoryList?.has('address')) ? 'is-invalid d-block' : ''" id="address"></textarea>
                      <span *ngIf="(mandatoryList?.has('address'))"
                        class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('address'))}}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-row d-flex">
                <div class="col-12 m-3 d-flex">
                  <div class="d-flex col-6">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="phone-number">Phone Number <span class="mandatory">*</span></label>
                    </div>
                    <div class="col-8 fs-13">
                      <input type="text" class="form-control fs-13" placeholder="Please Enter Your Phone Number"
                        [(ngModel)]="entityDetails.coiEntity.phone"
                        [ngClass]="(mandatoryList?.has('phoneNumber')) ? 'is-invalid d-block' : ''"
                        (keypress)="phoneNumberValidation($event)" id="phone-number">
                      <span *ngIf="(mandatoryList?.has('phoneNumber'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('phoneNumber'))}}
                      </span>
                    </div>
                  </div>
                  <div class="d-flex  col-6">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="email-address">Email Address <span class="mandatory">*</span></label>
                    </div>
                    <div class="col-8 fs-13">
                      <input type="text" class="form-control fs-13" placeholder="Please Enter Your Email Address"
                        [(ngModel)]="entityDetails.coiEntity.emailAddress"
                        [ngClass]="(mandatoryList?.has('email')) ? 'is-invalid d-block' : ''" id="email-address">
                      <span *ngIf="(mandatoryList?.has('email'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('email'))}}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-row d-flex">
                <div class="col-12 m-3 d-flex">
                  <div class="d-flex col-6">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="website">Website <span class="mandatory">*</span></label>
                    </div>
                    <div class="col-8 fs-13">
                      <input type="text" class="form-control fs-13" placeholder="Please Enter Your Website"
                        [(ngModel)]="entityDetails.coiEntity.webURL"
                        [ngClass]="(mandatoryList?.has('website')) ? 'is-invalid d-block' : ''" id="website">
                      <span *ngIf="(mandatoryList?.has('website'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('website'))}}
                      </span>
                    </div>
                  </div>
                  <div class="d-flex col-6">
                    <div class="col-3">
                      <label class="fs-14 pl-15" for="risk-level">Risk Level</label>
                      <!-- <span class="mandatory">*</span> -->
                    </div>
                    <div class="col-8">
                      <select class="form-select text-secondary fw-medium fs-13"
                        [(ngModel)]="entityDetails.coiEntity.riskCategoryCode"
                        (ngModelChange)="setEntityRiskCategoryObj()" id="risk-level">
                        <!-- [ngClass]="(mandatoryList?.has('riskLevel')) ? 'is-invalid d-block' : ''"> -->
                        <option [value]="null">--Select--</option>
                        <ng-container *ngFor="let riskLevel of riskLevelLookup">
                          <option [value]="riskLevel?.riskCategoryCode">{{riskLevel?.description}}</option>
                        </ng-container>
                      </select>
                      <!-- <span *ngIf="(mandatoryList?.has('riskLevel'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('riskLevel'))}}
                      </span> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
