<div class="card" #entityNavOverlay [class.overlay]="entityManagementService.isShowEntityNavBar">
  <div *ngIf="entityManagementService.isShowEntityNavBar" @enterAnimation
    class="task-right-div card-height d-flex align-items-center" id="task-nav-bar">
    <div class="close shadow-medium" (click)="hideEntityNavBar()">
      <img src="{{deployMap}}assets/images/close.svg" alt="close button">
    </div>
    <div class="tool-kit-body card-height scrollable-table">
      <div class="card mb-3 card-height">
        <div class="card-header px-4 card-border">
          <h5 class="card-title review-title">
            <div class="justify-content-between d-flex align-items-center">
              <div class="fs-16"><span>{{isEditEntity?'Modify':'Add New'}}</span> Entity</div>
              <button class="align-items-center d-flex btn btn-primary mt-0 py-1 px-3 h-100 fs-13 pt-1"
                title="Create SFI" (click)="createEntity();">
                <!--
                [queryParams]="{mode:'edit'}" -->
                <mat-icon class="fs-16 me-2 material-icons align-items-center d-flex">save</mat-icon>
                <span class="fs-13">{{isEditEntity?'Update Entity':'Create Entity'}} </span>
              </button>
            </div>
          </h5>
        </div>
        <div class="card m-3 border-nav">
          <div class="form-group">
            <div class="form-row d-flex">
              <div class="col-12  m-3 d-flex">
                <div class="d-flex  col-6">
                  <div class="col-3">
                    <label class="fs-14 pl-15">Entity Name</label> <span class="mandatory">*</span>
                  </div>
                  <div class="col-8">
                    <input type="text" class="form-control fs-13" placeholder="Please Enter Entity Name"
                      [(ngModel)]="entityDetails.coiEntity.entityName"
                      [ngClass]="(mandatoryList?.has('entityName')) ? 'is-invalid d-block' : ''">
                    <span *ngIf="(mandatoryList?.has('entityName'))" class="invalid-feedback d-block fs-13">
                      {{(mandatoryList?.get('entityName'))}}
                    </span>
                  </div>
                </div>
                <div class="d-flex col-6">
                  <div class="col-3">
                    <label class="fs-14 pl-15">Entity Type</label> <span class="mandatory">*</span>
                  </div>
                  <div class="col-8">
                    <select class="form-select text-secondary fw-medium fs-13"
                      [(ngModel)]="entityDetails.coiEntity.entityTypeCode" (ngModelChange)="setEntityTypeObj()"
                      [ngClass]="(mandatoryList?.has('entityType')) ? 'is-invalid d-block' : ''">
                      <option [value]="null">--Select--</option>
                      <ng-container *ngFor="let entityType of entityTypeList">
                        <option [value]="entityType?.entityTypeCode">{{entityType?.description}}</option>
                      </ng-container>
                    </select>
                    <span *ngIf="(mandatoryList?.has('entityType'))" class="invalid-feedback d-block fs-13">
                      {{(mandatoryList?.get('entityType'))}}</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-row d-flex">
              <div class="col-12 m-3 d-flex">
                <div class="d-flex col-6">
                  <div class="col-3">
                    <label class="fs-14 pl-15">Country</label> <span class="mandatory">*</span>
                  </div>
                  <div class="col-8">
                    <app-endpoint-search [clearField]="clearCountryField" [httpOptions]="countrySearchOptions"
                      [isError]="(mandatoryList?.has('country'))"
                      (onSelect)="selectedCountryEvent($event)" [placeHolder]="'Please Enter Your Country'"
                      class="w-100 mt-4 fs-13">
                    </app-endpoint-search>
                    <span *ngIf="(mandatoryList?.has('country'))" class="invalid-feedback d-block fs-13">
                      {{(mandatoryList?.get('country'))}}
                    </span>
                  </div>
                </div>
                <div class="d-flex col-6">
                  <div class="col-3">
                    <label class="fs-14 pl-15">City</label>
                  </div>
                  <div class="col-8">
                    <input type="text" class="form-control fs-13" placeholder="Please Enter Your City" [(ngModel)]="entityDetails.coiEntity.city">
                  </div>
                </div>
              </div>
            </div>
            <div class="form-row d-flex">
              <div class="col-12  m-3 d-flex">
                <label class="fs-14 pl-15">Address</label> <span class="mandatory">*</span>
                <div class="col">
                  <textarea class="form-control h-auto fs-13" placeholder="Please Enter Your Address" row="3"
                  [(ngModel)]="entityDetails.coiEntity.address" [ngClass]="(mandatoryList?.has('address')) ? 'is-invalid d-block' : ''"></textarea>
                  <span *ngIf="(mandatoryList?.has('address'))" class="invalid-feedback d-block fs-13 invalid-position">
                    {{(mandatoryList?.get('address'))}}
                  </span>
                </div>
              </div>
            </div>
            <div class="form-row d-flex">
              <div class="col-12 m-3 d-flex">
                <div class="d-flex col-6">
                  <div class="col-3">
                    <label class="fs-14 pl-15">Phone Number</label> <span class="mandatory">*</span>
                  </div>
                  <div class="col-8 fs-13">
                    <input type="text" class="form-control fs-13" placeholder="Please Enter Your Phone Number"
                      [(ngModel)]="entityDetails.coiEntity.phone" [ngClass]="(mandatoryList?.has('phoneNumber')) ? 'is-invalid d-block' : ''">
                      <span *ngIf="(mandatoryList?.has('phoneNumber'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('phoneNumber'))}}
                      </span>
                  </div>
                </div>
                <div class="d-flex  col-6">
                  <div class="col-3">
                    <label class="fs-14 pl-15">Email Address</label> <span class="mandatory">*</span>
                  </div>
                  <div class="col-8 fs-13">
                    <input type="text" class="form-control fs-13" placeholder="Please Enter Your Email Address"
                      [(ngModel)]="entityDetails.coiEntity.emailAddress" [ngClass]="(mandatoryList?.has('email')) ? 'is-invalid d-block' : ''">
                      <span *ngIf="(mandatoryList?.has('email'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('email'))}}
                      </span>
                  </div>
                </div>
              </div>
            </div>
            <div class="form-row d-flex">
              <div class="col-12 m-3 d-flex">
                <div class="d-flex col-6">
                  <div class="col-3">
                    <label class="fs-14 pl-15">Website</label> <span class="mandatory">*</span>
                  </div>
                  <div class="col-8 fs-13">
                    <input type="text" class="form-control fs-13" placeholder="Please Enter Your Website"
                      [(ngModel)]="entityDetails.coiEntity.webURL" [ngClass]="(mandatoryList?.has('website')) ? 'is-invalid d-block' : ''">
                      <span *ngIf="(mandatoryList?.has('website'))" class="invalid-feedback d-block fs-13">
                        {{(mandatoryList?.get('website'))}}
                      </span>
                  </div>
                </div>
                <div class="d-flex col-6">
                  <div class="col-3">
                    <label class="fs-14 pl-15">Risk Level</label>
                     <!-- <span class="mandatory">*</span> -->
                  </div>
                  <div class="col-8">
                    <select class="form-select text-secondary fw-medium fs-13"
                      [(ngModel)]="entityDetails.coiEntity.riskCategoryCode"
                      (ngModelChange)="setEntityRiskCategoryObj()">
                      <!-- [ngClass]="(mandatoryList?.has('riskLevel')) ? 'is-invalid d-block' : ''"> -->
                      <option [value]="null">--Select--</option>
                      <ng-container *ngFor="let riskLevel of riskLevelLookup">
                        <option [value]="riskLevel?.riskCategoryCode">{{riskLevel?.description}}</option>
                      </ng-container>
                    </select>
                    <!-- <span *ngIf="(mandatoryList?.has('riskLevel'))" class="invalid-feedback d-block fs-13">
                      {{(mandatoryList?.get('riskLevel'))}}
                    </span> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
