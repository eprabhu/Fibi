<div class="row mb-3 " [ngClass]="isSlider? 'sticky-top' : 'sticky-top-50'">
    <div class="col-12">
		<div class="card shadow-sm">
			<div class="row mx-0">
				<div class="col-xl-9 col-lg-9 col-md-12 px-0">
					<div class="card-header bg-white px-3 border-bottom min-height-unset">
						<div class="row flex-grow-1">
							<div class="col-lg-12 d-flex align-items-center" tabindex="0" [attr.aria-label]="(entityDetails.coiEntity.entityName ? entityDetails.coiEntity.entityName : isEntityManagement ? '--Entity Name--' : '-- SFI Name --')">
								<span class="fs-18 fw-500">
                                    <ng-container *ngIf="entityDetails.coiEntity.entityName">
                                        <app-read-more [valueToShow]="entityDetails.coiEntity.entityName" [sliceCount]="50"></app-read-more>
                                    </ng-container>
                                    <ng-container *ngIf="!entityDetails.coiEntity.entityName">
                                        {{isEntityManagement ? '--Entity Name--' : '-- SFI Name --'}}
                                    </ng-container>
								</span>
							</div>
						</div>
					</div>
					<div class="card-body">
						<div class="row" *ngIf="!isEntityManagement">
							<!-- Start Date Of Involvement -->
							<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12" tabindex="0"
								[attr.aria-label]="'Start Date of Involvement' + (involvementDate.involvementStartDate | dateFormatterWithTimeZone)">
								<div class="fw-bold me-2 fs-14 label-text">Start Date Of Involvement</div>
								<app-no-data-label [classesToApply]="'fs-14'"
									[valueToShow]="involvementDate.involvementStartDate">
									<span class="fs-14">{{involvementDate.involvementStartDate |
										dateFormatterWithTimeZone}}</span>
								</app-no-data-label>
							</div>
							<!-- End Date Of Involvement -->
							<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12" tabindex="0"
							[attr.aria-label]="'End Date of Involvement' + (involvementDate.involvementEndDate | dateFormatterWithTimeZone)">
								<div class="fw-bold me-2 fs-14 label-text">End Date Of Involvement </div>
								<app-no-data-label [classesToApply]="'fs-14'"
									[valueToShow]="involvementDate.involvementEndDate">
									<span class="fs-14">{{involvementDate.involvementEndDate |
										dateFormatterWithTimeZone}}</span>
								</app-no-data-label>
							</div>
							<!-- Sponsors Research -->
							<div class="col-xl-4 col-lg-4 col-md-6 col-sm-12" tabindex="0"
							[attr.aria-label]="'Sponsors Research' + (additionalDetails?.sponsorsResearch ? 'Yes' : 'No')">
								<div class="fw-bold me-2 fs-14 label-text">Sponsors Research </div>
								<span class="text-color fs-14">{{additionalDetails?.sponsorsResearch ? 'Yes' :
									'No'}}</span>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xl-3 col-lg-3 col-md-12 py-3 border-start">
					<div class="d-grid gap-2 d-md-flex flex-md-wrap">
						<button class="btn btn-outline-grey col pb-0 w-100" title="Go to COI home page" tabindex="0"
							(click)="goToHome()" aria-label="Home" role="button">
							<mat-icon>home</mat-icon>
						</button>
						<button class="btn btn-outline-grey col w-100" (click)="navigateBack()" tabindex="0"
							title="Click to go back to Entity list" aria-label="Back" role="button">
							<i class="fa fa-reply justify-content-center align-items-center fs-14"></i>
							<span class="fs-14 mx-2 btn-content-back d-lg-inline">Back</span>
						</button>
						<button tabindex="0" [attr.aria-label]="buttonName" role="button"
						class="align-items-center btn btn-primary d-flex fs-14 col-12 justify-content-center mt-0 w-100"
						[title]="btnTitle" (click)="submitEntity();"
						[disabled]="mandatoryList?.has('entityAlreadyAdded')">
						<mat-icon class="fs-4 w-auto h-auto me-2 material-icons">save</mat-icon>
						{{buttonName}}
					</button>
				</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="card">
	<div class="card-header align-items-center border-bottom min-height-unset py-3 fw-500">
		Relationship Details
	</div>
	<!-- Additional Details -->
	<div class="card-body">
			<div class="row" tabindex="-1">
				<!-- Entity Name -->
				<div class="col-12 mb-3" tabindex="0" aria-label="Entity Name Search Field" role="searchbox">
					<div class="d-flex position-relative">
						<label class="d-block fs-14 fw-500 px-1 pb-1 label-text" for="Entity-Name">
							<span class="mandatory">*</span>
							Entity Name
						</label>
					</div>
					<div class="col">
						<app-endpoint-search *ngIf="!isEntityManagement ;else textBox"
							(onSelect)="selectedEvent($event)" [clearField]="clearField"
							[httpOptions]="EntitySearchOptions" class="w-100 mt-4" [addSearchText]="true"
							(onNewValueSelect)="selectNewEntity($event)" [isDisabled]="isViewMode"
							[placeHolder]="'Type here to search / add an Entity Name'"
							[isError]="mandatoryList?.has('entityName') || mandatoryList?.has('entityAlreadyAdded')">
						</app-endpoint-search>
						<ng-template #textBox>
							<input type="text" class="form-control fs-13"
								[(ngModel)]="entityDetails.coiEntity.entityName"
								[ngClass]="(mandatoryList?.has('entityName')) ? 'is-invalid d-block' : ''"
								id="entity-name" (ngModelChange)="setHeader();" appLengthValidator
								[limit]=500 [styleList]="'mt-2 float-end word-count'">
						</ng-template>
						<div class="help-text" tabindex="0" aria-label="Entity Name Helptext" aria-describedby="entity-name-helptext">
							<span id="entity-name-helptext">Type in the official name of the business or organization you need to report. Entities to
								report include foreign, domestic, public or private entities, but not federal agencies.</span>
						</div>
						<div *ngIf="mandatoryList?.has('entityName')" class="invalid-feedback d-block fs-13"
							tabindex="0" aria-label="Entity Name Validation" aria-describedby="entity-name-validation1">
							<span id="entity-name-validation1">{{mandatoryList?.get('entityName')}}</span>
						</div>
						<div *ngIf="mandatoryList?.has('entityAlreadyAdded')" class="invalid-feedback d-block fs-13"
							tabindex="0" aria-label="Entity Name Validation" aria-describedby="entity-name-validation2">
							<span id="entity-name-validation2">{{mandatoryList?.get('entityAlreadyAdded')}}</span>
						</div>
					</div>
				</div>
				<div *ngIf="mandatoryList?.has('entityAlreadyAdded')" class="mx-1 px-4 mb-4">
					<div class="bg-light info-card-border p-2 rounded-2 shadow-medium">
						<div class="m-0 mb-2 pt-2 row">
								<!-- Relationship -->
						<div class="col-7 text-secondary fs-14" tabindex="0" aria-label="Relationship">
							<span class="fw-bold me-3 label-text">Relationship :</span>
								<span *ngIf="checkForNotEmpty(existingEntityDetails.personEntityRelationships);else noRelation">
									<ng-container>
										<em
												*ngFor="let subsection of existingEntityDetails.personEntityRelationships | keyvalue ;let isKeyFirst = first">
											<span class="relationship-pill border px-3 py-1 rounded-4 me-2 pill-color"><span class="fw-medium">{{subsection.key}} : </span>
												<ng-container *ngFor="let relationship of subsection.value;let isFirst = first; let isLast = last;">
													<span
														*ngIf="!isLast">{{relationship?.validPersonEntityRelType?.personEntityRelType?.description+'/'}}
													</span>
													<span
														*ngIf="isLast">{{relationship?.validPersonEntityRelType?.personEntityRelType?.description}}
													</span>
												</ng-container>
											</span>
										</em>
									</ng-container>
								</span>
									<ng-template #noRelation>
										<span>--</span>
									</ng-template>
							</div>
							<!-- Entity Type -->
							<div class="col text-secondary" tabindex="0" [attr.aria-label]="'Entity Type' + (existingEntityDetails?.entityType?.description)">
								<span class="fw-bold me-2 fs-14 label-text">Entity Type :</span>
								<app-no-data-label [classesToApply]="'fs-14'"
									[valueToShow]="existingEntityDetails?.entityType?.description">
									<span class="fs-14">{{existingEntityDetails?.entityType?.description}}</span>
								</app-no-data-label>
							</div>
						</div>
						<div class="fs-14 mx-0 row">
							<!-- Start Date Of Involvement -->
							<div class="align-items-center col-4 d-flex justify-content-between text-secondary" tabindex="0"
							[attr.aria-label]="'Start Date Of Involvement' + (existingEntityDetails?.involvementStartDate | dateFormatterWithTimeZone)">
								<div>
									<span class="fw-bold me-2 label-text">Start Date Of Involvement : </span>
									<app-no-data-label [classesToApply]="'fs-14'"
										[valueToShow]="existingEntityDetails?.involvementStartDate">
										<span>{{existingEntityDetails?.involvementStartDate |
											dateFormatterWithTimeZone}}</span>
									</app-no-data-label>
								</div>
							</div>
							<!-- End Date Of Involvement -->
							<div class="align-items-center col-3 d-flex justify-content-between text-secondary" tabindex="0"
							[attr.aria-label]="'End Date Of Involvement' + (existingEntityDetails?.involvementEndDate | dateFormatterWithTimeZone)">
								<div>
									<span class="fw-bold me-2 label-text"> End Date Of Involvement :</span>
									<app-no-data-label [classesToApply]="'fs-14'"
										[valueToShow]="existingEntityDetails?.involvementEndDate">
										<span>
											{{existingEntityDetails?.involvementEndDate | dateFormatterWithTimeZone}}
										</span>
									</app-no-data-label>
								</div>
							</div>
							<!-- Country -->
							<div class="align-items-center d-flex col-3 fs-14 text-secondary" tabindex="0" [attr.aria-label]="'Country + (existingEntityDetails?.country?.countryName)'">
								<span class="fw-bold me-2 label-text"> Country : </span>
								<app-no-data-label [classesToApply]="'fs-14'"
									[valueToShow]="existingEntityDetails?.country?.countryName">
									<div>
										{{existingEntityDetails?.country?.countryName}}
									</div>
								</app-no-data-label>
							</div>
							<div class="align-items-center col-2 mb-2 d-flex text-secondary justify-content-end">
								<button class="align-items-center btn btn-outline-primary d-flex fs-14" tabindex="0" aria-label="View" role="button"
									(click)="viewSfiDetails()">
									<mat-icon class="me-1">visibility</mat-icon>
									View
								</button>
							</div>
						</div>
					</div>
				</div>
				<ng-container *ngIf="canShowEntityFields">
					<div class="mb-3 row mx-0 px-0">
						<!-- Country -->
						<div class="col-xxl-6 col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12" tabindex="0" aria-label="Country Search Field" role="searchbox">
							<div class="d-flex position-relative">
								<label class="d-block fs-14 fw-500 pb-1 label-text" for="Country">
									<span class="mandatory">*</span>
									Country
								</label>
							</div>
							<div class="col">
								<app-endpoint-search [clearField]="clearCountryField"
									[httpOptions]="countrySearchOptions" (onSelect)="selectedCountryEvent($event)"
									[isDisabled]="isResultFromSearch || isViewMode ||modifyType ==='1'"
									class="w-100 mt-4" [isError]="mandatoryList?.has('country')">
								</app-endpoint-search>
								<div class="help-text">
									Select country from search bar.
								</div>
								<div *ngIf="mandatoryList?.has('country')" class="invalid-feedback d-block fs-13">
									{{mandatoryList?.get('country')}}
								</div>
							</div>
						</div>
					<!-- City -->
						<div class="col-xxl-6 col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12 mt-3 mt-xl-0" tabindex="0" aria-label="City">
							<div class="d-flex fs-15 position-relative">
								<label class="d-block fs-14 fw-500 pb-1 label-text" for="City">City</label>
							</div>
							<div class="col">
								<input type="text" class="form-control" [(ngModel)]="entityDetails.coiEntity.city"
									[disabled]="isResultFromSearch || isViewMode" appTailingSpaceRemover>
								<div class="help-text">
									Type in the city of the business or organization you need to report.
								</div>
							</div>
						</div>
					</div>
					<!-- Address -->
					<div class="px-0 mx-0 mb-3 row" tabindex="0" aria-label="Address">
						<span>
							<label class="fs-14 fw-500 pb-1 label-text">
								<span class="mandatory">*</span>
								Address
							</label>
							<textarea appAutoGrow class="form-control" rows="1"
								[(ngModel)]="entityDetails.coiEntity.address"
								appTailingSpaceRemover
								[ngClass]="mandatoryList?.has('address') ? 'is-invalid d-block' : ''" appLengthValidator
								[limit]=2000 [styleList]="'mt-2 float-end word-count'">
                                    </textarea>
							<div class="help-text">
								Type in the address of the business or organization you want to report.
							</div>
							<div *ngIf="mandatoryList?.has('address')" class="invalid-feedback d-block fs-13 position-absolute">
								{{mandatoryList?.get('address')}}
							</div>
						</span>
					</div>
					<!-- Phone -->
					<div class="px-0 mx-0 mb-3 row">
						<div class="col-xxl-6 col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12" tabindex="0" aria-label="Phone">
							<div class="d-flex px-1 position-relative">
								<label class="d-block fs-14 fw-500 pb-1 label-text" for="Phone">
									Phone
								</label>
							</div>
							<div class="col">
									<input class="form-control" [(ngModel)]="entityDetails.coiEntity.phone"
									    appTailingSpaceRemover
										(keypress)="inputRestriction($event)"
										[disabled]="isResultFromSearch || isViewMode"
										(keyup)="phoneNumberValidation(entityDetails.coiEntity.phone)" maxlength="15">
									<div class="help-text">
										Type in the phone number of the business or organization you want to report.
									</div>
							</div>
						</div>
						<!-- Zip Code -->
						<div class="col-xxl-6 col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12 mt-3 mt-xl-0" tabindex="0" aria-label="Zip Code">
							<div class="d-flex fs-15 position-relative">
								<label class="d-block fs-14 fw-500 pb-1 label-text" for="Zip Code">
									Zip Code
								</label>
							</div>
							<div class="col pe-1">
								<input type="text" class="form-control" [(ngModel)]="entityDetails.coiEntity.zipCode"
									appTailingSpaceRemover
									(keypress)="inputRestriction($event)" maxlength="15"
									[disabled]="isResultFromSearch || isViewMode">
								<div class="help-text">
									Type in the zip code of the business or organization you need to report.
								</div>
							</div>
						</div>
					</div>
					<div class="px-0 mx-0 mb-3 row">
						<!-- Website -->
						<div class="col-xxl-6 col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12" tabindex="0" aria-label="Website">
							<div class="d-flex position-relative">
								<label class="d-block fs-14 fw-500 pb-1 label-text" for="website">Website</label>
							</div>
							<div class="col">
								<input type="text" class="form-control" [(ngModel)]="entityDetails.coiEntity.webURL"
									id="website" [disabled]="isResultFromSearch || isViewMode"
									appTailingSpaceRemover>
								<div class="help-text">
									Type in the website of the business or organization you want to report.
								</div>
							</div>
						</div>
						<!-- Email Address -->
						<div class="col-xxl-6 col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12 mt-3 mt-xl-0" tabindex="0" aria-label="Email Address">
							<div class="d-flex fs-15 position-relative">
								<label class="d-block fs-14 fw-500 pb-1 label-text" for="email"> Email Address
								</label>
							</div>
							<div class="col">
								<input type="text" class="form-control"
									[(ngModel)]="entityDetails.coiEntity.emailAddress"
									[ngClass]="emailWarningMsg != null ? 'is-invalid d-block' : ''"
									[disabled]="isResultFromSearch || isViewMode"
									appTailingSpaceRemover>
								<div class="help-text">Type the email address of the business or organization you want to report.
								</div>
								<div *ngIf="emailWarningMsg" class="invalid-feedback d-block fs-13">
									{{emailWarningMsg}}
								</div>
							</div>
						</div>
					</div>
					<div class="px-0 mx-0 row" [ngClass]="isEntityManagement ? 'mb-4' : 'mb-3'">
						<!-- Entity Type -->
						<div class="col-xxl-6 col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12" tabindex="0" aria-label="Entity Type Dropdown">
							<div class="d-flex position-relative">
								<label class="d-block fs-14 fw-500 pb-1 label-text" for="Entity Type">
									<span class="mandatory">*</span> Entity Type
								</label>
							</div>
							<div class="col">
								<select class="form-control form-select" id="entity-type"
									[(ngModel)]="entityDetails.coiEntity.entityTypeCode"
									(ngModelChange)="setEntityTypeObj();"
									[ngClass]="(mandatoryList?.has('entityType')) ? 'is-invalid d-block' : ''"
									[disabled]="isResultFromSearch || isViewMode || modifyType ==='1'">
									<option [value]="null">--Select Type--</option>
									<option *ngFor="let type of sfiLookUpList?.entityType"
										[value]="type?.entityTypeCode" [hidden]="type?.isActive != true">
										{{type?.description}}</option>
								</select>
								<div class="help-text">Select type from the available options.
								</div>
								<div *ngIf="mandatoryList?.has('entityType')" class="invalid-feedback d-block fs-13">
									{{mandatoryList?.get('entityType')}}
								</div>
							</div>
						</div>
						<!-- Risk -->
						<div class="col-xxl-6 col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12 mt-3 mt-md-0" *ngIf="isEntityManagement"  tabindex="0" aria-label="Risk Dropdwon">
							<div class="d-flex px-1 position-relative">
								<label class="d-block fs-14 fw-500 px-1 pb-1 label-text" for="risk-level">Risk
								</label>
							</div>
							<div class="col px-1">
								<select class="form-select form-control fs-14"
									[(ngModel)]="entityDetails.coiEntity.riskCategoryCode"
									[disabled]="modifyType ==='1'" (ngModelChange)="setEntityRiskCategoryObj()"
									id="risk-level">
									<ng-container *ngFor="let riskLevel of riskLevelLookup">
										<option [value]="riskLevel?.riskCategoryCode">{{riskLevel?.description}}
										</option>
									</ng-container>
								</select>
								<div class="help-text">Select risk level from the available.
								</div>
							</div>
						</div>
					</div>
				</ng-container>
				<ng-container *ngIf="isResultFromSearch">
					<div class="mx-1 px-4 mb-3">
						<app-shared-entity-info-card *ngIf="isResultFromSearch"
							[entityDetails]="entityDetails?.coiEntity" [viewMore]="true"
							(emitEntityId)="viewEntityDetails($event)"></app-shared-entity-info-card>
					</div>
				</ng-container>
				<div *ngIf="isExpandedAdditionalDetails && !isEntityManagement" class="card-body">
					<div class="row">
						<!-- Start date of involvement -->
						<div class="col-xxl-5 col-xl-4 col-lg-12 col-md-12 col-sm-12 col-12" tabindex="0" aria-label="Start Date of Involvement Date Field">
							<div class="d-flex">
								<label class="d-block fw-500 fs-14 pb-1 label-text"
									for="Start date of involvement"><span class="mandatory">*</span> Start Date of
									Involvement
								</label>
							</div>
							<div>
								<span class="dateField w-100">
									<input matInput [matDatepicker]="startDate" id="start-date-involvement"
										placeholder="{{datePlaceHolder}}" style="width: 100% !important"
										(click)="startDate.open()" autocomplete="off"
										class="d-inline-block form-control"
										[(ngModel)]="involvementDate.involvementStartDate"
										(ngModelChange)="endDateValidation()"
										(keypress)="_commonService._keyPress($event, 'date')"
										[ngClass]="(mandatoryList?.has('date')) ? 'is-invalid d-block' : ''" />
									<i title="Click to select Start date" (click)="startDate.open()"
										[class.date-field-error]="mandatoryList?.has('date')"
										class="fa fa-calendar fa-large insidePicker hand-cursor"
										title="Click to select date"></i>
									<mat-datepicker #startDate [pickerType]="'calendar'">
									</mat-datepicker>
								</span>
								<div *ngIf="mandatoryList?.has('date')" class="invalid-feedback d-block fs-13"
									tabindex="0" aria-label="Start Date of Involvement Validation" aria-describedby="start-date-validation">
									<span id="start-date-validation">{{mandatoryList?.get('date')}}</span>
								</div>
							</div>
						</div>
						<!-- End Date of Involvement -->
						<div class="col-xxl-5 col-xl-4 col-lg-12 col-md-12 col-sm-12 col-12 mt-lg-2 mt-xl-0 mt-md-2 mt-2" tabindex="0" aria-label="End Date of Involvement Date Field">
							<label class="d-block fs-14 fw-500 px-1 pb-1 label-text"
								for="End date of involvement">End Date of Involvement
							</label>
							<div>
								<span class="dateField">
									<input matInput [matDatepicker]="endDate" id="end-date-involvement"
										placeholder="{{datePlaceHolder}}" style="width: 100% !important"
										(click)="endDate.open()" autocomplete="off" class="d-inline-block form-control"
										[(ngModel)]="involvementDate.involvementEndDate"
										(ngModelChange)="endDateValidation()"
										(keypress)="_commonService._keyPress($event, 'date')"
										[ngClass]="(mandatoryList?.has('endDate')) ? 'is-invalid d-block' : ''"/>
									<i title="Click to select End date" (click)="endDate.open()"
									[class.date-field-error]="mandatoryList?.has('endDate')"
										class="fa fa-calendar fa-large insidePicker hand-cursor"
										title="Click to select end date"></i>
									<mat-datepicker #endDate [pickerType]="'calendar'">
									</mat-datepicker>
								</span>
								<div *ngIf="(mandatoryList.get('endDate'))" class="fs-13 invalid-feedback d-block"
									tabindex="0" aria-label="End Date of Involvement Validation" aria-describedby="end-date-validation">
									<span id="end-date-validation">{{mandatoryList.get('endDate')}}</span>
								</div>
							</div>
						</div>
						<!-- Sponsors Research -->
						<div class="col-xxl-2 col-xl-4 col-lg-12 col-md-12 col-sm-12 col-12 mt-lg-2 mt-xl-0 mt-md-2 mt-2" tabindex="0" aria-label="Sponsors Research Toggle Button">
							<div class="d-flex px-3">
								<label class="d-block fs-14 fw-500 px-1 pb-1 row label-text">Sponsors Research</label>
							</div>
							<div class="px-2" title="Click to toggle Yes/No">
								<span class="py-1" aria-label="Disclosures_has_sfi" role="switch">
									<a *ngIf="additionalDetails.sponsorsResearch" class="pl-2">
										<label class="switch" (click)="additionalDetails.sponsorsResearch = false">
											<input type="checkbox" checked>
											<span class="slider round"><small class="fs-12 mt-1">Yes</small></span>
										</label>
									</a>
									<a *ngIf="!additionalDetails.sponsorsResearch" class="pl-2">
										<label class="switch" (click)="additionalDetails.sponsorsResearch = true">
											<input type="checkbox">
											<span class="slider round"><small
													class="deactivate-text fs-12 mt-1">No</small></span>
										</label>
									</a>
								</span>
							</div>
						</div>
					</div>
					<!-- Realtionship Details [Disclose financial details for the SFI] -->
					<div class="mb-3 mx-0 row mt-4" *ngIf="!isEntityManagement">
						<div class="col-lg-12 col-md-12 col-sm-12 col-12 card custom-padding position-relative px-0"
							tabindex="0" aria-label="Relationship Details Card" [class.invalid-border]="mandatoryList.has('relationRadio')">
							<div class="color-black mb-2">
								<label class="form-check-label colour-black relation-header px-2 fs-14 label-text"><span
										class="mandatory">*</span> Relationship Details
									[Disclose financial details for the SFI]
								</label>
							</div>
							<div class="row mb-3 mt-2 mx-0 px-2">
								<div *ngFor="let subsection of relationLookup | keyvalue;" class="col-lg-4 col-md-6 col-xl-4 col-xxl-4">
									<div tabindex="0" [attr.aria-label]="subsection?.key">
										<label class="fs-14 fw-500 label-text pb-1 pt-2">{{subsection.key}}</label>
									</div>
									<div class="relation">
										<div *ngFor="let relation of subsection.value;let isFirst = first; let isLast = last;"
											class="form-check d-block mb-2" tabindex="0"
											[attr.aria-label]="relation?.personEntityRelType?.description" role="checkbox">
											<input type="checkbox" name="relation"
												class="form-check-input text-secondary border border-secondary"
												[id]="'sfi-relation'+relation.validPersonEntityRelTypeCode"
												[value]="relation?.validPersonEntityRelTypeCode"
												[(ngModel)]="isChecked[relation.validPersonEntityRelTypeCode]"
												title="Click to select {{relation?.description}} relation">
											<label class="r-title fs-14">
												{{relation?.personEntityRelType?.description}}
											</label>
										</div>
									</div>
								</div>
							</div>
							<div class="help-text m-0" tabindex="0" aria-label="Relationship Details Helptext"
								aria-describedby="relationship-details-helptext">
								<span id="relationship-details-helptext">Relationship Details section, use this section to disclose
									financial information related to the entity for your
									Self, Spouse/Domestic Partner, and Dependents (children who are unemancipated and under 18 years of age
									or who
									receive more than one-­‐half support from you).</span>
							</div>
						</div>
					</div>
					<div *ngIf="mandatoryList.has('relationRadio')" class="invalid-feedback d-block fs-13"
						tabindex="0" aria-label="Relationship Details Validation" aria-describedby="relation-details-validation">
						<span id="relation-details-validation">{{mandatoryList.get('relationRadio')}}</span>
					</div>
					<!-- Relationship with Entity -->
					<div class="row mb-3" tabindex="0" aria-label="Relationship with Entity">
						<span>
							<label class="fs-14 fw-500 py-2 position-relative label-text">
								<span class="mandatory">*</span>
								Relationship with Entity
							</label>
							<textarea appAutoGrow class="form-control" id="releationship-entity" rows="1"
								[(ngModel)]="additionalDetails.staffInvolvement"
								appTailingSpaceRemover
								[ngClass]="(mandatoryList?.has('staff')) ? 'is-invalid d-block' : ''" appLengthValidator
								[limit]=2000 [styleList]="'mt-2 float-end word-count'">
                                    </textarea>
							<div class="help-text" tabindex="0" aria-label="Relationship with Entity Helptext" aria-describedby="relation-with-entity-helptext">
								<span id="relation-with-entity-helptext">This description is presented in the Relationship section to help you relate this entity
								to your research projects. Please enter an adequate description of the organization, and
								of your role with them,to aid both you, and a reviewers' understanding of the
								association between the entity and work.</span>
							</div>
							<div *ngIf="mandatoryList?.has('staff')" class="invalid-feedback d-block fs-13"
								tabindex="0" aria-label="Relationship with Entity Validation" aria-describedby="relation-with-entity-validation">
								<span id="relation-with-entity-validation">{{mandatoryList?.get('staff')}}</span>
							</div>
						</span>
					</div>
					<!-- Principle Business Area of Entity -->
					<div class="row mb-3" tabindex="0" aria-label="Principle Business Area of Entity">
						<span>
							<label class="fs-14 fw-500 py-2 position-relative label-text">
								<span class="mandatory">*</span>
								Principle Business Area of Entity
							</label>
							<textarea appAutoGrow class="form-control" id="releationship-entity" rows="1"
								[(ngModel)]="additionalDetails.studentInvolvement"
								appTailingSpaceRemover
								[ngClass]="(mandatoryList?.has('student')) ? 'is-invalid d-block' : ''"
								appLengthValidator [limit]=2000
								[styleList]="'mt-2 float-end word-count'">
                                </textarea>
							<div class="help-text" tabindex="0" aria-label="Principle Business Area of Entity Helptext" aria-describedby="principle-business-area-helptext">
								<span id="principle-business-area-helptext">Please enter an adequate description of the entity's principal are of business.</span>
							</div>
							<div *ngIf="mandatoryList?.has('student')" class="invalid-feedback d-block fs-13"
								tabindex="0" aria-label="Relationship with Entity Validation" aria-describedby="relation-with-entity-validation">
								<span id="principle-business-area-validation">{{mandatoryList?.get('student')}}</span>
							</div>
						</span>
					</div>
					<!--  Relationship of Entity to your University responsibilities -->
					<div class="row mb-3" tabindex="0" aria-label="Relationship of Entity to your University Responsibilities">
						<span>
							<label class="fs-14 fw-500 py-2 position-relative label-text">
								<span class="mandatory">*</span>
								Relationship of Entity to your
								University responsibilities
							</label>
							<textarea appAutoGrow class="form-control" id="releationship-entity" rows="1"
								[(ngModel)]="additionalDetails.instituteResourceInvolvement"
								appTailingSpaceRemover
								[ngClass]="(mandatoryList?.has('resource')) ? 'is-invalid d-block' : ''"
								appLengthValidator [limit]=2000
								[styleList]="'mt-2 float-end word-count'">
                                  </textarea>
							<div class="help-text" tabindex="0" aria-label="Relationship of Entity to your University responsibilities Helptext" aria-describedby="university-responsibility-helptext">
								<span id="university-responsibility">Please enter an adequate description of the entity's relationship to your University</span>
								responsibilities.
							</div>
							<div *ngIf="mandatoryList?.has('resource')" class="invalid-feedback d-block fs-13"
								tabindex="0" aria-label="Relationship of Entity to your University responsibilities validation" aria-describedby="university-responsibility-validation">
								<span id="university-responsibility-validation">{{mandatoryList?.get('resource')}}</span>
							</div>
						</span>
					</div>
				</div>
			</div>
			<!-- Additional Details Ends -->
	</div>
</div>

<!-- Update confirmation -->
<div class="modal fade mySkinDialog modal-md" data-bs-backdrop="static" id="actionConfirmationModal" role="dialog">
	<div class="modal-dialog modal-dialog-centered">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Confirmation</h4>
				<button type="button" class="btn-close" title="Close" data-bs-dismiss="modal"
					aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-12">
						<div class="row">
							<div class="col-12 grey-info font">
								<span class="fs-14">Would you like to make changes to the existing entity
									details?
									Please note that any modifications made will impact the existing SFIs.
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button class="btn btn-outline-secondary" id="claim-sumbit-no-btn" data-bs-dismiss="modal" type="button"
				title="Click to cancel">Cancel
				</button>
				<button class="btn btn-primary me-0" id="claim-sumbit-no-btn" type="button"
					(click)="updateEntityDetails()" data-bs-dismiss="modal"  title="Click to submit">Submit
				</button>
			</div>
		</div>
	</div>
</div>

  <!-- Entity Details Modal -->
  <button class="d-none" data-bs-toggle="modal" data-bs-target="#entity-details" id="persondetailsTrigger">
  </button>

  <div class="modal fade mySkinDialog modal-lg" id="entity-details" tabindex="0" aria-labelledby="exampleModalLabel"
    data-bs-backdrop="static" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header headerStyle" tabindex="0" [attr.aria-label]="'Entity Name' + (addEntityConfirmation?.entityName)">
          <h5 class="modal-title userDetail " id="entityDetails">{{addEntityConfirmation?.entityName}}</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="clearEntityDetails()"></button>
        </div>
        <div class="modal-body">
          <div class="mx-1 row pt-1 d-flex mb-3">
            <div class="text-secondary fs-14 col-4 mb-15" tabindex="0" [attr.aria-label]="'Country' + (addEntityConfirmation?.country?.countryName)">
              <label class="grey-text me-2"> Country</label>
              <span class="d-flex fs-14 fw-normal"> {{addEntityConfirmation?.country?.countryName}}</span>
            </div>
            <div class="text-secondary fs-14 col-4 mb-15" tabindex="0" [attr.aria-label]="'Entity Type' + (addEntityConfirmation?.entityType?.description)">
              <label class="grey-text me-2">Entity Type</label>
              <span class="d-flex fs-14 fw-normal"> {{addEntityConfirmation?.entityType?.description}}</span>
            </div>
            <div class="text-secondary fs-14 col-4" tabindex="0" [attr.aria-label]="'Entity Status' + (addEntityConfirmation?.isActive ? 'Active' : 'Inactive')">
              <label class="grey-text me-2">Entity Status</label>
              <span class="fs-14 fw-400 d-flex entity-risk-badge px-3"
                [ngClass]="addEntityConfirmation?.isActive ? 'active' : 'inactive'">{{addEntityConfirmation?.isActive
                ?'Active':'Inactive'}}</span>
            </div>
            <div class="text-secondary fs-14 col-8 mt-2" tabindex="0" [attr.aria-label]="'Address' + (addEntityConfirmation?.address)">
              <div>
				<label class="grey-text me-2">Address</label></div>
			  <app-no-data-label [classesToApply]="'fs-14'" [valueToShow]="addEntityConfirmation?.address">
				<span class="d-flex fs-14 fw-normal" *ngIf="!isAddressReadMore && addEntityConfirmation?.address?.length > 55; else showFullInfo">
					<span> {{(addEntityConfirmation?.address |
					  slice:0:55)}}
					<span (click)="isAddressReadMore = !isAddressReadMore" class="hand-cursor"><span class="fw-medium">...<u>Read more</u></span>
					</span></span>
				  </span>
				  <ng-template #showFullInfo>
					<span class="word-break-all d-flex fs-14 fw-normal">{{addEntityConfirmation?.address}}</span>
					<span *ngIf="addEntityConfirmation?.address?.length > 55" (click)="isAddressReadMore = !isAddressReadMore" aria-hidden="true"
					  class="d-flex hand-cursor"><span class="fw-medium"><u>Read Less</u></span>
					</span>
				  </ng-template>
				</app-no-data-label>
            </div>
            <div class="col text-secondary fs-14 align-items-center mt-2" tabindex="0" [attr.aria-label]="'Risk' + (addEntityConfirmation?.entityRiskCategory.description)">
              <label class="fw-bold me-2">Risk </label>
              <span class="fw-normal">
                <div class="text-color fs-14 d-flex align-items-center">
                  <span>
                    <mat-icon
                      class="{{getWarningClass(addEntityConfirmation?.entityRiskCategory?.riskCategoryCode)}} material-icons-round">warning</mat-icon>
                  </span>
                  <span class="ml-2">{{addEntityConfirmation?.entityRiskCategory.description}}</span>
                </div>
              </span>
            </div>
          </div>
        </div>
        <div class="modal-footer ct-footer-padding">
          <button (click)="clearEntityDetails()" class="btn btn-outline-secondary btn-sm" id="claim-sumbit-no-btn"
            data-bs-dismiss="modal" type="button" tabindex="0" aria-label="Clear" role="button">Clear
          </button>
          <button (click)="confirmEntityDetails()" data-bs-dismiss="modal" tabindex="0" aria-label="Confirm" role="button"
            class="btn btn-primary btn-sm fs-14 btn-primary-submit" type="button">Confirm</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Concurrency Modal -->

  <div class="modal modal-coi fade mySkinDialog" id="sfi-concurrency-modal" role="dialog"
    aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" tabindex="0" id="modal-header">
                  Invalid Action
                </h5>
                <button type="button" id="sfi-concurrency-modal-dismiss-btn" class="btn-close fs-12"
                    data-bs-dismiss="modal" aria-label="click to Close popup" role="button" >
                </button>
            </div>
            <div class="modal-body m-0 p-0">
              <div class="form-row mb-20">
                <div class="col-1 mt-3">
                    <i class="fa fa-2x fa-exclamation-triangle text-warning px-3"
                        aria-hidden="true"></i>
                </div>
                <div class="col-11 font-align" tabindex="0" aria-label="New Significant Financial Interest creation has been initiated. Please review and verify the financial interests.">
                    <p class="mb-5">
                      New Significant Financial Interest creation has been initiated. Please review and verify the financial interests.
                    </p>
                </div>
            </div>
           </div>
            <div class="modal-footer">
              <button type="button" title="Click to view SFI details" (click)="editSfiDetails(concurrencyPersonEntityId)"
                class="align-items-center btn btn-outline-primary d-flex fs-14" data-bs-dismiss="modal" tabindex="0" aria-label="View" role="button">
                <mat-icon class="me-1">visibility</mat-icon>
                View
              </button>
            </div>
        </div>
    </div>
</div>
