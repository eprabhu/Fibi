<div class="mt-3 mx-0 row">
</div>
<div class="card-body bg-white mt-1">
    <div class="form-row justify-content-center " *ngIf="coiFinancialEntityDetails?.length">
        <div class="form-group searchBox col-lg">
            <input type="text" placeholder="Search by SFI" class="ng-pristine ng-valid ng-touched form-control"
                   [(ngModel)]="searchText ">
            <a class="searchButton">
                <i aria-hidden="true" class="fa fa-search fa-med pt-2 mr-4"></i>
            </a>
        </div>
        <div class="col-lg-auto" *ngIf="isEditMode">
            <button class="btn btn-tertiary mt-0 " title="Add Significant Financial Interest"
                    [routerLink]="['/fibi/manage-sfi']"
                    [queryParams]="{mode:'edit', isSFINotAvailable: isSFINotAvailable, dId: disclosureId}">
                Add New Significant Financial Interest</button>
            <button class="btn btn-primary mt-0 float-end" title="Proceed to Relationships"
                    [routerLink]="['/fibi/coi/relationship']" (click)="_coiService.stepTabName = 'relationship'">Proceed to Relationships
            </button>
        </div>
    </div>
</div>

<div class=" row p-2 "
    *ngFor="let item of coiFinancialEntityDetails | SearchFilter : searchText :['coiEntity.coiEntityName'] ; let i =index">
    <!-- Main -->
    <div class="border bg-white rounded-3 p-2 d-flex ">
        <div class="col-11 bg-white ">
            <div class=" mt-2 pb-2 pt-3 px-1" style="height: 77px;">
                <div class="m-0 mb-2 row">
                    <div class="col-9 ">
                        <!-- <span class="inactive-ribbon shadow-sm align-items-center d-flex ps-2">Inactive</span> -->
                        <p class="entity-title">
                            <strong>{{item?.coiEntity?.coiEntityName }}</strong>
                        </p>
                    </div>
                    <div class="col-3 text-secondary fs-14">
                        <span class="fw-bold me-2">Entity
                            Type:</span>{{item?.coiEntity?.entityType.description.substr(0, 10)}}
                    </div>
                </div>
                <!-- Under -->
                <div class="align-items-center d-flex fs-14 m-0 row">
                    <div class="col-6 text-secondary">
                        <span class="fw-bold me-3">Relationship:</span>
                        <span class="relationship-pill border px-3 py-1 rounded-4 me-2 pill-color"><span
                                class="fw-medium">Financial:
                            </span> <em *ngFor="let relationship of item?.coiFinancialEntityDetails;let last = last">
                                <span *ngIf="!last">{{relationship?.coiFinancialEntityRelType?.description}},
                                    <!-- {{item?.coiFinancialEntityDetails?.length>1? relationship?.coiFinancialEntityRelType?.description +'#': relationship?.coiFinancialEntityRelType?.description}} -->
                                </span>
                                <span *ngIf="last">{{relationship?.coiFinancialEntityRelType?.description}}
                                </span>
                            </em></span>
                        <span class="relationship-pill border px-3 py-1 me-2 rounded-4 fw-medium pill-color">Travel</span>
                        <span class="relationship-pill border px-3 py-1 rounded-4 fw-medium pill-color">Commitment</span>
                    </div>

                    <div class="align-items-center col-3 d-flex justify-content-between text-secondary">
                        <div>
                            <span class="fw-bold me-2"> Date of creation: </span> {{ item?.coiEntity?.createTimestamp
                            |dateFormatter }}
                        </div>
                    </div>

                    <div class="align-items-center col-3 d-flex justify-content-between text-secondary">
                        <div>
                            <span class="fw-bold me-2"> Relationship Start Date:</span>{{ item?.involvementStartDate
                            |dateFormatter }}
                        </div>
                        <!-- <div>
                            <button class="align-items-center btn btn-outline-primary d-flex fs-14">
                                <mat-icon class="me-1">visibility</mat-icon>
                                View
                            </button>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
        <!-- 2nd row -->
        <div class="col-1 bg-white">
            <div class="bg-white mt-2 pb-2 pt-3 px-1">
                <!-- <mat-icon class="me-1">eye</mat-icon>
                <mat-icon class="me-1">edit</mat-icon> -->
                <button class="btn btn-outline-secondary sfi_action_btn  " style="padding: 3px;" id="view-sfi"
                (click)="openSfiDetails(true, item?.coiFinancialEntityId)">
                    <mat-icon class=" sfi_action_icon">remove_red_eye</mat-icon>
                </button>

                <button class="ms-3 fs-6 btn  btn-outline-secondary sfi_action_btn " style="padding: 3px; " title="Edit"
                    id="edit-sfi">
                    <mat-icon class="sfi_action_icon">edit</mat-icon>
                </button>
            </div>
        </div>
    </div>
</div>