<!-- Proposal Disclosure Modal -->
<div class="modal fade show mySkinDialog" tabindex="-1" id="createProjectDisclosureModal" role="dialog"
    aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg modal-coi" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create Project Disclosure</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" id="support-dissmiss-btn"  aria-label="Close"
                    (click)="clearDisclosureModal()">
                    <!-- <span aria-hidden="true">&times;</span> -->
                </button>
            </div>
            <div class="modal-body modal-body-style pt-2">
                <div class="my-3 mx-0 row">
                    <div class="col-12 pt-2 grey-info font ">
                        <p>Please search your project from the list or manually enter the proposal details to continue
                            with the proposal disclosure.</p>
                    </div>
                </div>
                <div>
                    <span class="project-types-label">Project Type :</span>
                    <div>
                        <ul class="project-types mb-0">
                            <li *ngFor="let type of projectTypes" class="me-5 d-flex align-items-center">
                                <input [(ngModel)]="selectedProjectType" (ngModelChange)="changeProjectType()"
                                       [value]="type.description" class="me-2 cursor-pointer"
                                       type="radio" name="project-type" id="{{type?.description}}">
                                <label class="cursor-pointer" for="{{type?.description}}">{{type?.description}}</label>
                            </li>
                        </ul>
                        <div *ngIf="projectDisclosureValidation?.has('projectSelect')" class="invalid-feedback d-block">
                            {{projectDisclosureValidation?.get('projectSelect')}}
                        </div>
                    </div>
                </div>
                <div class="pt-3" *ngIf="selectedProjectType && !isSearchExternalProject">
                    <label for="proposal-disclosure" class="f-14 mb-3">
                        {{selectedProjectType}} Search</label>
                    <div class="form-row justify-content-center">
                        <div class="col-12 searchBox mb-0">
                            <app-endpoint-search id="proposal-search" [httpOptions]="projectSearchOptions"
                                                 [clearField]="clearProjectField" (onSelect)="selectedProposal($event)"
                                                 [isError]="projectDisclosureValidation?.has('proposalSearch')"
                                                 [placeHolder]="'Search: '+selectedProjectType+' ID, Title, Principal Investigator, Sponsor, '+selectedProjectType+' Lead Unit'">
                            </app-endpoint-search>
                        </div>
                    </div>
                    <div *ngIf="projectDisclosureValidation?.has('proposalSearch')" class="invalid-feedback d-block">
                        {{projectDisclosureValidation?.get('proposalSearch')}}
                    </div>
                    <div *ngIf="isShowResultCard" class="col-lg-12 col-12 mb-4 mt-2 shadow-lg resultCard px-0">
                        <button class="closeResultCard ontop" (click)="clearSearchFields()">
                            <i class="fa fa-times" aria-hidden="true"></i>
                        </button>
                        <div class="row">
                            <div class="col-12">
                                <label class="f-14 mt-2 mb-2">{{selectedProjectType}} Title : </label>
                                <span class="ml-2">{{manualProjectAddDetails?.title}}</span>
                            </div>
                            <div class="col-6 mt-2 mb-2">
                                <label class="f-14">Principal Investigator : </label>
                                <span class="ml-2">{{manualProjectAddDetails?.principalInvestigator}}</span>
                            </div>
                            <div class="col-6 mt-2 mb-2">
                                <label class="f-14">Lead Unit : </label>
                                <span class="ml-2">{{manualProjectAddDetails?.unitName}}</span>
                            </div>
                            <div class="col-6 mb-2 mt-2">
                                <label class="f-14">Period : </label>
                                <span class="ml-2">{{manualProjectAddDetails?.startDate | dateFormatter}} -
                                    {{manualProjectAddDetails?.endDate | dateFormatter}}</span>
                            </div>
                            <div class="col-6 mb-2 mt-2">
                                <label class="f-14">Sponsor : </label>
                                <span class="ml-2">{{manualProjectAddDetails?.sponsor}}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="isSearchExternalProject" class="row">
                    <div class="col-4">
                        <label class="f-14">{{selectedProjectType}} #</label>
                        <input type="text" id="proposal-no" placeholder="{{this.selectedProjectType}} No:" autocomplete="off"
                               [(ngModel)]="manualProjectAddDetails.moduleItemId" class="form-control" />
                    </div>
                    <div class="col-8">
                        <label class="f-14">{{selectedProjectType}} Title</label>
                        <input type="text" id="proposal-no" placeholder="{{this.selectedProjectType}} Title" autocomplete="off"
                               [(ngModel)]="manualProjectAddDetails.title" class="form-control" />
                    </div>
                    <div class="col-4">
                        <label class="f-14">Principal Investigator</label>
                        <app-elastic [options]="piElasticSearchOptions" [clearField]="clearPIField"
                            [placeHolder]="'Type here for Principal Investigator'">
                        </app-elastic>
            
                    </div>
                    <div class="col-4">
                        <label class="f-14">Lead Unit</label>
                        <app-endpoint-search id="prop-LU" [clearField]="clearLUField" [httpOptions]="unitHttpOptions"
                            [placeHolder]="'Type here for Lead Unit'">
                        </app-endpoint-search>
                    </div>
                    <div class="col-4">
                        <label class="f-14">Prime Sponsor</label>
                        <app-endpoint-search [httpOptions]="sponsorSearchOptions" [clearField]="clearSponsorField"
                            [placeHolder]="'Sponsor'">
                        </app-endpoint-search>
                    </div>
                </div>
                <div *ngIf="selectedProjectType" class="fs-14-nav mt-4 text-primary" style="text-decoration: underline;cursor: pointer;" >
                    <a *ngIf="!isSearchExternalProject"
                        (click)="switchExternalProject(true);"  >Unable to find your <span class="fw-500">{{selectedProjectType}}</span>  from
                        the List?</a>
                    <a *ngIf="isSearchExternalProject"
                        (click)="switchExternalProject(false);">Back to <span class="fw-500">{{selectedProjectType}}</span> search list</a>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary fs-15" data-bs-dismiss="modal"
                    (click)="clearDisclosureModal(); isSearchExternalProject = false">Cancel</button>
                <button type="button" class="btn btn-primary fs-15 " (click)="createProjectDisclosureAPI();">
                    Continue with Project Disclosure
                </button>
            </div>
        </div>
    </div>
</div>
