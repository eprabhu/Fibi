
<div #defineRelationOverlay class="overlay">
<div class="slider-base">
  <app-slider-close-btn (closeAction)="hideSfiNavBar($event)"></app-slider-close-btn>
  <div class="slider-container">
      <div class="relationship-details-box card" id="relationship-details-box">
        <div class="col-12 d-flex">
          <span class="active-ribbon shadow-sm align-items-center d-flex ps-2"><span class="px-2">{{selectedProject?.moduleCode == 3 ? 'Proposal' : 'Award'}}</span></span>
          <p class="entity-title mt-3" *ngIf="selectedProject?.moduleCode == 3">
              <span class="fw-600 fs-16">{{selectedProject?.moduleItemId}} - {{selectedProject?.title}} </span>
          </p>
          <p class="entity-title mt-3" *ngIf="selectedProject?.moduleCode == 1">
            <span class=" fw-600 fs-16">#{{selectedProject?.moduleItemKey}} - {{selectedProject?.title}} </span>
          </p>
        </div>
        <div class="row ml-2 mb-3">
          <div class="col-4">
            <label class="label-text">Sponsor :</label>
            <span class="ml-2 grey-text">{{selectedProject?.sponsor}}</span>
          </div>
          <div class="col-4">
            <label class="label-text">Prime Sponsor :</label>
          <span *ngIf="selectedProject?.primeSponsor" class="ml-2 grey-text">{{selectedProject?.primeSponsor}}</span>
          <span *ngIf="!selectedProject?.primeSponsor" class="noDataExists">--No Data--</span>
          </div>
          <div class="col-4">
            <label class="label-text">{{selectedProject?.moduleCode == 3 ? 'Proposal' : 'Award'}} Status : </label>
            <span class="ml-2 grey-text">{{selectedProject?.moduleStatus}}</span>
          </div>

          <div class="col-4">
            <label class="label-text">{{selectedProject?.reporterRole}} :</label>
            <span class="ml-2 grey-text">{{selectedProject?.principalInvestigator}}</span>
          </div>
          <div class="col-8">
            <label class="label-text">Lead Unit :</label>
          <span class="ml-2 grey-text" *ngIf="selectedProject?.unitName">{{selectedProject?.unitNumber}} - {{selectedProject?.unitName}}</span>
          <span *ngIf="!selectedProject?.unitName" class="noDataExists">No Lead Unit exist</span>
          </div>

          <div class="col-4">
            <label class="label-text">Project Role : </label>
            <span class="ml-2 grey-text">{{selectedProject?.reporterRole}}</span>
          </div>
          <div class="col-8">
            <label class="label-text">Period :</label>
            <span class="ml-2 grey-text">{{selectedProject?.startDate | dateFormatter}} - {{selectedProject?.endDate | dateFormatter}}</span>
          </div>
        </div>
      </div>
      <div class="relationship-info card d-flex grey-info" *ngIf="isEditMode">
        <span data-bs-toggle="tooltip" title="Update your conflict status." data-bs-placement="top" class="d-inline-block ng-tns-c100-5">
          <mat-icon role="img" class="mat-icon notranslate me-2 info-icon ng-tns-c100-5 material-icons mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font">info</mat-icon>
        </span>
        <div class="info-text fs-14">
          <div>
            <i class="fa fa-angle-double-right mr-2" aria-hidden="true"></i>For marking all your SFI conflict status/ relationship description use "Apply and Save".
          </div>
          <div>
            <i class="fa fa-angle-double-right mr-2" aria-hidden="true"></i>For marking individual SFI conflict status/ relationship description use "Save".
          </div>
        </div>
      </div>
      <app-SFI-conflict-relationship [isEditMode]="isEditMode" [coiStatusCode]="coiStatusCode" [coiStatusList]="coiStatusList"
      [entityProjectDetails]="entityProjectDetails" [coiDescription]="coiDescription"
      [selectedProject]="selectedProject" [coiData]="coiData" [clearIndex]="clearIndex" [moduleCode]="moduleCode"></app-SFI-conflict-relationship>
  </div>
</div>
</div>

<button type="button" class="btn btn-primary btn-sm" hidden=true id="hidden-clear-all-button" data-bs-toggle="modal" data-bs-target="#clearConfirmationModal"></button>
<div class="modal fade" id="clearConfirmationModal" tabindex="-1" aria-labelledby="clearConfirmationModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title fs-16" id="exampleModalLabel">Confirmation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" title="Click to close Project -SFI slider"></button>
      </div>
      <div class="modal-body fs-14">
        <p>Do you want to clear all the data entered?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">No</button>
        <button type="button" class="btn btn-primary fs-14" (click)="clearAll()" data-bs-dismiss="modal">Yes</button>
      </div>
    </div>
  </div>
</div>

<button type="button" class="btn btn-primary btn-sm" hidden=true id="hidden-single-clear-button" data-bs-toggle="modal" data-bs-target="#singleClearConfirmationModal"></button>
<div class="modal fade" id="singleClearConfirmationModal" tabindex="-1" aria-labelledby="singleClearConfirmationModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title fs-16" id="exampleModalLabel">Confirmation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body fs-14">
        <p>Do you want to clear the data of <span class="fw-600"> {{entityProjectDetails && entityProjectDetails[clearIndex] && entityProjectDetails[clearIndex]?.personEntity?.coiEntity?.entityName}} </span> values?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">No</button>
        <button type="button" class="btn btn-primary fs-14" (click)="clearSingleEntity()" data-bs-dismiss="modal">Yes</button>
      </div>
    </div>
  </div>
</div>
