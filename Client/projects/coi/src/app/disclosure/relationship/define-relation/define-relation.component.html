<ng-container>
  <app-coi-slider (closeSlider)="validateProjectSfiSliderOnClose()" [elementId]="'relationship-details'">
    <ng-container content>
      <div class="card mb-2" id="relationship-details-body" tabindex="-1">
        <div class="row mx-0 w-100">
          <div class="col-lg px-0">
            <div class="row m-0 position-relative">
              <div class="col-12 ps-0 position-absolute top-0 start-0">
                <div tabindex="-1" class="d-flex"
                  [attr.aria-label]="selectedProject?.projectType + ': number, ' + selectedProject?.projectNumber + ' - ' + selectedProject?.title">
                  <span class="coi-card-notch-ribbon shadow-sm me-2"
                    [style.background-color]="selectedProject?.projectBadgeColour">{{selectedProject?.projectType}}</span>
                    <span class="mt-1 d-inline-flex">
                      <mat-icon *ngIf="selectedProject?.moduleCode != 1" aria-hidden="true" class="coi-text-light flex-shrink-0">text_snippet</mat-icon>
                      <mat-icon *ngIf="selectedProject?.moduleCode == 1" aria-hidden="true" class="coi-text-light flex-shrink-0">workspace_premium</mat-icon>
                      <a tabindex="0" class="fs-6 link-primary cursor-pointer fw-600 text-slice"
                        title="Click here to navigate to project details of #{{selectedProject?.projectNumber}} - {{selectedProject?.title}}"
                        attr.aria-label="Click here to navigate to project details of {{selectedProject?.projectNumber}} - {{selectedProject?.title}}"
                        (click)="commonService.redirectToProjectDetails(selectedProject.projectId, selectedProject.projectTypeCode)"
                        (keyup.enter)="commonService.redirectToProjectDetails(selectedProject.projectId, selectedProject.projectTypeCode)"
                        (keyup.space)="commonService.redirectToProjectDetails(selectedProject.projectId, selectedProject.projectTypeCode)">
                        #{{selectedProject?.projectNumber}} - {{selectedProject?.title}}
                      </a>
                    </span> 
                </div>
              </div>
            </div>
            <div class="row fs-14 px-3 pb-1 pt-3 mt-4">
              <!-- Principal Investigator -->
              <div tabindex="-1" class="col-12 col-md-6 col-lg-4 col-xl-4 col-xxl-3 mb-2"
                [attr.aria-label]="'Principal investigator is ' + (selectedProject?.piName ? selectedProject?.piName : 'empty')">
                <label for="coi-define-relation-pi" class="coi-text-dark d-block">Principal Investigator</label>
                <div id="coi-define-relation-pi" class="text-slice">
                  <app-no-data-label [valueToShow]="selectedProject?.piName">
                      <span [title]="selectedProject?.piName" class="coi-text-light">{{selectedProject?.piName}}</span>
                  </app-no-data-label>
                </div>
              </div>
              <!-- Reporter's Project Role -->
              <div tabindex="-1" class="col-12 col-md-6 col-lg-4 col-xl-4 col-xxl-3 mb-2"
                [attr.aria-label]="'Reporters project role is ' + (selectedProject?.reporterRole ? selectedProject?.reporterRole : 'empty')">
                <label for="coi-define-relation-project-role" class="coi-text-dark d-block">Reporter's Project Role</label>
                <div id="coi-define-relation-project-role" class="text-slice">
                  <app-no-data-label [valueToShow]="selectedProject?.reporterRole">
                    <span [title]="selectedProject?.reporterRole" class="coi-text-light">{{selectedProject?.reporterRole}}</span>
                  </app-no-data-label>
                </div>
              </div>
              <!-- Period -->
              <div tabindex="-1" class="col-12 col-md-6 col-lg-4 col-xl-4 col-xxl-3 mb-2"
                [attr.aria-label]="'Period is ' + ((selectedProject?.projectStartDate || selectedProject?.projectEndDate) ?
                ((selectedProject?.projectStartDate | dateFormatter) + ' - ' + (selectedProject?.projectEndDate | dateFormatter))  : 'empty')">
                <label for="coi-define-relation-period" class="coi-text-dark d-block">Period</label>
                <div id="coi-define-relation-period" class="text-slice">
                  <app-no-data-label [valueToShow]="selectedProject?.projectStartDate || selectedProject?.projectEndDate">
                    <span [title]="(selectedProject?.projectStartDate | dateFormatter) + ' - ' + (selectedProject?.projectEndDate | dateFormatter)"
                      class="coi-text-light">{{selectedProject?.projectStartDate | dateFormatter}} - {{selectedProject?.projectEndDate | dateFormatter}}</span>
                  </app-no-data-label>
                </div>
              </div>
              <!-- Project Status -->
              <div tabindex="-1" class="col-12 col-md-6 col-lg-4 col-xl-4 col-xxl-3 mb-2"
                [attr.aria-label]="'Project status is ' + (selectedProject?.projectStatus ? selectedProject?.projectStatus : 'empty')">
                <label for="coi-define-relation-status" class="coi-text-dark d-block">Project Status</label>
                <div id="coi-define-relation-status" class="text-slice">
                  <app-no-data-label [valueToShow]="selectedProject?.projectStatus">
                    <span class="coi-text-light" [title]="selectedProject?.projectStatus">{{selectedProject?.projectStatus}}</span>
                  </app-no-data-label>
                </div>
              </div>
              <!-- Lead Unit -->
              <div tabindex="-1" class="col-12 col-md-6 col-lg-4 col-xl-4 col-xxl-3 mb-2"
                [attr.aria-label]="'Lead unit is ' + (commonService.getPersonLeadUnitDetails(selectedProject) ?
                commonService.getPersonLeadUnitDetails(selectedProject) : 'empty')">
                <label for="coi-define-relation-leadunit" class="coi-text-dark d-block">Lead Unit</label>
                <div id="coi-define-relation-leadunit" class="text-slice">
                  <app-no-data-label [valueToShow]="commonService.getPersonLeadUnitDetails(selectedProject)">
                    <span [title]="commonService.getPersonLeadUnitDetails(selectedProject)"
                      class="coi-text-light">{{commonService.getPersonLeadUnitDetails(selectedProject)}}</span>
                  </app-no-data-label>
                </div>
              </div>
              <!-- Sponsor -->
              <div tabindex="-1" class="col-12 col-md-6 col-lg-4 col-xl-4 col-xxl-3 mb-2"
                [attr.aria-label]="'Sponsor is ' + (getFormattedSponsor(selectedProject?.sponsorCode, selectedProject?.sponsorName) ? getFormattedSponsor(selectedProject?.sponsorCode, selectedProject?.sponsorName) : 'empty')">
                <label for="coi-define-relation-sponsor" class="coi-text-dark d-block">Sponsor</label>
                <div id="coi-define-relation-sponsor" class="text-slice">
                  <app-no-data-label [valueToShow]="getFormattedSponsor(selectedProject?.sponsorCode, selectedProject?.sponsorName)">
                    <span class="coi-text-light" [title]="getFormattedSponsor(selectedProject?.sponsorCode, selectedProject?.sponsorName)">{{getFormattedSponsor(selectedProject?.sponsorCode, selectedProject?.sponsorName)}}</span>
                  </app-no-data-label>
                </div>
              </div>
              <!-- Prime Sponsor -->
              <div tabindex="-1" class="col-12 col-md-6 col-lg-4 col-xl-4 col-xxl-3 mb-2"
                [attr.aria-label]="'Prime sponsor is ' + (getFormattedSponsor(selectedProject?.primeSponsorCode, selectedProject?.primeSponsorName) ? getFormattedSponsor(selectedProject?.primeSponsorCode, selectedProject?.primeSponsorName) : 'empty')">
                <label for="coi-define-relation-prime-sponsor" class="coi-text-dark d-block">Prime Sponsor</label>
                <div id="coi-define-relation-prime-sponsor" class="text-slice">
                  <app-no-data-label [valueToShow]="getFormattedSponsor(selectedProject?.primeSponsorCode, selectedProject?.primeSponsorName)">
                    <span class="coi-text-light" [title]="getFormattedSponsor(selectedProject?.primeSponsorCode, selectedProject?.primeSponsorName)">{{getFormattedSponsor(selectedProject?.primeSponsorCode, selectedProject?.primeSponsorName)}}</span>
                  </app-no-data-label>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-xl-center align-items-center border-prev-nxt col-md-12 col-xl-2 p-md-2 p-xl-3">
            <div class="row w-100 ps-md-3 ps-xl-0">
              <div class="col-auto">
                <span class="d-flex align-items-center mt-md-1 mt-xl-0 f-13 fw-600 text-gray-600">{{currentRelation + 1}}
                  of {{relationList?.length}}
                  <span class="ms-2" title="Navigate to previous or next projects." data-bs-toggle="tooltip"
                    data-bs-placement="top">
                    <mat-icon role="img" class="mat-icon info-icon mt-1" aria-hidden="true"
                      data-mat-icon-type="font">info</mat-icon>
                  </span>
                </span>
              </div>
              <div class="d-md-flex d-xl-inline col fs-14 gap-3 px-md-0 px-xl-2">
                <button (click)="goBackStep()" [disabled]="currentRelation == 0" aria-label="Click here to Go to previous"
                  id="btn-perious"
                  [title]="coiService.isRelationshipSaving ? 'Please wait for auto save to finish':'Go to previous'"
                  class="d-flex justify-content-center col my-xl-2 btn btn-outline-secondary w-100 flex-shrink-0 gap-1">
                  <mat-icon>keyboard_backspace</mat-icon>
                  Previous
                </button>
                <button (click)="goToStep()" [disabled]="currentRelation == (relationList?.length - 1)" aria-label="Click here to Go to Next"
                  id="btn-next"
                  [title]="coiService.isRelationshipSaving ? 'Please wait for auto save to finish':'Go to Next'"
                  class="d-flex justify-content-center col btn btn-outline-secondary w-100 flex-shrink-0 gap-1">
                  Next
                  <mat-icon class="keyboard-backspace">keyboard_backspace</mat-icon>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <app-SFI-conflict-relationship [(isSavingRelation)]="coiService.isRelationshipSaving" [isEditMode]="isEditMode" [coiStatusCode]="coiStatusCode" [coiStatusList]="coiStatusList"
      [entityProjectDetails]="entityProjectDetails" [coiDescription]="coiDescription" [isSlider]="true"
      [selectedProject]="selectedProject" [coiData]="coiData" [clearIndex]="clearIndex" [moduleCode]="moduleCode"></app-SFI-conflict-relationship>
    </ng-container>
  </app-coi-slider>
</ng-container>
