<div *ngIf="isToolkitVisible" class="card right-navigation-card mb-3 slideLeft" id="disclosure-toolkit">
    <div class="card-header h-auto d-flex align-items-center border-bottom">
        Navigate to
    </div>
    <div class="card-body p-0 rounded-0">
        <ul class="nav flex-column">
            <li class="nav-item" [ngClass]="{'active':activeNav == 'COI801'}">
                <a class="nav-link" role="link" tabindex="0"
                    title="Go to Screening Questionnaire Section" aria-label="Go to Screening Questionnaire Section"
                    (keyup.enter)="jumpToSection('COI801')" (click)="jumpToSection('COI801')">Screening Questionnaire</a>
            </li>
            <li class="nav-item" [ngClass]="{'active':activeNav == 'COI802'}">
                <a class="nav-link" role="link" tabindex="0"
                    title="Go to SFI's section" aria-label="Go to SFI's section"
                    (keyup.enter)="jumpToSection('COI802')" (click)="jumpToSection('COI802')">Significant Financial Interest</a>
            </li>
            <li class="nav-item" [ngClass]="{'active':activeNav == 'COI803'}">
                <a class="nav-link d-flex align-items-center justify-content-between" role="link" tabindex="0"
                    title="Go to Relationships section" aria-label="Go to Relationships section"
                    (keyup.enter)="jumpToSection('COI803')" (click)="jumpToSection('COI803')">Relationships
                    <ng-container *ngIf="projectList?.length">
                        <mat-icon title="Click here to collapse / expand Relationships section"
                            aria-label="Click here to collapse / expand Relationships section"
                            aria-hidden="true">{{isRelationshipCollapse ? 'keyboard_arrow_up' :'keyboard_arrow_down'}}</mat-icon>
                    </ng-container>
                </a>
                <ul *ngIf="isRelationshipCollapse && projectList?.length" class="right-sub-nav fs-14" id="relationship-chid-section">
                    <li *ngIf="awardList?.length" class="fw-medium sub-nav-inner-list">
                        <span [ngClass]="{'active-sub-nav': activeSubNav === 'AWARD'}"
                            class="ps-active-nav">{{awardList[0]?.projectType}}s</span>
                        <ul class="tree mt-2">
                            <ng-container *ngFor="let award of awardList; let i = index">
                                <li>
                                    <a class="px-2 d-block" role="link" tabindex="0"
                                        [title]="'Go to '+ award?.moduleItemKey +' '+ award?.title +' award'"
                                        [attr.aria-label]="'Go to '+ award?.moduleItemKey +' '+ award?.title +' award'"
                                        (keyup.enter)="jumpToProjectSection('COI803',award?.projectType,award.projectTypeCode,award?.projectId); openProjectRelationships(award, i)"
                                        (click)="jumpToProjectSection('COI803',award?.projectType,award.projectTypeCode,award?.projectId); openProjectRelationships(award, i)"
                                        [ngClass]="{'sub-nav-active': coiSummaryService.activeSubNavItemId === award.projectTypeCode+'-'+award?.projectId}">{{award?.projectNumber}}
                                        {{award?.title.length>51 ? (award?.title | slice:0: 51)+'...': award?.title}}</a>
                                </li>
                            </ng-container>
                        </ul>
                    </li>
                    <li *ngIf="proposalList?.length" class="fw-medium sub-nav-inner-list">
                        <span [ngClass]="{'active-sub-nav': activeSubNav === 'PROPOSAL'}"
                            class="ps-active-nav">{{proposalList[0].projectType}}s</span>
                        <ul class="tree mt-2">
                            <ng-container *ngFor="let proposals of proposalList; let i = index">
                                <li>
                                    <a class="px-2 d-block" role="link" tabindex="0"
                                        [title]="'Go to '+ proposals?.projectNumber +' '+ proposals?.title +' proposal'"
                                        [attr.aria-label]="'Go to '+ proposals?.projectNumber +' '+ proposals?.title +' proposal'"
                                        (click)="jumpToProjectSection('COI803',proposals?.projectType,proposals.projectTypeCode,proposals?.projectId); openProjectRelationships(proposals, i)"
                                        (keyup.enter)="jumpToProjectSection('COI803',proposals?.projectType,proposals.projectTypeCode,proposals?.projectId); openProjectRelationships(proposals, i)"
                                        [ngClass]="{'sub-nav-active': coiSummaryService.activeSubNavItemId === proposals.projectTypeCode+'-'+proposals?.projectId}">{{proposals?.projectNumber}}
                                        {{proposals?.title.length>51 ?(proposals?.title | slice:0:51)+'...' : proposals?.title}}</a>
                                </li>
                            </ng-container>
                        </ul>
                    </li>
                    <li *ngIf="IPList?.length" class="fw-medium sub-nav-inner-list">
                        <span [ngClass]="{'active-sub-nav': activeSubNav === 'IP'}"
                            class="ps-active-nav">{{IPList[0].projectType}}s</span>
                        <ul class="tree mt-2">
                            <ng-container *ngFor="let ipDetails of IPList; let i = index">
                                <li>
                                    <a class="px-2 d-block" role="link" tabindex="0"
                                        [title]="'Go to '+ ipDetails?.projectNumber +' '+ ipDetails?.title +' '+ipDetails?.projectType"
                                        [attr.aria-label]="'Go to '+ ipDetails?.projectNumber +' '+ ipDetails?.title +' '+ipDetails?.projectType"
                                        (click)="jumpToProjectSection('COI803','IP',ipDetails.projectTypeCode,ipDetails?.projectId); openProjectRelationships(ipDetails, i)"
                                        (keyup.enter)="jumpToProjectSection('COI803','IP',ipDetails.projectTypeCode,ipDetails?.projectId); openProjectRelationships(ipDetails, i)"
                                        [ngClass]="{'sub-nav-active': coiSummaryService.activeSubNavItemId === ipDetails.projectTypeCode+'-'+ipDetails?.projectId}">{{ipDetails?.projectNumber}}
                                        {{ipDetails?.title.length>51 ?(ipDetails?.title | slice:0:51)+'...' : ipDetails?.title}}</a>
                                </li>
                            </ng-container>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="nav-item" [ngClass]="{'active':activeNav == 'COI804'}" >
                <a class="nav-link" role="link" tabindex="0"
                    title="Go to Certification section" aria-label="Go to Certification section"
                    (keyup.enter)="jumpToSection('COI804')" (click)="jumpToSection('COI804')">Certification</a>
            </li>
        </ul>
    </div>
</div>
