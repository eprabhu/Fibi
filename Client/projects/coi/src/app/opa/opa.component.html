<div class="row header-sticky mb-2">
    <div class="col-12">
        <!-- new top card -->
        <div class="card coi-card-expanded">
            <div class="row mx-0">
                <div class="col-lg px-0">
                    <div class="card-header px-3">
                        <div class="row flex-grow-1 position-relative pe-3">
                            <div class="col-xl-8 d-flex align-items-center px-0 pe-3">
                                <span class="d-flex" tabindex="0"
                                    [attr.aria-label]="'OPA disclosure'">
                                    <span class="opa-badge shadow-sm d-flex align-items-center bg-opa-clip">
                                        <span>OPA</span>
                                    </span>
                                </span>
                                <h3 class="card-title align-items-start flex-column fs-16 mb-0">
                                        <span class="link-primary text-dark cursor-pointer text-decoration-underline" tabindex="0" (click)="openDetailModal()"
                                            (keyup.enter)="openDetailModal()" (keyup.space)="openDetailModal()"
                                            [attr.aria-label]="opa?.opaDisclosure?.personName + opa?.opaDisclosure?.personPrimaryTitle + opa?.opaDisclosure?.homeUnitName + opa?.opaDisclosure?.personEmail"
                                            title="Click to view details of {{opa?.opaDisclosure?.personName}}">{{opa?.opaDisclosure?.personName}}
                                        </span>
                                    <div class="m-0">
                                        <span class="coi-text-light">
                                            {{opa?.opaDisclosure?.personPrimaryTitle}} |
                                            <span
                                                class="coi-text-lighter">{{commonService.getPersonLeadUnitDetails(opa?.opaDisclosure)}}</span>
                                            |
                                            {{opa?.opaDisclosure?.personEmail}}
                                        </span>
                                    </div>
                                </h3>
                            </div>
                            <div class="d-flex justify-content-end align-items-center col-xl-4">
                                <div class="card-toolbar ms-auto">
                                    <div class="align-items-center d-flex f-14">
                                        <!-- <a class="link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover me-2"
                                            [class.link-primary]="4">
                                            Trainings({{1}})
                                        </a> | -->
                                        <span class="cursor-pointer ms-2 me-2"
                                            tabindex="0"
                                            (click)="openSlider('ENTITY', opa?.opaDisclosure?.personEntitiesCount)"
                                            (keyup.enter)="openSlider('ENTITY', opa?.opaDisclosure?.personEntitiesCount)" (keyup.space)="openSlider('ENTITY', opa?.opaDisclosure?.personEntitiesCount)"
                                            [class.link-primary]="opa?.opaDisclosure?.personEntitiesCount">
                                            Entities({{opa?.opaDisclosure?.personEntitiesCount}})
                                        </span> |
                                        <span class="cursor-pointer ms-2 me-2"
                                            tabindex="0"
                                            (click)="openSlider('NOTES',opa?.opaDisclosure?.personNotesCount)"
                                            (keyup.enter)="openSlider('NOTES',opa?.opaDisclosure?.personNotesCount)" (keyup.space)="openSlider('NOTES',opa?.opaDisclosure?.personNotesCount)"
                                            [class.link-primary]="opa?.opaDisclosure?.personNotesCount">
                                            Notes({{opa?.opaDisclosure?.personNotesCount}})
                                        </span> |
                                        <span class="cursor-pointer ms-2 me-3"
                                            tabindex="0"
                                            (click)="openSlider('ATTACHMENTS',opa?.opaDisclosure?.personAttachmentsCount)"
                                            (keyup.enter)="openSlider('ATTACHMENTS',opa?.opaDisclosure?.personAttachmentsCount)" (keyup.space)="openSlider('ATTACHMENTS',opa?.opaDisclosure?.personAttachmentsCount)"
                                            [class.link-primary]="opa?.opaDisclosure?.personAttachmentsCount">
                                            Attachments({{opa?.opaDisclosure?.personAttachmentsCount}})
                                        </span>
                                        <button (click)="collapseHeader()"
                                            title="Click to {{isCardExpanded ? 'collapse' : 'view'}} OPA Disclosure"
                                            attr.aria-label="{{ isCardExpanded ? 'collapse' : 'view' }} OPA Disclosure"
                                            class="toggle-btn align-items-center border btn d-flex justify-content-center p-0 rounded-5 shadow-sm">
                                            <mat-icon class="collapse-icon">{{isCardExpanded ? 'expand_less' : 'expand_more'}}</mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body" *ngIf="isCardExpanded">
                        <div class="row gap-0">
                            <div class="col-6 col-xxl-5">
                                <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                    <span class="coi-text-darker fs-6 coi-field-set">Details</span>
                                    <div class="row">
                                        <div class="col-lg-6 mt-3 pe-0">
                                            <label class="coi-text-dark d-block">
                                                <i aria-hidden="true"
                                                    class="fa fa-user-o fw-700 me-1"></i>Administrator
                                            </label>
                                            <span class="coi-text-light">
                                                <app-no-data-label [valueToShow]="opa?.opaDisclosure?.adminPersonName">
                                                <span>{{opa?.opaDisclosure?.adminPersonName}}</span>
                                            </app-no-data-label></span>
                                        </div>
                                        <div class="col mt-3 pe-0">
                                            <label class="coi-text-dark d-block">
                                                <img alt="add-adminGroup icon" class="activity-icon"
                                                    src="assets/images/multiple-admin-1.svg">Admin Group
                                            </label>
                                            <span class="coi-text-light">
                                                <app-no-data-label [valueToShow]="opa?.opaDisclosure?.adminGroupId">
                                                    <span>{{opa?.opaDisclosure?.adminGroupName}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-6 col-lg-6 col-xxl-3">
                                <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                    <span class="coi-text-darker fs-6 coi-field-set">Dates</span>
                                    <div class="row">
                                        <div class="col-lg-6 mt-3 pe-0">
                                            <label class="coi-text-dark d-block">
                                                Cycle
                                            </label>
                                            <span class="coi-text-light">
                                                <app-no-data-label [valueToShow]="opa?.opaDisclosure?.opaCycles?.periodStartDate && opa?.opaDisclosure?.opaCycles?.periodEndDate">
                                                    <span>{{opa?.opaDisclosure?.opaCycles?.periodStartDate | dateFormatterWithTimeZone}} -
                                                        {{opa?.opaDisclosure?.opaCycles?.periodEndDate | dateFormatterWithTimeZone}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                        <div class="col-lg-6 mt-3 pe-0">
                                            <label class="coi-text-dark d-block"> Create
                                            </label>
                                            <span class="coi-text-light">
                                                <app-no-data-label [valueToShow]="opa?.opaDisclosure?.createTimestamp">
                                                    <span>{{opa?.opaDisclosure?.createTimestamp | dateFormatterWithTimeZone}}</span>
                                                </app-no-data-label>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-lg-6 col-xxl-4 mt-4 mt-xxl-0">
                                <div class="coi-box-red border border-secondary border-opacity-50 fw-medium p-3 rounded-1 h-100 position-relative">
                                    <span class="coi-text-darker fs-6 coi-field-set">Status</span>
                                    <div class="row">
                                        <div class="col-4 col-lg-4 col-xl-6 mt-3 pe-0">
                                            <label class="coi-text-dark d-block">Disposition
                                            </label>
                                            <app-no-data-label
                                                 [valueToShow]="opa?.opaDisclosure?.dispositionStatusType?.description">
                                            <span class="{{commonService.getDispositionStatusBadge(opa?.opaDisclosure?.dispositionStatusType?.dispositionStatusCode)}}"></span>
                                            <span class="coi-text-light">
                                                {{opa?.opaDisclosure?.dispositionStatusType?.description}}
                                            </span>
                                            </app-no-data-label>
                                        </div>
                                        <div class="col-4 col-lg-4 col-xl-6 mt-3 pe-0">
                                            <label class="coi-text-dark d-block">Review
                                            </label>
                                            <app-no-data-label
                                                [valueToShow]="opa?.opaDisclosure?.reviewStatusType?.description">
                                            <span class="{{commonService.getReviewStatusBadge(opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode)}}"></span>
                                            <span class="coi-text-light">
                                                {{opa?.opaDisclosure?.reviewStatusType?.description}}
                                            </span>
                                            </app-no-data-label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 border-prev-nxt ng-tns-c246-40 ng-star-inserted" ng-reflect-ng-class="">
                    <div class="h-100" *ngIf="isCardExpanded">
                        <div class="d-grid gap-2 d-md-flex flex-md-wrap mb-2 mt-3">
                            <button title="Go to OPA home page" (click)="goToHomeUrl()" id="opa_home_btn" aria-label="GO TO O P A home"
                                role="button" class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col fs-14">
                                <mat-icon>home</mat-icon>
                            </button>
                            <button (click)="location.back()" title="Go to Back" id="opa_back_btn"
                                class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col fs-14"
                                aria-label="Go to Back" role="button">
                                <mat-icon class="me-2">reply</mat-icon>
                                Back
                            </button>
                            <button *ngIf="opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode != '1'" [matMenuTriggerFor]="beforeMenu"
                                class="btn btn-outline-grey d-inline-flex align-items-center justify-content-center col fs-14" role="button"
                                title="Click for More Actions" id="opa_more_actions_btn" aria-label="More Actions">
                                <mat-icon class="moreActionIcon">more_vert</mat-icon>
                            </button>
                            <button *ngIf="dataStore.isFormEditable()" title="Click to save your progress" id="opa_save_btn"
                                (click)="triggerSave()" aria-label="Save" role="button"
                                class="btn btn-primary d-inline-flex align-items-center justify-content-center fs-14 col-12">
                                <mat-icon class="me-2">save</mat-icon>
                                Save
                            </button>
                            <button (click)="opaSubmissionModal()" *ngIf="dataStore.isFormEditable()" aria-label="Certify and Submit"
                                role="button" class="btn btn-primary d-inline-flex align-items-center justify-content-center fs-14 col-12"
                                title="Click to submit your disclosure" id="opa_submit_btn">
                                <mat-icon class="me-2">done</mat-icon>
                                Certify and Submit
                            </button>
                            <button title="Click to Assign Administrator/Admin Group" aria-describedby="Click to assign administrator"
                                *ngIf="!opa?.opaDisclosure?.adminPersonId && opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode  =='2' && checkForOPAAdmin()"
                                class="btn btn-primary d-inline-flex align-items-center justify-content-center fs-14 col-12"
                                aria-label="Assign Admin" role="button" (click)="openAddAssignModal();" id="opa_assign_admin_btn">
                                <mat-icon class="me-1">group_add</mat-icon>
                                <span class="mt-1 ms-2"> Assign Admin </span>
                            </button>
                            <button *ngIf="!dataStore.isFormEditable()" title="Click here to add new comment"
                                (click)="openReviewComment()" id="opa_add_comments_btn" aria-label="Comments" role="button"
                                class="d-flex align-items-center justify-content-center btn btn-outline-grey fs-14 col-12">
                                <mat-icon class="me-2">rate_review</mat-icon>
                                <span>Comments</span>
                            </button>
                            <button class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center col-12" *ngIf="['2','3', '8'].includes(opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode)
                                                    && checkForOPAAdmin() && isLoggedInUser(opa?.opaDisclosure?.adminPersonId)"
                                aria-label="Complete Review" role="button" id="opa_complete_review_btn" title="Click here to complete review"
                                data-bs-target="#completeReviewModalFromDashboard" data-bs-toggle="modal">
                                <mat-icon class="me-2">done</mat-icon>
                                <span class="mt-1 ms-2"> Complete Review </span>
                            </button>
                            <button title="Click to start review" id="opa_start_reviewer_review_btn" aria-describedby="Click to start review"
                                (click)="updateOpaReview('START')" aria-label="Start Review" role="button"
                                *ngIf="opaService.isStartReview && opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode === '7'"
                                class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center">
                                <mat-icon class="material-icons-outlined">play_circle_filled</mat-icon>
                                <span class="mt-1 ms-2"> Start Review </span>
                            </button>
                            <button title="Click to complete review" id="opa_complete_reviewer_review_btn"
                                aria-describedby="Click to complete review"
                                *ngIf="opaService.isCompleteReview && opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode === '7'"
                                (click)="updateOpaReview('COMPLETE')" aria-label="Complete Review" role="button"
                                class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center">
                                <mat-icon class="material-icons-outlined">stop_circle</mat-icon>
                                <span class="mt-1 ms-2"> Complete Review </span>
                            </button>
                            <div class="fs-14 ash-text">
                                <label class="coi-text-lighter fs-13 fw-medium d-block">Last Updated By</label>
                                <span class="coi-text-dark fs-13 fw-normal">{{opa?.opaDisclosure?.updateUserFullName}} On
                                    {{opa?.opaDisclosure?.updateTimestamp |
                                    dateFormatterWithTimeZone:'long'}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="h-100" *ngIf="!isCardExpanded">
                        <div class="d-grid gap-2 d-md-flex flex-md-wrap mb-2 mt-3">
                            <button title="Go to OPA home page" class="btn btn-outline-grey pb-0 fs-14 col fit-height" aria-label="GO TO O P A home"
                                id="opa_home_btn" (click)="goToHomeUrl()">
                                <mat-icon>home</mat-icon>
                            </button>
                            <button title="Go to Back" class="btn btn-outline-grey pb-0 fs-14 col fit-height" (click)="location.back()"
                                id="opa_back_btn" aria-label="Back">
                                <mat-icon>reply</mat-icon>
                            </button>
                            <button *ngIf="opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode != '1'" [matMenuTriggerFor]="beforeMenu"
                                class="text-nowrap d-flex align-items-center justify-content-center btn btn-outline-grey fs-14 col px-3 fit-height"
                                role="button" title="Click for More Actions" aria-label="More Actions" id="opa_more_actions_btn">
                                <mat-icon class="moreActionIcon">more_vert</mat-icon>
                                <span *ngIf="isCardExpanded">More Actions</span>
                            </button>
                            <button
                                *ngIf="!opa?.opaDisclosure?.adminPersonId && opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode =='2' && checkForOPAAdmin()"
                                title="Click to Assign Administrator/Admin Group" area-describedby="Click to assign administrator"
                                class="fs-14 btn btn-primary d-flex justify-content-center w-100 col align-items-center"
                                (click)="openAddAssignModal();" aria-label="Assign Admin" id="opa_assign_admin_btn">
                                <mat-icon class="me-1">group_add</mat-icon>
                            </button>
                            <button title="Click here to add new comment"
                                *ngIf="!['1', '5', '6'].includes(opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode)"
                                (click)="openReviewComment()" id="opa_add_comments_btn"
                                class="d-flex align-items-center justify-content-center btn btn-outline-grey fs-14 col" aria-label="Comments">
                                <mat-icon>rate_review</mat-icon>
                            </button>
                            <button *ngIf="dataStore.isFormEditable()" (click)="triggerSave()" aria-label="Save"
                                title="Click to save your progress" id="opa_save_btn" class="btn btn-primary pb-0 fs-14 col fit-height">
                                <mat-icon>save</mat-icon>
                            </button>
                            <button *ngIf="dataStore.isFormEditable()" (click)="opaSubmissionModal()" title="Click to submit your disclosure"
                                id="opa_submit_btn" aria-label="Certify and Submit" class="btn btn-primary pb-0 fs-14 col fit-height">
                                <mat-icon>done</mat-icon>
                            </button>
                            <button *ngIf="['2','3', '8'].includes(opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode)
                                                               && checkForOPAAdmin() && isLoggedInUser(opa?.opaDisclosure?.adminPersonId)"
                                title="Click to complete review" id="opa_complete_review_btn" aria-label="Complete Review"
                                class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center col"
                                data-bs-target="#completeReviewModalFromDashboard" data-bs-toggle="modal">
                                <mat-icon class="me-2">done</mat-icon>
                            </button>
                            <button *ngIf="opaService.isStartReview && opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode === '7'"
                                title="Click to start review" aria-describedby="Click to start review" (click)="updateOpaReview('START')"
                                aria-label="Start Review" id="opa_start_reviewer_review_btn"
                                class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center col">
                                <mat-icon class="material-icons-outlined mb-1">play_circle_filled</mat-icon>
                            </button>
                            <button *ngIf="opaService.isCompleteReview && opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode === '7'"
                                title="Click to complete review" aria-describedby="Click to complete review"
                                (click)="updateOpaReview('COMPLETE')" aria-label="Complete Review" id="opa_complete_reviewer_review_btn"
                                class="fs-14 btn btn-primary d-flex justify-content-center w-100 align-items-center col">
                                <mat-icon class="material-icons-outlined">stop_circle</mat-icon>
                            </button>
                        </div>
                        <div class="fs-14 ash-text">
                            <label class="coi-text-lighter fs-13 fw-medium me-1">Last Updated By</label>
                            <span class="coi-text-dark fs-13 fw-normal">{{opa?.opaDisclosure?.updateUserFullName}} On {{opa?.opaDisclosure?.updateTimestamp |
                                dateFormatterWithTimeZone:'long'}}</span>
                        </div>
                    </div>
                    <mat-menu #beforeMenu="matMenu" xPosition="before">
                        <ng-container
                            *ngIf="opa?.opaDisclosure?.adminPersonId && ['2','3', '7', '8'].includes(opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode) && checkForOPAAdmin()">
                            <button mat-menu-item title="Click to Reassign Administrator/Admin Group"
                                    area-describedby="Click to assign administrator"
                                    tabindex="0"
                                    id="opa_reassign_admin"
                                    class="text-nowrap border-0 rounded-0 btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action"
                                    (click)="openAddAssignModal();"
                                    [ngClass]="(opa?.opaDisclosure?.adminPersonId || opa?.opaDisclosure?.adminGroupId)?'btn-primary-icon':'btn btn-primary'">
                                <mat-icon>group_add</mat-icon>
                                <span class="ms-2 fw-medium fs-14">Reassign Admin</span>
                            </button>
                        </ng-container>

                        <!-- Withdrawn option only shown for reviewStatusCode(2-submitted)-->
                        <!-- check logged person & disclosure created person is same -->
                        <button mat-menu-item *ngIf="opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode == '2' && !(opa?.opaDisclosure?.adminPersonId) &&
                            (commonService?.getCurrentUserDetail('personId') == opa?.opaDisclosure?.personId)"
                                title="Click to Withdraw"
                                area-describedby="Click to Withdraw"
                                tabindex="0"
                                id="opa_withdraw"
                                class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action"
                                (click)="openConfirmationModal('Withdraw', withdrawHelpTexts, withdrawErrorMsg);">
                            <mat-icon>logout</mat-icon>
                            <span class="ms-2 fw-medium fs-14">Withdraw</span>
                        </button>

                        <!-- return to pi -->
                        <!-- reviewStatusCode-(3-Review In Progress, 7-Review Assigned, 8-Assigned Review Completed) -->
                        <!-- Check logged person and administrator are same -->
                        <button mat-menu-item *ngIf="opa?.opaDisclosure?.adminPersonId && ['3','7','8'].includes(opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode) &&
                                    (commonService?.getCurrentUserDetail('personId') == opa?.opaDisclosure?.adminPersonId)"
                                title="Click to Return Disclosure"
                                tabindex="0"
                                id="opa_return"
                                (click)="openConfirmationModal('Return', returnHelpTexts, returnErrorMsg);"
                                class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                            <mat-icon class="returnIcon">refresh</mat-icon>
                            <span class="ms-1 fw-medium fs-14">Return</span>
                        </button>
                        <button mat-menu-item title="Click to Notify"
                                tabindex="0"
                                id="opa_notify"
                                class="text-nowrap border-0 rounded-0 btn btn-primary-icon fs-14 d-flex justify-content-start w-100 align-items-center more-action">
                            <mat-icon class="returnIcon">notifications</mat-icon>
                            <span class="ms-1 fw-medium fs-14">Notify</span>
                        </button>
                    </mat-menu>
                </div>
            </div>
        </div>
        <!-- new top card ends -->
    </div>
    <div class="col-lg-12">
        <div class="navigation-tabs d-flex align-items-center">
            <div [routerLink]="['form']" (click)="setTopDynamically()" class="navigation-box border-end" queryParamsHandling='merge'
                 role="button">
                <div class="navigation-box-content" routerLinkActive="active"
                     title="Click to view the disclosure screening form"
                     area-describedby="Click to view the disclosure screening form">OPA Report
                </div>
            </div>
            <div *ngIf="opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode !== '1' && checkForOPAAdmin()" [routerLink]="['review']" class="navigation-box border-end" queryParamsHandling='merge'
                 role="button">
                <div class="navigation-box-content" routerLinkActive="active" title="Click to view the reviews"
                     area-describedby="Click to view the reviews">Reviews
                </div>
            </div>
            <div *ngIf="opa?.opaDisclosure?.reviewStatusType?.reviewStatusCode !== '1'" [routerLink]="['history']" class="navigation-box" queryParamsHandling='merge'
                 title="click to view history" role="button">
                <div class="navigation-box-content" routerLinkActive="active">History</div>
            </div>
        </div>
    </div>
</div>

<ng-container *ngIf="showSlider">
    <app-header-sliders (closePage)="closeHeaderSlider($event)"
    [coiPersonId] = "opa?.opaDisclosure?.personId" [sliderType]="selectedType"
    [personName]="opa?.opaDisclosure?.personName"></app-header-sliders>
</ng-container>

<div>
    <router-outlet></router-outlet>
</div>

<app-assign-administrator-modal *ngIf="isAddAssignModalOpen" (closeModal)="closeAssignAdministratorModal($event)"
                                [disclosureNumber]="opa?.opaDisclosure?.opaDisclosureNumber" [actionType]="opa?.opaDisclosure?.adminPersonId ? 'R' : 'A'"
                                [path]="'OPA_DISCLOSURES'" [disclosureId]="opa?.opaDisclosure?.opaDisclosureId"
                                [defaultAdminDetails]="defaultAdminDetails">
</app-assign-administrator-modal>

<app-personal-details-modal *ngIf="showPersonDetailsModal" (closeModalPersonDetails)="closePersonDetailsModal($event)"
                            [userdetails]="personDetailsModalVO"></app-personal-details-modal>

<!--Disclosure Withdraw/Return Confirmation Modal-->
<app-confirmation-modal [modalName]="'disclosure-confirmation-modal'"
                        (primaryBtnAction)="performDisclosureAction($event)"
                        [primaryBtnName]="primaryBtnName" [modalSize]="'lg'"
                        [textAreaLabelName]="'Reason for ' + textAreaLabelName"
                        [needDescriptionField]="true" [isMandatory]="true" [descriptionErrorMsg]="descriptionErrorMsg"
                        [primaryBtnTooltip]= "'Click to'+' '+ primaryBtnName +' '+'the disclosure.'" [secondaryBtnTooltip]= "'Click to Cancel'">
    <!-- modal header -->
    <ng-container header>
        <span>{{primaryBtnName}} Disclosure : OPA Disclosure By {{personProjectDetails?.personFullName}}</span>
    </ng-container>
    <!-- modal content -->
    <ng-container content>
        <!-- help text -->
        <div>
            <app-help-text *ngIf="helpTexts.length > 0" [helpTextList]="helpTexts"
                           [tooltip]="primaryBtnName"></app-help-text>
        </div>
        <app-person-project-entity-card [personProjectOrEntity]="personProjectDetails" [disclosureHeaderDetails]="opa.opaDisclosure"></app-person-project-entity-card>
    </ng-container>
</app-confirmation-modal>

<!-- Complete review modal -->
<div class="modal modal-coi fade mySkinDialog" id="completeReviewModalFromDashboard" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header pe-0">
                <h4 class="modal-title">Complete Review
                </h4>
                <button aria-label="Close" class="btn-close me-3 fs-12" data-bs-dismiss="modal" id="dissmiss-btn"
                        type="button">
                </button>
            </div>
            <div class="modal-body">
                <div class="row mt-2 mb-0">
                    <div class="col-lg-12">
                        <p class="fs-14">Are you sure you want to complete the review of this OPA disclosure?</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline-secondary fs-14" data-bs-dismiss="modal" type="button">Cancel
                </button>
                <button (click)="completeDisclosureReview()" class="btn btn-primary fs-14" data-bs-dismiss="modal"
                        type="button">Complete Review
                </button>
            </div>
        </div>
    </div>
</div>
<app-reviewer-action-modal *ngIf="opaService.isEnableReviewActionModal"></app-reviewer-action-modal>

<div *ngIf="opaService.isShowCommentNavBar">
    <app-review-comments-slider  (closePage)="closeReviewComment($event)" [disclosureDetails]="opa.opaDisclosure" [disclosureType]="'OPA'"></app-review-comments-slider>
</div>

<!--opa submit confirmation modal-->
<div class="modal fade mySkinDialog" tabindex="-1" id="opa-submit-confirm-modal" tabindex="-1" role="dialog" data-backdrop="static"
    data-keyboard="false" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header" id="opa-submit-confirmation-header">
                <h4 class="fs-16"><strong> OPA Disclosure </strong></h4>
                <button type="button" id="opa-submit-close-btn" class="btn-close fs-12" data-bs-dismiss="modal"
                    aria-label="Close">
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12">
                           <p class="fs-14">Are you sure you want to submit the <strong>OPA</strong> disclosure?</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <ng-container>
                    <button class=" btn btn-outline-secondary" data-bs-dismiss="modal" id="opa-submit-dismiss-btn" title="Click to cancel">Cancel</button>
                    <button (click)="saveAndSubmit()" class=" btn btn-primary btn-sm fs-14" data-bs-dismiss="modal"
                        id="opa-submit-btn" title="Click to submit">Submit</button>
                </ng-container>
            </div>
        </div>
    </div>
</div>

<app-concurrency-warning-modal *ngIf="opaService.concurrentUpdateAction" [sectionName]="opaService.concurrentUpdateAction" (closePage)="cancelConcurrency()"></app-concurrency-warning-modal>

<!--Unsaved Changes confirmation Modal-->
<app-confirmation-modal [modalName] = "'opa-unsaved-changes-modal'" (secondaryBtnAction)="leavePageClicked()"
                        [primaryBtnName]="'Stay On Page'" [secondaryBtnName]="'Leave Page'">
    <!-- modal header -->
    <ng-container header>
        <span>Confirmation</span>
    </ng-container>
    <!-- modal content -->
    <div content class="ms-2">
        <p class="fs-14">Do you want to leave the page without saving</p>
    </div>
</app-confirmation-modal>
<!--Unsaved Changes confirmation Modal end-->
