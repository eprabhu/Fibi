<div class="row">
  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 padding-tbx">
    <div class="card mb-3">
      <div class="card-header py-2">
        <h5 class="card-title d-flex align-items-center">{{heading}}
          <div class="ml-auto">
            <span class="mr-2">Export as:</span>
            <a title="Export data to Excel sheet" (click)="exportAsTypeDoc('excel')"><i aria-hidden="true"
                class="fa fa-file-excel-o hand-cursor mr-2"></i></a>
            <a class="mr-2">|</a>
            <a title="Export data to PDF document" (click)="exportAsTypeDoc('pdf')"><i aria-hidden="true"
                class="fa fa-file-pdf-o hand-cursor"></i></a>
            <span>
              <button class="btn more-btn" title="Back to My Dashboard" type="button" [routerLink]="['fibi/dashboard']">
                <i class="fa fa-reply" aria-hidden="true"></i></button>
            </span>
          </div>
        </h5>
      </div>
      <div class="card-content">
        <div class="card-body">
          <div class="table-responsive" *ngIf="detailedViewOfWidget !=null && detailedViewOfWidget?.length !=0">
            <!-- Institute Proposal By Sponsor - Current FY (2022) widget's expanded view table -->
            <table class="table tableSkin" *ngIf="!isPendingIPWidget">
              <thead>
                <th width="10%" (click)="isDesc =!isDesc;sortBy(0)">ID
                  <i [ngClass]="((column == 0) ? (isDesc ? 'fa fa-sort-numeric-asc sortIcon' : 'fa fa-sort-numeric-desc sortIcon') : 'fa fa-sort-numeric-asc blrcolor')"
                    aria-hidden="true"></i>
                </th>
                <th width="20%" (click)="isDesc =!isDesc;sortBy(1)">Title
                  <i [ngClass]="((column == 1) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                    aria-hidden="true"></i>
                </th>
                <th width="15%" (click)="isDesc =!isDesc;sortBy(2)">Principle Investigator
                  <i [ngClass]="((column == 2) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                    aria-hidden="true"></i>
                </th>
                <th width="10%" (click)="isDesc =!isDesc;sortBy(3)">Activity Type
                  <i [ngClass]="((column == 3) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                    aria-hidden="true"></i>
                </th>
                <th width="8%" (click)="isDesc =!isDesc;sortBy(4)">Type
                  <i [ngClass]="((column == 4) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                    aria-hidden="true"></i>
                </th>
                <th width="8%" (click)="isDesc =!isDesc;sortBy(5)">Status
                  <i [ngClass]="((column == 5) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                    aria-hidden="true"></i>
                </th>
                <th width="15%" (click)="isDesc =!isDesc;sortBy(6)">Sponsor
                  <i [ngClass]="((column == 6) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                    aria-hidden="true"></i>
                </th>
                <th width="15%" (click)="isDesc =!isDesc;sortBy(7)">Submission Date
                  <i [ngClass]="((column == 7) ? (isDesc ? 'fa fa-sort-numeric-asc sortIcon' : 'fa fa-sort-numeric-desc sortIcon') : 'fa fa-sort-numeric-asc blrcolor')"
                    aria-hidden="true"></i>
                </th>
                <th width="5%">Actions</th>
              </thead>
              <tbody>
                <tr
                  *ngFor="let detailsData of detailedViewOfWidget | orderByIndex: {property: column, direction: direction}">
                  <td>{{detailsData[0]}}</td>
                  <td>{{detailsData[1]}}</td>
                  <td>{{detailsData[2]}}</td>
                  <td>{{detailsData[3]}}</td>
                  <td>{{detailsData[4]}}</td>
                  <td>{{detailsData[5]}}</td>
                  <td>{{detailsData[6]}}</td>
                  <td>{{detailsData[7] | dateFormatter}}</td>
                  <td>
                    <ul class="actionButtonGroup">
                      <li><a class="pointer" title="Open institute proposal "
                          (click)="openInstituteProposal(detailsData[8])">
                          <i aria-hidden="true" class="fa fa-eye"></i>
                        </a>
                      </li>
                    </ul>
                  </td>
                </tr>
              </tbody>
            </table>
            <!-- Pending Institute Proposal By Sponsor Type widget's expanded view table -->
            <table *ngIf="isPendingIPWidget" class="table tableSkin">
              <caption class="sr-only">Proposal List</caption>
              <thead>
                  <tr>
                      <th scope="col" width="12%" (click)="isDesc =!isDesc;sortBy(0)">Institute Proposal#
                          <i [ngClass]="((column == 0) ? (isDesc ? 'fa fa-sort-numeric-asc sortIcon' : 'fa fa-sort-numeric-desc sortIcon') : 'fa fa-sort-numeric-asc blrcolor')"
                          aria-hidden="true"></i>     
                      </th>
                      <th scope="col" width="20%" (click)="isDesc =!isDesc;sortBy(1)">Title
                          <i [ngClass]="((column == 1) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                          aria-hidden="true"></i>     
                      </th>
                      <th scope="col" width="20%" (click)="isDesc =!isDesc;sortBy(2)">Sponsor
                          <i [ngClass]="((column == 2) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                          aria-hidden="true"></i>     
                      </th>
                      <th scope="col" width="10%" (click)="isDesc =!isDesc;sortBy(3)" class = "text-right">Budget
                          <i [ngClass]="((column == 3) ? (isDesc ? 'fa fa-sort-numeric-asc sortIcon' : 'fa fa-sort-numeric-desc sortIcon') : 'fa fa-sort-numeric-asc blrcolor')"
                          aria-hidden="true"></i>      
                      </th>
                      <th scope="col" width="18%" (click)="isDesc =!isDesc;sortBy(4)">Principal Investigator
                          <i [ngClass]="((column == 4) ? (isDesc ? 'fa fa-sort-alpha-asc sortIcon' : 'fa fa-sort-alpha-desc sortIcon') : 'fa fa-sort-alpha-asc blrcolor')"
                          aria-hidden="true"></i>     
                      </th>
                      <th scope="col" width="5%">Actions</th>
                  </tr>
                  </thead>    
              <tbody>
              <tr *ngFor="let proposalDetails of detailedViewOfWidget  | orderByIndex: {property: column, direction: direction}">                                    <td>{{proposalDetails[0]}}</td>
                  <td class="text-break">{{proposalDetails[1]}}</td>
                  <td>{{proposalDetails[2]}}</td>
                  <td class = "text-right">
                          {{proposalDetails[3] ? (proposalDetails[3] | customCurrency: 2) : '-'}}
                  </td>
                  <td>{{proposalDetails[4]}}</td>
                  <td>
                      <ul class="actionButtonGroup">
                          <li><a (click)="openInstituteProposal(proposalDetails[5])">
                            <i aria-hidden="true" class="fa fa-eye"></i>
                          </a>
                          </li>
                      </ul>
                  </td>
              </tr>
              </tbody>
          </table>
          </div>
          <div *ngIf="detailedViewOfWidget?.length == 0" class="noDataOnChart noDataExists">
            <div class="no-data-container">
              <span class="no-data-icon-outer">
                <div class="no-data-icon">
                  <i aria-hidden="true" class="fa fa-file-o"></i>
                  <i aria-hidden="true" class="fa fa-times-circle-o"></i>
                </div>
              </span>
              <h4>There is no information in this section.</h4>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
