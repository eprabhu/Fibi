<div class="card mt-3" id="grantCallKpi">
  <div class="card-content">
    <div class="card-body">
      <div class="row">
        <div class="col-12">
          <div *ngIf="searchList!=null" class="mt-3">
            <div class="card" *ngFor="let kpi of searchList; let index = index;">
              <div  *ngIf="kpi.isActive || kpiSelectedList[index].kpiSelected" class="card-content">
                <div class="card-body p-0">
                  <div class="card ">
                    <div  class="card-header px-3  pb-0">
                      <h4 class="card-title" id="kpi-description">{{kpi.description}}
                        <span class="float-right mr-5">
                          <a *ngIf="kpiSelectedList[index].kpiSelected == false;">
                            <label class="switch px-0 f-14">
                              <input type="checkbox" [disabled]="disabled" (click)="addKpiToList(index,kpi)">
                              <span class="slider round"><small class="deactivate-text">No</small></span>
                            </label>
                          </a>
                          <a *ngIf="kpiSelectedList[index].kpiSelected == true">
                            <label class="switch px-0 f-14">
                              <input type="checkbox" [disabled]="disabled" (click)="deleteKpiFromList(index,kpi)"
                                checked>
                              <span class="slider round"><small>Yes</small></span>
                            </label>
                          </a>
                        </span>
                        <button title="Click to view criteria" class="updown-arrow"
                          (click)="isCollapsed[index] =!isCollapsed[index];setCollapsedList();">
                          <i [ngClass]="isCollapsed[index] ? 'fa fa-angle-double-up':'fa fa-angle-double-down'"
                            class="fa-large" aria-hidden="true"></i>
                        </button>
                      </h4>
                    </div>
                    <div class="card-content">
                      <table class="table tableSkin grid2">
                        <caption class="sr-only">KPI Description </caption>
                        <thead class="d-none">
                          <tr>
                            <th scope="col"></th>
                          </tr>
                        </thead>
                        <tbody *ngIf="isCollapsed[index]">
                          <tr *ngFor="let criteria of kpi.kpiCriteriaType;let criteriaIndex = index">
                            <td *ngIf ="criteria.isActive || kpiSelectedList[index].criteriaSelected[criteriaIndex].criteriaSelected " class="pl-5  bg-white">
                               {{criteria.description}}
                              <span class="float-right  mr-5">
                                <a
                                  *ngIf="kpiSelectedList[index].criteriaSelected[criteriaIndex].criteriaSelected == false">
                                  <label class="switch">
                                    <input type="checkbox" [disabled]="disabled"
                                      (click)="addCriteria(index,criteriaIndex,kpi,criteria)">
                                    <span class="slider round"><small class="deactivate-text">No</small></span>
                                  </label>
                                </a>
                                <a
                                  *ngIf="kpiSelectedList[index].criteriaSelected[criteriaIndex].criteriaSelected == true">
                                  <label class="switch">
                                    <input type="checkbox" [disabled]="disabled"
                                      (click)="deleteCriteria(index,criteriaIndex,criteria, kpi)" checked>
                                    <span class="slider round"><small>Yes</small></span>
                                  </label>
                                </a>
                              </span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
