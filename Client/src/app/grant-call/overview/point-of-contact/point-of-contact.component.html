<div class="card mb-3">
  <div class="card-header px-4">
    <h4 class="card-title">Point of Contact
      <span class="float-right font-weight-normal mr-5">
        <i aria-hidden="true" class="fa fa-user-o mr-2"></i>Employee |
        <i aria-hidden="true" class="fa fa-user-circle text-danger ml-2 mr-2"></i>Non Employee
      </span>
      <button id="pointOfContactAddBtn" class="updown-arrow hand-cursor"
        (click)="pocObject.isShowAddPointOfContact = !pocObject.isShowAddPointOfContact">
        <i class="fa-large" aria-hidden="true"
          [ngClass]="pocObject.isShowAddPointOfContact?'fa fa-angle-double-up':'fa fa-angle-double-down'"></i>
      </button>
    </h4>
  </div>
  <div class="card-content" *ngIf="pocObject.isShowAddPointOfContact">
    <div class="card-body">
      <div *ngIf="mode" class="form-row">
        <div class="col-lg col-sm-6 col-12">
          <div class="form-check form-check-inline">
            <input class="radio-inline mr-2" type="radio" name="grantInlineRadioOptions" id="inlineRadio1"
              [value]="true" [(ngModel)]="isPOCEmployeeChecked" (ngModelChange)="personTypeChanged()">
            <label class="form-check-label" for="inlineRadio1">Employee</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="radio-inline mr-2" type="radio" name="grantInlineRadioOptions" id="inlineRadio2"
              [(ngModel)]="isPOCEmployeeChecked" [value]="false" (ngModelChange)="personTypeChanged()">
            <label class="form-check-label" for="inlineRadio2">Non-Employee</label>
          </div>
          <div class="position-relative">
            <app-elastic [options]="elasticSearchOptions" [clearField]="clearField" [isError]="isError"
              [placeHolder]="!isPOCEmployeeChecked ? 'Type here for an non-employee name': 'Type here for an employee name' "
              (selectedResult)="selectedPOC($event)">
            </app-elastic>
            <a id="grant-non-employee-add-btn" class="anchor-link fs-14" (click)="showAddToAddressBookModal = true; isShowElasticResults = false"
              *ngIf="!isPOCEmployeeChecked && _commonService.isEnableAddtoAddressBook"><i aria-hidden="true" class="fa fa-user-plus"></i>
              <ng-container i18n="@@COMMON_ADD_TO_ADDRESS_BOOK">Add to Address Book</ng-container></a>
            <div class="invalid-feedback d-block f-13" *ngIf="POCWarningMsg">
              {{POCWarningMsg}}</div>
          </div>
        </div>
        <div class="col-lg col-sm-6 col-12">
          <label for="POC-designation" class="block-display">Designation</label>
          <input type="text" id="POC-designation" class="form-control mt-1" placeholder="" autocomplete="off"
            [(ngModel)]="pointOfContactObject.designation">
        </div>
        <div class="col-lg col-sm-6 col-12">
          <label for="POC-email" class="block-display">Email</label>
          <input type="text" id="POC-email" class="form-control mt-1" autocomplete="off"
            [disabled]="isPOCEmployeeChecked" [(ngModel)]="pointOfContactObject.email"
            [ngClass]="(POCMailWarningMsg) ? 'is-invalid d-block' : ''">
          <div class="invalid-feedback d-block" *ngIf="POCMailWarningMsg">
            {{POCMailWarningMsg}}</div>
        </div>
        <div class="col-lg col-sm-6 col-12">
          <label for="POC-phone" class="block-display">Phone</label>
          <div>
            <input type="text" id="POC-phone" class="form-control mt-1" autocomplete="off" maxlength="20"
              [(ngModel)]="pointOfContactObject.mobile" (keyup)="inputRestriction(pointOfContactObject.mobile)"
              [ngClass]="warningMessage.has('phoneNumberWarning') ? 
                        'd-inline-block form-control ng-pristine ng-valid is-invalid d-block ng-touched' : 
                        'd-inline-block form-control ng-pristine ng-valid ng-touched'">
          </div>
          <div class="invalid-feedback block-display" *ngIf="warningMessage.has('phoneNumberWarning')">
            {{warningMessage.get('phoneNumberWarning')}}
          </div>
          <div class="invalid-feedback block-display" *ngIf="warningMessage.has('phoneNumberWarningAlphabets')">
            {{warningMessage.get('phoneNumberWarningAlphabets')}}
          </div>
        </div>     
        <div class="col-12" *ngIf="isShowElasticResults">
          <app-person-rolodex-card (ShowElasticResults)="setShowElasticResults($event)"
            [personRolodexObject]="selectedContactMember"></app-person-rolodex-card>
        </div>
        <div class="col-12 text-md-right text-center mb-0" *ngIf="mode">
          <button id="POC-cancel-btn" class="d-inline-block btn btn-secondary btn-xs mr-sm-2"
           *ngIf="isEditPointOfContact" (click)="resetPointOfContactFields()">Cancel</button>
          <button *ngIf="!isEditPointOfContact" class="btn btn-primary-sub btn-xs" title="Update Point of Contact" id="POC-add-btn"
            (click)="addPointOfContact()">Add Point of Contact</button>
          <button  *ngIf="isEditPointOfContact" class="btn btn-primary-sub btn-xs" title="Update Point of Contact" id="POC-update-btn"
          (click)="addPointOfContact()">Update Point of Contact</button>       
        </div>
      </div>
      <div class="noDataExists ml-2" *ngIf="result?.grantCallContacts?.length == 0 && !mode">There are no point of
        contacts
        specified</div>
      <div class="table-responsive mt-3" *ngIf="pocObject.isShowAddPointOfContact && result?.grantCallContacts?.length > 0">
        <table class="table tableSkin grid2">
          <caption class="sr-only">Point of Contact</caption>
          <thead>
            <tr class="thead-light">
              <th scope="col">Name</th>
              <th scope="col">Designation</th>
              <th scope="col">Email</th>
              <th scope="col">Phone Number</th>
              <th scope="col">Action(s)</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let pointOfContact of result?.grantCallContacts; let i = index;">
              <td><i aria-hidden="true" class="mr-2"
                  [ngClass]="pointOfContact.isEmployee ? 'fa fa-user-o' : 'fa fa-user-circle text-danger'"></i>{{pointOfContact.fullName}}
              </td>
              <td><span *ngIf="pointOfContact?.designation else nodesignation">{{pointOfContact.designation}}</span>
                <ng-template #nodesignation>
                  <span class="noDataExists">No designation specified</span>
                </ng-template>
              </td>
              <td><span *ngIf="pointOfContact?.email else noemail">{{pointOfContact.email}}</span>
                <ng-template #noemail>
                  <span class="noDataExists">No email specified</span>
                </ng-template>
              </td>
              <td><span *ngIf="pointOfContact?.mobile else nomobile">{{pointOfContact.mobile}}</span>
                <ng-template #nomobile>
                  <span class="noDataExists">No phone number specified</span>
                </ng-template>
              </td>
              <td>
                <ul class="actionButtonGroup">
                  <li>
                    <a href="#" id="poc-view-btn" data-toggle="modal"
                      (click)="fetchPersonDetails(pointOfContact)">
                      <i class="fa fa-eye" aria-hidden="true"
                        title="Click here to view {{pointOfContact?.fullName}}"></i>
                    </a>
                  </li>
                  <li *ngIf="mode">
                    <a id="prop-point-of-contact-edit-btn">  
                        <i class="fa fa-pencil" aria-hidden="true"  (click)="isEditPointOfContact = true;editPointOfContact(i)"
                            title="Click here to edit {{pointOfContact?.fullName}}"></i>
                    </a>
                </li>
                  <li *ngIf="mode"><a href="#" data-toggle="modal" id="POC-delete-btn" data-target="#deleteGrantPOC" 
                    *ngIf="!isEditPointOfContact || (isEditPointOfContact && isEditIndex !== i)"
                      (click)="setPOCObject(pointOfContact.grantContactId, i)"><i class="fa fa-trash-o pointer"
                        aria-hidden="true" title="Remove this person"></i></a>
                  </li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!-- DELETE POC WARNING MODAL -->
<div class="modal fade mySkinDialog" tabindex="-1" id="deleteGrantPOC" tabindex="-1" role="dialog"
  aria-labelledby="deleteModalTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Delete</h5>
        <button type="button" class="close" data-dismiss="modal" id="prop-doc-dlt-dismiss" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this item?</p>
      </div>
      <div class="modal-footer">
        <button type="button" id="prop-doc-dlt-no-btn" class="btn btn-secondary" data-dismiss="modal"
          data-toggle="modal">No</button>
        <button type="button" id="prop-doc-dlt-yes-btn" class="btn btn-primary-sub btn-sm" (click)="deletePOC()"
          data-dismiss="modal">Delete</button>
      </div>
    </div>
  </div>
</div>

<app-address-book *ngIf="showAddToAddressBookModal == true" [isAddNonEmployeeModal]="showAddToAddressBookModal"
  (rolodexResult)="setRolodexTeamObject($event)"></app-address-book>

  <app-person-rolodex-view (personRolodexViewModal)="setPersonRolodexModalView($event)"
   *ngIf="isRolodexViewModal" [personRolodexType]="type" [personRolodexId]="id" [personRolodexIsTraining]="isTraining" 
   [personRolodexPersonDescription]="personDescription" ></app-person-rolodex-view>