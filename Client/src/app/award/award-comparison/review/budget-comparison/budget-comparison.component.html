<div id="Award102" class="card mt-3 mb-3" *ngIf="_commonData?.awardSectionConfig['176']?.isActive">
  <div class="card-header px-4">
    <h4 class="card-title">Budget Overview</h4>
    <button id="costShareExpandBtn" class="updown-arrow" (click)="isOverviewWidgetOpen = !isOverviewWidgetOpen">
      <i [ngClass]="isOverviewWidgetOpen?'fa fa-angle-double-up':'fa fa-angle-double-down'" class="fa-large"
        aria-hidden="true"></i>
    </button>
  </div>
  <div *ngIf="isOverviewWidgetOpen" class="card-content">
    <div class="card-body pt-0">
      <div *ngIf="!awardBudgetHeader" class="no-data-container">
        <span class="no-data-icon-outer">
          <div class="no-data-icon">
            <i class="fa fa-file-o" aria-hidden="true"></i>
            <i class="fa fa-times-circle-o" aria-hidden="true"></i>
          </div>
        </span>
        <h4>There is no information in this section.</h4>
      </div>
      <div *ngIf="awardBudgetHeader" >
        <div class="gridSkin">
          <div class="row px-4">
            <div class="col-md-2 col-sm col-6 ">
              <h5>Start Date</h5>
              <span class=" text-secondary f-13 fw-500"
                [innerHTML]='awardBudgetHeader.startDate ? dateFormatter.parseDate(awardBudgetHeader.startDate) : "No data available"'></span>
            </div>
            <div class="col-md-2 col-sm col-6 ">
              <h5>End Date</h5>
              <span class="text-secondary f-13 fw-500"
                [innerHTML]='awardBudgetHeader.endDate ?dateFormatter.parseDate(awardBudgetHeader.endDate): "No data available"'></span>
            </div>
            <div class="col-md-2 col-sm col-6 " *ngIf='enabledCampusFlagAward'>
              <h5>On/Off Campus</h5>
              <span class="fw-500 f-13 text-secondary"
                [innerHTML]='awardBudgetHeader.onOffCampusFlag ? awardBudgetHeader.onOffCampusFlag : "No data available"'></span>
            </div>
            <div class="col-md-2 col-sm col-6 ">
              <h5><ng-container i18n="@@PROPOSAL_OVER_HEAD_RATE_TYPE">Over Head Rate Type</ng-container></h5>
              <span class=" f-13 fw-50 text-secondary"
                [innerHTML]='awardBudgetHeader.rateType?.description ? awardBudgetHeader?.rateType?.description : "No data available"'></span>
            </div>
            <div class="col-md-3 col-sm col-6 ">
              <h5>Remaining Fund based on</h5>
              <span class="text-secondary f-13 fw-500"
                [innerHTML]='awardBudgetHeader?.availableFundType ? awardBudgetHeader?.availableFundType : "No data available"'></span>
            </div>
          </div>
          <div class="row px-4">
            
            <div class="col-lg-2 col-md-4 col-sm-3 col-12" *ngIf="enableCostShareStatus">
              <h5>Cost Sharing</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.costSharingTypeCode ? awardBudgetHeader.costSharingType.description : "No data available"'>
              </span>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-3 col-12 " *ngIf="isShowBudgetOHRatePercentage">
              <h5>On-Campus Rate</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.onCampusRates ? awardBudgetHeader.onCampusRates :"No data available"'>
              </span>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-3 col-12 " *ngIf="isShowBudgetOHRatePercentage">
              <h5>Off-Campus Rate</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.offCampusRates ? awardBudgetHeader.offCampusRates : "No data available"'>
              </span>
            </div>
            
            <div *ngIf="awardBudgetHeader?.enableAwardBudgetVirementCalculation" class="col-md-2 col-sm col-6 ">
              <h5>Virement %</h5>
              <span class="fw-500 f-13 text-secondary"
                [innerHTML]='awardBudgetHeader?.virement ? awardBudgetHeader?.virement : "0.00" '></span>
            </div>
            <div  *ngIf="awardBudgetHeader?.enableAwardBudgetVirementCalculation" class="col-md-2 col-sm col-6">
              <h5>Cumulative Virement %</h5>
              <span class="fw-500 f-13 text-secondary"
                [innerHTML]='awardBudgetHeader?.cumulativeVirement ? awardBudgetHeader?.cumulativeVirement : "0.00" '></span>
            </div>
          </div>
          <div class="row px-4">
            <div class="col-lg-2 col-sm-6 col-12" *ngIf="isShowAwardBudgetFieldForSap">
              <h5>Fund Center</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.fundCenter ? awardBudgetHeader.fundCenter : "No data available"'>
              </span>
            </div>
            <div class="col-lg-2 col-sm-6 col-12" *ngIf="isShowAwardBudgetFieldForSap">
              <h5>Fund Code</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.fundCode ? awardBudgetHeader.fundCode : "No data available"'>
              </span>
            </div>
            <div class="col-lg-2 col-sm-6 col-12" *ngIf="isShowAwardBudgetFieldForSap">
              <h5>Fund Disbursement Basis</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.fundDisbursementBasisTypeCode ? awardBudgetHeader.fundDisbursementBasisType.description : "No data available"'>
              </span>
            </div>
          </div>
          <div class="row px-4">
            <div class="col-md-2 col-sm col-6 ">
              <h5>Direct Cost</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.totalDirectCost ? currencyFormatter.parseCurrency(awardBudgetHeader.totalDirectCost) : currencyFormatter.parseCurrency("0.00")'>
              </span>
            </div>
            <div class="col-md-2 col-sm col-6 ">
              <h5>Indirect Cost</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.totalIndirectCost ? currencyFormatter.parseCurrency(awardBudgetHeader.totalIndirectCost) : currencyFormatter.parseCurrency("0.00")'>
              </span>
            </div>
            <div class="col-md-2 col-sm col-6 ">
              <h5>Total Cost</h5>
              <span class=" f-13 fw-500 text-secondary"
                [innerHTML]='awardBudgetHeader.totalCost ? currencyFormatter.parseCurrency(awardBudgetHeader.totalCost) : currencyFormatter.parseCurrency("0.00")'>
              </span>
            </div>
          </div>
          <div class="row px-4">
            <div class="col-12">
              <h5 class="d-block">Description</h5>
              <span class="text-secondary f-13 fw-500"
              [innerHTML]='awardBudgetHeader?.comments ? awardBudgetHeader?.comments : "No data available"'></span>
            </div>
          </div>
        </div>
      </div>
      <div >
        <app-comment-box [sectionCode]="102" [awardId]="comparisonDetails.baseAwardId"
          [awardNumber]="comparisonDetails.awardNumber" [sequenceNumber]="comparisonDetails.sequenceNumber">
        </app-comment-box>
      </div>
    </div>
  </div>
</div>
<div *ngIf="awardBudgetHeader && _commonData?.awardSectionConfig['177']?.isActive" id="Award127" class="card mt-3 mb-3">
  <div class="card-header px-4">
    <h4 class="card-title">Budget Periods & Total</h4>
    <button id="costShareExpandBtn" class="updown-arrow" (click)="isPeriodsWidgetOpen = !isPeriodsWidgetOpen">
      <i [ngClass]="isPeriodsWidgetOpen?'fa fa-angle-double-up':'fa fa-angle-double-down'" class="fa-large"
        aria-hidden="true"></i>
    </button>
  </div>
  <div *ngIf="isPeriodsWidgetOpen" class="card-content">
    <div class="card-body pt-0">
      <div *ngIf="budgetPeriods.length == 0" class="no-data-container">
        <span class="no-data-icon-outer">
          <div class="no-data-icon">
            <i class="fa fa-file-o" aria-hidden="true"></i>
            <i class="fa fa-times-circle-o" aria-hidden="true"></i>
          </div>
        </span>
        <h4>There is no information in this section.</h4>
      </div>
      <div *ngIf="budgetPeriods.length > 0" class="table-responsive custom-overflow">
        <table class="table tableSkin table-bordered grid2 mt-4">
          <caption class="d-none">Budget Periods & Total</caption>
          <thead>
            <tr>
              <th scope="col" style="width:5%">Period #</th>
              <th scope="col" style="width:10%">Start Date</th>
              <th scope="col" style="width:10%">End Date</th>
              <th scope="col" style="width:12%">Direct Cost({{_commonService.currencyFormat}})</th>
              <th scope="col" style="width:12%">Indirect Cost({{_commonService.currencyFormat}})</th>
              <th scope="col" style="width:12%">Total Cost({{_commonService.currencyFormat}})</th>
            </tr>
          </thead>
          <tbody>
            <tr [ngClass]="{'delete-background': period.status == -1,
              'add-background': period.status == 1}" *ngFor="let period of budgetPeriods">
              <td>{{period.budgetPeriod}} </td>
              <td [innerHTML]='dateFormatter.parseDate(period.startDate)'> </td>
              <td [innerHTML]='dateFormatter.parseDate(period.endDate)'> </td>
              <td class="text-right"
                [innerHTML]='period.totalDirectCost ? currencyFormatter.parseCurrency(period.totalDirectCost) : currencyFormatter.parseCurrency("0.00")'>
              </td>
              <td class="text-right"
                [innerHTML]='period.totalIndirectCost ? currencyFormatter.parseCurrency(period.totalIndirectCost): currencyFormatter.parseCurrency("0.00")'>
              </td>
              <td class="text-right"
                [innerHTML]='period.totalCost ?currencyFormatter.parseCurrency(period.totalCost): currencyFormatter.parseCurrency("0.00")'>
              </td>
            </tr>
            <tr>
              <td colspan="2"></td>
              <td class="font-weight-bold text-right">Total</td>
              <td class="font-weight-bold text-right"
                [innerHTML]='awardBudgetHeader?.totalDirectCost ? currencyFormatter.parseCurrency(awardBudgetHeader?.totalDirectCost) : currencyFormatter.parseCurrency("0.00")'>
              </td>
              <td class="font-weight-bold text-right"
                [innerHTML]='awardBudgetHeader?.totalIndirectCost ? currencyFormatter.parseCurrency(awardBudgetHeader?.totalIndirectCost): currencyFormatter.parseCurrency("0.00")'>
              </td>
              <td class="font-weight-bold text-right"
                [innerHTML]='awardBudgetHeader?.totalCost ? currencyFormatter.parseCurrency(awardBudgetHeader?.totalCost): currencyFormatter.parseCurrency("0.00")'>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="p-3">
      <app-comment-box [sectionCode]="127" [awardId]="comparisonDetails.baseAwardId"
        [awardNumber]="comparisonDetails.awardNumber" [sequenceNumber]="comparisonDetails.sequenceNumber">
      </app-comment-box>
    </div>
  </div>
</div>
<div id="Award129" class="card mb-3" *ngIf="_commonData.awardSectionConfig['178']?.isActive">
  <div class="card-header px-4">
    <h4 class="card-title">Detailed Budget</h4>
    <button id="costShareExpandBtn" class="updown-arrow"
      (click)="isDetailedBudgetWidgetOpen = !isDetailedBudgetWidgetOpen">
      <i [ngClass]="isDetailedBudgetWidgetOpen?'fa fa-angle-double-up':'fa fa-angle-double-down'" class="fa-large"
        aria-hidden="true"></i>
    </button>
  </div>
  <div *ngIf="isDetailedBudgetWidgetOpen" class="card-content">
    <div class="card-body pt-0">
      <div class="no-data-container" *ngIf="budgetPeriods.length=== 0">
        <span class="no-data-icon-outer">
          <div class="no-data-icon">
            <i class="fa fa-file-o" aria-hidden="true"></i>
            <i class="fa fa-times-circle-o" aria-hidden="true"></i>
          </div>
        </span>
        <h4>There is no information in this section.</h4>
      </div>
      <ng-container *ngFor="let period of budgetPeriods">
        <div *ngIf="period.budgetDetails.length" class="p-2 text-secondary fw-500">
          <span>Period {{period.budgetPeriod}} </span>
        </div>
        <div *ngIf="period.budgetDetails.length" class="row card-table-box m-0">
          <div class="w-100">
            <table class="table tableSkin table-bordered grid2 ">
              <caption class="sr-only">Detailed Budget</caption>
              <thead class="text-center">
                <tr>
                  <th scope="col">Budget Category</th>
                  <th scope="col"><ng-container i18n="@@AWARD_COST_ELEMENT">Cost Element</ng-container></th>
                  <th scope="col"><ng-container i18n="@@AWARD_WBS_NUMBER_FOR_OFIN_USE">WBS Number (for OFIN use)</ng-container></th>
                  <th scope="col">Quantity</th>
                  <th scope="col">LineItem Cost ({{_commonService.currencyFormat}})</th>
                  <th scope="col"><ng-container i18n="@@AWARD_JUSTIFICATION">Justification</ng-container></th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngFor="let lineItem of period.budgetDetails; let detailIndex=index;">
                  <tr [ngClass]="{'delete-background':period.status == -1 || lineItem.status == -1,
                'add-background':period.status == 1 || lineItem.status == 1}">
                    <td width="15%">
                      <span  [innerHTML]='lineItem?.budgetCategory?.description'></span>
                      <span *ngIf="helpText?.budget && helpText?.budget[lineItem?.budgetCategory?.code]?.helpTextInfo" class="d-inline-block icon-hover">
                        <a class="tooltip z-index-0 tooltip-helptext"><i class="fa fa-question-circle fa-med" aria-hidden="true"></i>
                            <div class="tooltiptext-left card card-inner p-15 text-left">
                                <span class="font-cv">{{helpText?.budget[lineItem?.budgetCategory?.code]?.helpTextInfo}}</span>
                            </div>
                        </a>
                      </span>
                    </td>
                    <td width="20%" [innerHTML]='lineItem?.costElement?.costElementDetail'></td>
                    <td width="15%" [innerHTML]='lineItem?.internalOrderCode'></td>
                    <td width="8%" [innerHTML]='lineItem?.quantity ? currencyFormatter.parseNumber(lineItem?.quantity):currencyFormatter.parseNumber("0")'></td>
                    <td width="12%" [innerHTML]='lineItem?.lineItemCost ? currencyFormatter.parseCurrency(lineItem?.lineItemCost):currencyFormatter.parseCurrency("0.00")'></td>
                    <td width="8%" class="new-line-property" [innerHTML]='lineItem?.lineItemDescription'></td>
                  </tr>
                  <tr>
                    <td
                      *ngIf="lineItem?.personsDetails?.length > 0 && (!awardBudgetHeader?.manpowerEnabled || !awardBudgetHeader?.budgetAssociatedWithManpower)"
                      colspan="6">
                      <table class="table tableSkin table-bordered grid2">
                        <thead>
                          <tr>
                            <th>Persons</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th><ng-container i18n="@@AWARD_WBS_NUMBER_FOR_OFIN_USE">WBS Number (for OFIN use)</ng-container></th>
                            <th>Salary({{_commonService.currencyFormat}})</th>
                            <th>Effort%</th>
                            <th><ng-container i18n="@@AWARD_APPLIED_SALARY">Applied Salary</ng-container> ({{_commonService.currencyFormat}})</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr [ngClass]="{'delete-background':period.status == -1 || lineItem.status == -1 || person.status == -1,
                          'add-background':period.status == 1 || lineItem.status == 1 || person.status == 1}"
                            *ngFor="let person of lineItem?.personsDetails; let PIndex = index">
                            <td>
                              <span [innerHTML]='person?.budgetPerson?.budgetPersonName'></span>
                              ( <span [innerHTML]='person?.budgetPerson?.jobCodes?.jobTitle'></span>)
                            </td>
                            <td [innerHTML]='dateFormatter.parseDate(person?.startDate)'></td>
                            <td [innerHTML]='dateFormatter.parseDate(person?.endDate)'></td>
                            <td [innerHTML]='person?.internalOrderCode'></td>
                            <td [innerHTML]='person?.totalSalary'></td>
                            <td [innerHTML]='person?.percentageEffort'></td>
                            <td [innerHTML]='person?.salaryRequested'></td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                    <td
                      *ngIf="lineItem?.nonPersonsDetails?.length > 0"
                      colspan="6">
                      <table class="table tableSkin table-bordered grid2">
                        <thead>
                          <tr>
                            <th>Sub Line Item</th>
                            <th><ng-container i18n="@@AWARD_WBS_NUMBER_FOR_OFIN_USE">WBS Number (for OFIN use)</ng-container></th>
                            <th><ng-container >Line Item Cost</ng-container> ({{_commonService.currencyFormat}})</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr  [ngClass]="{'delete-background':nonPerson.status == -1,
                          'add-background':nonPerson.status == 1}"
                          *ngFor="let nonPerson of lineItem?.nonPersonsDetails;">
                            <td>
                              <span [innerHTML]='nonPerson?.description'></span>
                            </td>
                            <td [innerHTML]='nonPerson?.internalOrderCode'></td>
                            <td [innerHTML]='nonPerson?.lineItemCost'></td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </div>
      </ng-container>
    </div>
    <div class="p-3">
      <app-comment-box [sectionCode]="129" [awardId]="comparisonDetails.baseAwardId"
        [awardNumber]="comparisonDetails.awardNumber" [sequenceNumber]="comparisonDetails.sequenceNumber">
      </app-comment-box>
    </div>
  </div>
</div>
<div id="Award128" class="card mb-3" *ngIf="_commonData?.awardSectionConfig['179']?.isActive">
  <div class="card-header px-4">
    <h4 class="card-title">Budget Summary</h4>
    <button id="costShareExpandBtn" class="updown-arrow" (click)="isSummaryWidgetOpen = !isSummaryWidgetOpen">
      <i [ngClass]="isSummaryWidgetOpen?'fa fa-angle-double-up':'fa fa-angle-double-down'" class="fa-large"
        aria-hidden="true"></i>
    </button>
  </div>
  <div *ngIf="isSummaryWidgetOpen" class="card-content">
    <div class="card-body pt-0">
      <div class="no-data-container" *ngIf="awardBudgetSummary?.length == 0 || !awardBudgetSummary">
        <span class="no-data-icon-outer">
          <div class="no-data-icon">
            <i class="fa fa-file-o" aria-hidden="true"></i>
            <i class="fa fa-times-circle-o" aria-hidden="true"></i>
          </div>
        </span>
        <h4>There is no information in this section.</h4>
      </div>
      <div class="table-responsive custom-overflow">
        <table *ngIf="awardBudgetSummary?.length > 0" class="table tableSkin table-bordered grid2 mt-4">
          <thead>
            <tr>
              <th scope="col" style="width:25%">Category</th>
              <th scope="col" *ngFor="let period of result?.budgetSummaryVOs">
                <span class="text-center">Period {{period.periodNumber}}</span>
              </th>
              <th scope="col">Total({{_commonService.currencyFormat}})</th>
            </tr>
          </thead>
          <tbody>
            <tr [ngClass]="{'delete-background': summary.status == -1,
              'add-background': summary.status == 1}" *ngFor="let summary of awardBudgetSummary">
              <td>
                <span [innerHTML]='summary.budgetCategory'></span>
                <span *ngIf="helpText?.budget && helpText?.budget[summary?.budgetCategoryCode]?.helpTextInfo" class="d-inline-block icon-hover">
                  <a class="tooltip z-index-0 tooltip-helptext"><i class="fa fa-question-circle fa-med" aria-hidden="true"></i>
                      <div class="tooltiptext-left card card-inner p-15 text-left">
                          <span class="font-cv">{{helpText?.budget[summary?.budgetCategoryCode]?.helpTextInfo}}</span>
                      </div>
                  </a>
                </span>
              </td>
              <td *ngFor="let cost of summary?.budgetSummaryVOs" class="text-right"
                [innerHTML]='cost?.lineItemCost ? currencyFormatter.parseCurrency(cost?.lineItemCost): currencyFormatter.parseCurrency("0.00")'>
              </td>
              <td class="text-right"
                [innerHTML]='summary?.totalLineItemCostSum ? currencyFormatter.parseCurrency(summary?.totalLineItemCostSum): currencyFormatter.parseCurrency("0.00")'>
              </td>
            </tr>
            <tr *ngIf="awardBudgetSummary?.length > 0">
              <td class="totalText"><span>Grand Total</span></td>
              <td *ngFor="let periodTotal of result?.budgetSummaryVOs" class="text-right totalText">
                <span
                  [innerHTML]='periodTotal?.lineItemCost ? currencyFormatter.parseCurrency(periodTotal?.lineItemCost): currencyFormatter.parseCurrency("0.00")'>
                </span></td>
              <td class="text-right totalText">
                <span
                  [innerHTML]='result?.periodTotalSum ? currencyFormatter.parseCurrency(result?.periodTotalSum): currencyFormatter.parseCurrency("0.00")'>
                </span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="p-3">
      <app-comment-box [sectionCode]="128" [awardId]="comparisonDetails.baseAwardId"
        [awardNumber]="comparisonDetails.awardNumber" [sequenceNumber]="comparisonDetails.sequenceNumber">
      </app-comment-box>
    </div>
  </div>
</div>
